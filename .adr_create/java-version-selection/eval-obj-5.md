# OBJ-5: 将来の技術選択の柔軟性 — 評価結果

## 提案した代替案

### ALT-5A: Java 17（保守的戦略）
この目的を最適化する観点から、Java 17を採用することで以下の利点がある:
- エコシステムの成熟度が高く、将来のバージョンへの移行時に広範な移行事例とツールが利用可能
- Spring Boot 3.xの最小要件を満たしつつ、将来的なLTS（21, 25）への段階的移行パスが明確
- 広範な互換性により、将来のライブラリ・フレームワークの選択肢が制限されるリスクが低い
- 可逆性が比較的高く、問題発生時の選択肢が多い

### ALT-5B: Java 21（バランス戦略）
この目的を最適化する観点から、Java 21を採用することで以下の利点がある:
- LTSとして長期サポートを受けつつ、Virtual Threads等の新機能により将来的なアーキテクチャ選択肢が拡大
- 2026年時点で十分に成熟し、かつ次期LTS（25, 29）への移行が段階的に可能
- 新しい並行処理モデルへの早期適応により、将来のリアクティブアーキテクチャへの移行コストが低減
- エコシステムの進化に追従しやすく、新フレームワークの要件に対応可能

### ALT-5C: Java 25（先進的戦略）
この目的を最適化する観点から、Java 25を採用することで以下の利点がある:
- 最新のLTSとして最長のサポート期間を持ち、次回LTS（29, 2027年）への移行時期を最も遅延可能
- 最新機能を活用することで、将来的な技術的負債の蓄積が最小化
- エコシステムの進化への追従が最も容易（新ライブラリは通常最新LTSをターゲットとする）
- ただし、2026年2月時点ではエコシステムの成熟待ちのため、採用判断は慎重を要する

## 評価

### ALT-5A: Java 17（保守的戦略）

- 評価: ○
- 利点:
  - 将来のLTS（21, 25, 29）への移行パスが明確かつ段階的。移行事例とツールが豊富
  - 広範なエコシステム互換性により、将来のフレームワーク・ライブラリ選択肢が最も広い
  - 可逆性が高く、問題発生時のフォールバック選択肢（Java 11への一時的戻しは困難だが、17での長期維持は現実的）が確保される
  - Spring Boot 3.xの最小要件を満たすため、エコシステムの進化に一定程度追従可能
- 欠点:
  - Virtual Threads等の新機能が利用できず、将来的なアーキテクチャ選択肢（リアクティブプログラミング、高並行処理）が制限される可能性
  - 2021年リリースのため、2027年以降の新しいフレームワークが最小要件をJava 21以上に引き上げた場合に追従が困難
  - プロジェクト拡張時に技術的負債が蓄積しやすい（新機能を使わない設計が定着すると、後の移行コストが増大）
- 根拠:
  - research.mdでSpring Boot 3がJava 17を最小要件としていることが確認され、エコシステムの互換性が保証される
  - Java 17のPremier Supportは2026年まで、Extended Supportは2029年9月までであり、プロジェクト運用期間（S4: 2年以上、S10: 3年以上）をカバー可能
  - ただし、Java 21がVirtual Threadsを導入しており、並行処理アーキテクチャの選択肢に差が生じる（research.mdで性能向上とリソース削減が報告）
- CSD依存:
  - S4（開発期間2年以上）: 短期プロジェクトであれば、Java 17での長期維持リスクは低減
  - S10（運用期間3年以上）: 運用期間が長いほど、将来的なLTS移行の必要性が高まり、移行パスの明確さが重要
  - D1（サードパーティライブラリのJava 21/25互換性）: 互換性が不明確な場合、Java 17の広範な互換性が安全策となる

### ALT-5B: Java 21（バランス戦略）

- 評価: ◎
- 利点:
  - Virtual Threadsにより並行処理アーキテクチャの選択肢が大幅に拡大。将来的なリアクティブシステムやマイクロサービス化への移行が容易
  - LTSとして長期サポートを受けつつ、次期LTS（25, 29）への移行も段階的に可能
  - 2026年時点でエコシステムが十分成熟し（research.mdでSpring Boot等の対応確認）、新ライブラリの互換性リスクが低い
  - Generational ZGC等の性能改善（research.mdで10%改善報告）により、将来的なインフラ選択肢（コンテナ、クラウドネイティブ）での最適化余地が大きい
  - 可逆性は部分的（Java 17へのダウングレードは技術的に可能だがVirtual Threads依存を除去する必要）だが、前進方向（25, 29へ）の移行は容易
- 欠点:
  - Java 25と比較すると、将来的な技術的負債の蓄積リスクがやや高い（ただし差は限定的）
  - Java 21のNFTC版が2026年9月で終了するため、OpenJDKディストリビューション選択が必須（S3の仮定に依存）
- 根拠:
  - research.mdで、Java 21がVirtual Threadsによる並行処理革新を提供し、高並行アプリケーションでのパフォーマンス向上が報告されている
  - Java 21は2021年9月リリースから5年経過しており、エコシステムの成熟度が十分（research.mdでSpring Boot 3.xが対応）
  - Virtual Threadsの採用により、将来的なアーキテクチャ選択（リアクティブプログラミング、マイクロサービス、サーバーレス）の技術的制約が緩和
  - 次期LTS（25, 29）への移行パスが明確であり、段階的な進化が可能
- CSD依存:
  - S2（Virtual Threadsの有効性）: 並行処理要件が高い場合、この仮定が成立すればアーキテクチャ選択肢が最大化される。成立しない場合でもJava 17と同等の選択肢は確保
  - S3（OpenJDKディストリビューションの無償継続）: この仮定が崩れた場合、コスト面での将来選択肢が制限される可能性
  - D4（並行処理要件の規模）: 並行処理が重要であれば、Virtual Threadsによる将来のアーキテクチャ柔軟性が大きな利点。規模が小さければ利点は限定的

### ALT-5C: Java 25（先進的戦略）

- 評価: △
- 利点:
  - 最新LTSとして最長のサポート期間を持ち、次回LTS（29, 2027年）への移行を最も遅延可能
  - 最新機能（Generational ZGC標準化、Memory-Access改善等）により技術的負債の蓄積が最小化
  - エコシステムの進化に最も追従しやすく、将来の新ライブラリは通常最新LTSをターゲットとする
  - 可逆性は部分的（Java 21/17へのダウングレードは技術的に可能だがJava 25特有機能依存を除去する必要）だが、前進方向（29へ）の移行は最も容易
- 欠点:
  - 2026年2月時点ではリリースから5ヶ月程度であり、エコシステムの成熟度が不確実（D6）。ツール、ライブラリ、ドキュメントの未整備により、開発初期の選択肢が制限される可能性
  - 互換性問題が発生した場合のフォールバック選択肢が限定的（Java 21/17への移行コストが高い）
  - エコシステムの未成熟により、将来的な移行事例やツールの蓄積が少なく、次期LTS移行時の参考情報が不足する可能性
- 根拠:
  - research.mdで、Java 25が2025年9月リリースの最新LTSであり、標準的な長期サポートを受けることが確認されている
  - ただし、2026年2月時点ではリリースから5ヶ月程度であり、エコシステムの成熟度（D6）に不確実性がある
  - Java 23の機能（Generational ZGC標準化等）がJava 25に継承され、最新の性能改善を享受可能
  - しかし、早期採用のリスク（情報不足、ツール未整備）により、開発初期段階での技術選択肢が一時的に制限される可能性
- CSD依存:
  - D1（サードパーティライブラリのJava 25互換性）: この不確実性が最も影響する代替案。互換性が不明確な場合、ライブラリ選択肢が大幅に制限され、将来の技術選択柔軟性が損なわれる
  - D6（Java 25のエコシステム成熟度）: エコシステムが成熟していない場合、ツール・ドキュメント不足により、将来の拡張・移行時の選択肢が制限される
  - S11（エコシステム成熟度の重視）: 安定性優先の場合、早期採用リスクが将来の柔軟性を損なう可能性。革新的採用方針の場合は利点が大きい
  - S10（運用期間3年以上）: 運用期間が長いほど、最新LTSの長期サポート期間が将来の選択肢を広げる。短期の場合は利点が限定的
