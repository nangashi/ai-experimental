# OBJ-4: 将来の拡張性 — 評価結果

## 提案した代替案

将来の拡張性を最適化する観点から、以下の代替案を提案する。

- **Gradle (Kotlin DSL)**: Kotlin DSL はタイプセーフで IDE 補完が効き、複雑なビルドロジックをプログラマティックに記述できる。マルチモジュール構成への対応が柔軟であり、カスタムタスクの実装が容易。プラグインエコシステムも活発で、将来的な拡張要件に対応しやすい。

- **Gradle (Groovy DSL)**: Groovy DSL は柔軟性が高く、動的な記述が可能。カスタムビルドタスクの実装がシンプルで、複雑なビルドロジックを簡潔に表現できる。マルチモジュール構成のサポートも充実している。

- **Maven**: XML ベースの設定は型安全性がなく、複雑なビルドロジックの表現力は限定的だが、標準的なプラグイン機構により拡張性を提供する。マルチモジュール構成のサポートは成熟している。

## 評価

### Gradle (Kotlin DSL)

- 評価: ◎
- 利点:
  - Kotlin DSL はタイプセーフであり、IDE の補完・ナビゲーション・リファクタリング機能を活用できる。複雑なビルドロジックをプログラマティックに記述でき、保守性が高い
  - カスタムビルドタスクを Kotlin で実装でき、Java 開発者にとって学習コストが低い
  - マルチモジュール構成への対応が柔軟で、依存関係の管理が直感的
  - プラグインエコシステムが活発であり、将来的な拡張要件に対応しやすい（research.md: Gradle は2026年のコミュニティランキングでトップ）
  - Gradle 9.x では Configuration Cache、並列実行、インクリメンタルビルド等の最適化が進化しており、大規模プロジェクトへのスケーラビリティが高い
- 欠点:
  - Kotlin DSL の学習コストが存在する。Java 開発者でも Kotlin の基礎を習得する必要がある
  - ビルドスクリプトの自由度が高いため、過度にカスタマイズすると保守性が低下するリスクがある
- 根拠:
  - research.md により、Gradle 9.3.1 が最新リリースであり、継続的な機能強化が行われていることが確認されている
  - Kotlin DSL はタイプセーフであり、IDE サポートが充実しているため、複雑なビルドロジックの記述と保守が容易
  - マルチモジュール構成やカスタムタスクの実装において、Groovy DSL より型安全性が高く、リファクタリングに強い
- CSD依存:
  - S4（複雑なビルド要件が将来発生する可能性がある）に強く依存する。S4 が成立しない場合、Kotlin DSL の柔軟性がオーバースペックとなる可能性がある
  - S10（チームは Groovy/Kotlin DSL の記述に抵抗がない）に依存する。Kotlin DSL の学習コストを受け入れられない場合、初期生産性が低下する
  - D1（チームの Gradle 習熟度）に依存する。Gradle に不慣れな場合、Kotlin DSL の習得に時間がかかる

### Gradle (Groovy DSL)

- 評価: ◎
- 利点:
  - Groovy DSL は柔軟性が高く、動的な記述が可能。カスタムビルドタスクの実装がシンプル
  - 複雑なビルドロジックを簡潔に表現できる。スクリプト的な記述が可能で、Kotlin DSL より学習コストが低い
  - マルチモジュール構成への対応が柔軟で、依存関係の管理が直感的
  - プラグインエコシステムが活発であり、将来的な拡張要件に対応しやすい
  - Gradle のドキュメントやコミュニティサンプルは Groovy DSL が主流であり、参考資料が豊富
- 欠点:
  - Groovy DSL は型安全性がなく、IDE の補完機能が Kotlin DSL より劣る。ビルドスクリプトが大規模化すると保守性が低下する可能性がある
  - 動的な記述が可能であるため、ビルドスクリプトの可読性が低下するリスクがある
  - Kotlin DSL へのマイグレーション推奨傾向があり、長期的には Kotlin DSL がデファクトスタンダードになる可能性がある
- 根拠:
  - Groovy DSL は Gradle の伝統的な記述方式であり、参考資料やコミュニティサポートが充実している
  - Kotlin DSL と比較して、スクリプト的な柔軟性が高く、カスタムタスクの実装が容易
  - ただし、型安全性の欠如により、大規模プロジェクトでは保守性が課題となる可能性がある
- CSD依存:
  - S4（複雑なビルド要件が将来発生する可能性がある）に強く依存する。S4 が成立しない場合、Groovy DSL の柔軟性がオーバースペックとなる可能性がある
  - S10（チームは Groovy/Kotlin DSL の記述に抵抗がない）に依存する。Groovy DSL の動的な記述に不慣れな場合、初期生産性が低下する
  - D1（チームの Gradle 習熟度）に依存する。Gradle に不慣れな場合、Groovy DSL の習得に時間がかかる
  - D3（将来的なマルチモジュール化やカスタムビルドタスクの必要性）に依存する。複雑なビルド要件が発生しない場合、Groovy DSL の柔軟性がオーバースペックとなる

### Maven

- 評価: △
- 利点:
  - マルチモジュール構成のサポートは成熟しており、標準的な方法で複数モジュールを管理できる
  - プラグイン機構により拡張性を提供する。Maven Central には豊富なプラグインが存在する
  - XML ベースの設定は宣言的で、予測可能な動作を提供する
  - Maven 4 では新機能が追加されており、長期的なサポートが期待できる（research.md: Maven 4.0.0-rc-5 がリリース候補）
- 欠点:
  - XML ベースの設定は複雑なビルドロジックの表現力が限定的。カスタムビルドタスクの実装には Java でプラグインを作成する必要があり、コストが高い
  - プラグイン開発は別プロジェクトとして管理する必要があり、ビルドスクリプト内での簡易的なカスタマイズが困難
  - 大規模プロジェクトでは pom.xml が冗長になり、可読性が低下する（research.md に指摘あり）
  - Gradle と比較して、ビルドロジックの柔軟性が劣る。「規約に従う」ことが前提であり、規約外の要件に対応するコストが高い
- 根拠:
  - Maven はマルチモジュール構成のサポートが成熟しているが、カスタムビルドタスクの実装には Java プラグイン開発が必要であり、Gradle のようなスクリプト内での簡易実装はできない
  - XML ベースの設定は宣言的であり、複雑なビルドロジックを記述する際に表現力が限定的
  - research.md により、Maven の設定ファイルは大規模プロジェクトで冗長になる傾向があることが確認されている
- CSD依存:
  - S4（複雑なビルド要件が将来発生する可能性がある）が成立する場合、Maven の柔軟性不足が顕在化する。S4 が成立しない場合、Maven の標準的なアプローチで十分対応可能
  - D3（将来的なマルチモジュール化やカスタムビルドタスクの必要性）に依存する。複雑なビルド要件が発生しない場合、Maven の制約は問題にならない
