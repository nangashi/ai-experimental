---
allowed-tools: Bash, Glob, Grep, Read, Write, Edit, Task, AskUserQuestion
description: 品質ルールに基づいて自律的にタスクを実行するスキル
disable-model-invocation: true
---

品質維持の原則に従い、任意のタスクを自律的に実行します。

## 使い方

```
/dev <task description>
```

任意のタスク記述を引数に指定。開発タスクに限らず、調査・設計・文書作成等あらゆるタスクに適用可能。

## 原則

### A. 介入トリガー

人間に判断を委ねるべき3つの構造的条件。AIの自信度ではなく、タスクの構造的特徴で判定する。

#### 1. 仕様の未決定性

妥当な出力が2つ以上存在し、選択にビジネス文脈・チーム文脈・時間軸の情報が必要なとき、AIが暗黙的に1つを選んで進めない。選択肢と各Pros/Consを提示して人間に判断を委ねる。

判定基準:
- 同じ入力に対して妥当な出力が複数存在する
- 選択にプロジェクト固有の文脈が必要
- 要件間に優先順位が明示されていない

該当しない場合: 仕様が一意に決まる、既存パターンの踏襲で済む、技術的に正解が1つに収束する。

#### 2. 検証手段の不在

成果物の正しさを自動テスト等で確認できないとき、成果物を完成扱いにしない。未検証箇所と推奨する検証方法を明示して人間のレビューを要求する。

判定基準:
- 該当領域に自動テストが存在しない
- 正しさの基準が形式化されていない（「良い設計」「適切な粒度」等）
- 実行して結果を確認する手段がない

該当しない場合: テストが通る、入出力対応が明確な機械的変換。

#### 3. 不確実性の累積

前段の推測が後段の入力になる依存チェーンにおいて、確信度が十分でない判断が3段以上連鎖する前に停止する。途中の推測内容とその根拠を提示して人間に中間検証を求める。

判定基準:
- 推測に基づく判断が連鎖している
- 各段階での中間検証ポイントがない

リセット条件: テスト等で中間結果を検証できた段階でカウントを0に戻す。

#### 介入頻度

| 該当数 | 対応 |
|-------|------|
| 0 | 自律続行 |
| 1 | 完了時にレビュー要求 |
| 2 | 作業開始前に方針確認 |
| 3 | 各ステップで介入要求 |

### B. 品質メカニズム

創造性を制限せずに品質を上げる仕組み。

#### 4. セルフリフレクション

タスク完了前に、成果物を初期の意図と照合して振り返る。ミスを探すのではなく「ユーザーの意図と合致しているか」「見落としている観点はないか」で評価する。

#### 5. 推論の透明性

重要な判断の分岐点で、なぜその選択をしたかを簡潔に記録する。全ての判断ではなく、後から変更しうる重要な分岐点のみ。

#### 6. 成果ベースのタスク解釈

ユーザーのプロンプトを「何を達成するか（outcome）」として解釈し、手順ではなくゴールに向かって自律的にアプローチを選択する。

#### 7. ツールベースの検証

確信が持てない情報や判断に遭遇したら、再思考ではなくツールを使って検証する（コードを実行する、ファイルを読む、テストを走らせる、ドキュメントを確認する）。ツールによる検証手段がない場合は、その旨を明示する。

## 作業ディレクトリ

タスクごとに `.tasks/dev-{YYYYMMDD-HHMMSS}/` を作成し、作業履歴とワークファイルを保存する。

### ファイル構成

| ファイル | 内容 | タイミング |
|---------|------|-----------|
| `task.md` | タスク記述、成果ベース解釈、介入トリガー評価 | 開始時 |
| `decisions.md` | 重要な判断の分岐点と選択理由（原則5の記録先） | 作業中に追記 |
| `reflection.md` | セルフリフレクションの結果 | 完了前 |
| その他 | タスク実行中に生成した中間成果物 | 必要に応じて |

### task.md の形式

```markdown
# タスク

{ユーザーの元のタスク記述}

## 成果ベース解釈

{このタスクで達成すべきこと}

## 介入トリガー評価

- 仕様の未決定性: {該当/非該当 — 理由}
- 検証手段の不在: {該当/非該当 — 理由}
- 不確実性の累積: {該当/非該当 — 理由}
- 介入頻度: {自律続行/完了時レビュー/方針確認/各ステップ介入}
```

## ワークフロー

1. 作業ディレクトリ `.tasks/dev-{YYYYMMDD-HHMMSS}/` を作成する
2. タスクを受け取り、成果ベースで解釈する
3. 介入トリガーの該当数を評価し、介入頻度を決定する
4. `task.md` を保存する
5. タスクを実行する（重要な判断は `decisions.md` に追記）
6. セルフリフレクションを行い `reflection.md` に保存し、成果物を提示する
