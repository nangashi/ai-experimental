# 採点基準・比較レポートテンプレート

このファイルは、バリエーション実行結果の採点基準と比較レポートの構成テンプレートを定義する。

---

## 1. 採点マトリクス

### 1.1 検出判定基準

各問題に対する検出状況を以下の3段階で判定する:

| 記号 | 判定 | 基準 |
|-----|------|------|
| **○** | 検出 | 正解キーの「検出判定基準」を満たす指摘がある |
| **△** | 部分検出 | 関連するカテゴリの指摘はあるが、核心的な問題点を正確に捉えていない |
| **×** | 未検出 | 当該問題に関する指摘が全くない |

### 1.2 スコア換算

| 判定 | スコア |
|-----|-------|
| ○ | 1.0 |
| △ | 0.5 |
| × | 0.0 |

### 1.3 採点表テンプレート

```markdown
| # | カテゴリ | 深刻度 | A | B | C | D | E | F | G | H | I | J |
|---|---------|--------|---|---|---|---|---|---|---|---|---|---|
| 1 | (カテゴリ名): (問題名) | (深刻度) | | | | | | | | | | |
| 2 | ... | ... | | | | | | | | | | |
| ... | | | | | | | | | | | | |
| N | ... | ... | | | | | | | | | | |
| **合計** | | | /N | /N | /N | /N | /N | /N | /N | /N | /N | /N |
```

---

## 2. 定性指標

各バリエーションの出力を以下の3つの定性指標で評価する。各指標は5段階（1-5）で採点する。

### 2.1 具体性 (Specificity)

出力が具体的で、修正方法が明確に示されているか。

| スコア | 基準 |
|-------|------|
| 5 | 全ての指摘に具体的なコード例・修正案が含まれている |
| 4 | 大半の指摘に具体的な修正方法が示されている |
| 3 | 問題の特定は具体的だが、修正方法が一般的 |
| 2 | 問題の特定が曖昧で、修正方法も一般的 |
| 1 | 抽象的な指摘のみで、具体性がほとんどない |

### 2.2 説明の質 (Explanation Quality)

なぜ問題なのかの説明が十分で、説得力があるか。

| スコア | 基準 |
|-------|------|
| 5 | 根本原因、影響範囲、具体的なリスクシナリオまで説明されている |
| 4 | 問題の理由と影響が明確に説明されている |
| 3 | 問題の理由は説明されているが、影響の説明が不十分 |
| 2 | 問題の指摘はあるが、理由の説明が表面的 |
| 1 | 問題の列挙のみで、理由の説明がほとんどない |

### 2.3 構造性 (Structure)

出力が整理されており、読みやすく、情報を素早く把握できるか。

| スコア | 基準 |
|-------|------|
| 5 | 明確なカテゴリ分け、優先度付け、一貫したフォーマット |
| 4 | カテゴリ分けされており、フォーマットが概ね一貫している |
| 3 | 一定の構造はあるが、カテゴリ分けや優先度が不完全 |
| 2 | 構造が不十分で、情報の把握に時間がかかる |
| 1 | 構造化されておらず、読みにくい |

### 2.4 定性指標テンプレート

```markdown
| バリエーション | 具体性 | 説明の質 | 構造性 | 平均 |
|--------------|--------|---------|--------|------|
| A: ベースライン | /5 | /5 | /5 | |
| B: ミニマル | /5 | /5 | /5 | |
| C: 見出し削減 | /5 | /5 | /5 | |
| D: 見出し拡張 | /5 | /5 | /5 | |
| E: 骨格のみ | /5 | /5 | /5 | |
| F: 詳細記述 | /5 | /5 | /5 | |
| G: 出力形式簡略 | /5 | /5 | /5 | |
| H: 分析手順明示 | /5 | /5 | /5 | |
| I: 具体例付き | /5 | /5 | /5 | |
| J: 定量スコアリング | /5 | /5 | /5 | |
```

---

## 3. 誤検出 (False Positive) の記録

正解キーに存在しない問題を指摘した場合、誤検出として記録する。

```markdown
| バリエーション | 誤検出数 | 誤検出の内容（概要） |
|--------------|---------|-------------------|
| A | | |
| B | | |
| ... | | |
```

**注意**: 正解キーの「ボーナス問題」として記載されている項目は誤検出に含めない。

---

## 4. 比較レポート構成テンプレート

以下の構成で `comparison-report.md` を作成すること。

```markdown
# プロンプト構造バリエーション比較レポート

## 1. 実行条件

- **対象プロンプト**: (ファイルパス)
- **使用モデル**: (モデル名)
- **実行日時**: YYYY-MM-DD HH:MM
- **テスト入力**: (テスト入力の概要)
- **埋め込み問題数**: N問

## 2. 定量結果サマリ

### 2.1 検出率マトリクス

(採点表テンプレートに従った表)

### 2.2 定性指標サマリ

(定性指標テンプレートに従った表)

### 2.3 誤検出サマリ

(誤検出テンプレートに従った表)

### 2.4 総合ランキング

| 順位 | バリエーション | 検出スコア | 定性平均 | 誤検出数 |
|-----|--------------|-----------|---------|---------|
| 1 | | | | |
| ... | | | | |

## 3. 構造次元ごとの分析

### 3.1 見出し数の影響（C vs A vs D）

- **C → A（3→現状）**: (検出率・定性指標の変化と考察)
- **A → D（現状→8）**: (検出率・定性指標の変化と考察)
- **結論**: (見出し数の増減がどう影響するか)

### 3.2 サブ項目粒度の影響（E vs A vs F）

- **E → A（骨格→現状）**: (検出率・定性指標の変化と考察)
- **A → F（現状→詳細）**: (検出率・定性指標の変化と考察)
- **結論**: (サブ項目の粒度がどう影響するか)

### 3.3 出力形式の影響（G vs A vs J）

- **G → A（自由形式→現状）**: (検出率・定性指標の変化と考察)
- **A → J（現状→スコアリング）**: (検出率・定性指標の変化と考察)
- **結論**: (出力形式の指定がどう影響するか)

### 3.4 分析手順明示の影響（A vs H）

- **A → H（暗黙→明示）**: (検出率・定性指標の変化と考察)
- **結論**: (CoT指示がどう影響するか)

### 3.5 具体例の影響（A vs I）

- **A → I（なし→3例）**: (検出率・定性指標の変化と考察)
- **結論**: (Few-shot例がどう影響するか)

### 3.6 全体量の影響（B vs A vs F/D）

- **B → A（最小→現状）**: (検出率・定性指標の変化と考察)
- **A → F/D（現状→最大）**: (検出率・定性指標の変化と考察)
- **結論**: (プロンプトの総量がどう影響するか)

## 4. カテゴリ別検出傾向

| カテゴリ | 検出されやすいバリエーション | 検出されにくいバリエーション | 考察 |
|---------|------------------------|------------------------|------|
| セキュリティ | | | |
| パフォーマンス | | | |
| 設計原則 | | | |
| 保守性 | | | |
| 一貫性 | | | |
| エラーハンドリング | | | |

## 5. 深刻度別検出傾向

| 深刻度 | 平均検出率 | 最高バリエーション | 最低バリエーション | 考察 |
|-------|-----------|-----------------|-----------------|------|
| 重大 | | | | |
| 中 | | | | |
| 軽微 | | | | |

## 6. 総合考察

### 6.1 最も効果的だった構造変化
(検出率・定性指標の両面から最も効果的だった変化とその理由)

### 6.2 意外な発見
(仮説と異なる結果、予想外の傾向)

### 6.3 構造次元間の相互作用の示唆
(複数の次元を組み合わせた場合の仮説)

### 6.4 対象プロンプトへの改善提案
(評価結果に基づく、対象プロンプトの具体的な改善提案)

## 7. 今後の検討事項

- (追加で試すべきバリエーション)
- (評価方法の改善点)
- (複数回実行での再現性確認)
```
