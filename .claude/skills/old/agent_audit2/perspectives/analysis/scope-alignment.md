# 観点定義: スコープ整合性分析（Scope Alignment）

## 概要

エージェント定義のスコープ境界が明確かつ適切に定義されているかを評価する分析サブエージェント（analyze-scope）のテスト用観点。テストエージェント定義に埋め込む「スコープの品質問題」のカテゴリと例を定義する。

テスト対象: analyze-scope サブエージェントが、エージェント定義中のスコープ定義問題をどれだけ正確に検出できるか。

## 評価スコープ

analyze-scope サブエージェントが検出すべき問題:

- **スコープ定義の有無**: 「何を評価するか」の明示的な定義が欠落
- **スコープ外定義の有無**: 「何を評価しないか」の明示的な定義が欠落
- **境界の曖昧性**: 隣接ドメインとの境界が不明確で、レビュー結果にスコープドリフトが生じうる
- **隣接ドメインとの重複**: 他のレビュー観点と重複する評価項目
- **内部矛盾**: スコープに関する記述が定義内で矛盾
- **暗黙的仮定**: 明文化されていないスコープ仮定

## スコープ外

- 評価基準の品質問題 → criteria-effectiveness で扱う
- 盲点検出の問題 → blind-spots-detection で扱う
- ドメイン知識の不足 → domain-knowledge-adequacy で扱う
- スコープの「良し悪し」の判断（あくまで明確性・整合性を評価）

## ボーナス/ペナルティの判定指針

- **ボーナス対象**: 正解キーに含まれないが、スコープの明確性に関する有効な追加指摘
- **ペナルティ対象**: 基準内容への指摘（スコープではなく基準の品質問題）、ドメイン知識不足の指摘

## 問題バンク

| カテゴリ | 問題例 | 深刻度 |
|---------|--------|-------|
| スコープ定義欠落 | レビュー対象が「コード品質」としか記載されておらず、具体的に何を見るか定義がない | 重大 |
| 内部矛盾 | 概要で「セキュリティのみ」と限定しつつ、チェックリストにパフォーマンス項目が含まれる | 重大 |
| スコープ外の完全欠落 | 「スコープ外」セクションが存在せず、隣接ドメインとの境界が一切定義されていない | 重大 |
| 境界曖昧性 | 「エラーハンドリングの適切性」がセキュリティ・信頼性・構造品質のどのスコープかが不明 | 中 |
| 隣接ドメイン重複 | パフォーマンスレビューが「リソース効率」を評価し、信頼性レビューも「リソース枯渇」を評価（重複） | 中 |
| 暗黙的仮定 | 「既存のアーキテクチャに準拠していること」が前提だが、既存アーキテクチャの定義が不明 | 中 |
| スコープ過広 | 「設計のあらゆる品質側面を評価する」と記載（実質的に全てをカバーしようとして焦点が定まらない） | 中 |
| 境界ケース未対応 | API設計がセキュリティと一貫性の両方に関わるケースの判断指針が未記載 | 軽微 |
| 評価対象の曖昧性 | 「必要に応じてコード実装も確認する」（設計レビューのスコープを超える可能性） | 軽微 |
| 参照先の不整合 | スコープ外で「→ security で扱う」と記載するが、securityレビューが存在しない環境での扱い不明 | 軽微 |
