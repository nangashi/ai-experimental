# 観点定義: 基準有効性分析（Criteria Effectiveness）

## 概要

エージェント定義に含まれる評価基準・指示の有効性を評価する分析サブエージェント（analyze-criteria）のテスト用観点。テストエージェント定義に埋め込む「基準の品質問題」のカテゴリと例を定義する。

テスト対象: analyze-criteria サブエージェントが、エージェント定義中の基準品質問題をどれだけ正確に検出できるか。

## 評価スコープ

analyze-criteria サブエージェントが検出すべき問題:

- **指示の具体性**: 曖昧な表現（「適切に」「必要に応じて」「考慮する」）、矛盾する指示、定量的基準の欠如
- **S/N比**: 検出対象が稀すぎる基準（ノイズ源）、偽陽性を生みやすい基準、実用的でない基準
- **実行可能性**: ランタイム情報が必要な基準、コンテキストウィンドウを超える要求、機械的に検証不可能な基準
- **コスト効率性**: 大量のファイル走査を必要とする低価値基準、重複する基準間の非効率
- **カバレッジ**: 重要な検出領域の欠落、基準間のギャップ
- **冗長性**: 同じことを異なる表現で繰り返す基準、統合可能な重複基準

## スコープ外

- スコープ定義の問題 → scope-alignment で扱う
- 盲点検出の問題 → blind-spots-detection で扱う
- ドメイン知識の不足 → domain-knowledge-adequacy で扱う
- エージェント定義の構造・フォーマット問題（基準の内容に関する問題のみ対象）

## ボーナス/ペナルティの判定指針

- **ボーナス対象**: 正解キーに含まれないが、基準の品質に関する有効な追加指摘
- **ペナルティ対象**: スコープ外の指摘（構造問題、ドメイン知識不足）、基準内容ではなくフォーマットへの指摘

## 問題バンク

以下は埋め込み可能な問題のカテゴリと例。テストエージェント定義の文脈に合った具体的な問題を作成する。

| カテゴリ | 問題例 | 深刻度 |
|---------|--------|-------|
| 矛盾する指示 | 「全ての例外を個別にハンドリングすること」と「グローバルエラーハンドラに委譲すること」が同一定義内に共存 | 重大 |
| 実行不可能な基準 | 「実行時のメモリ使用量が適切であることを確認」（静的レビューでは検証不可能） | 重大 |
| 反生産的基準 | 「全てのコードパスで例外安全性を証明する」（過剰な偽陽性を生成し、有用な指摘を埋没させる） | 重大 |
| 曖昧な表現 | 「パフォーマンスに影響がないことを確認する」（何をもって影響なしとするか不明） | 中 |
| 低S/N基準 | 「デッドコードの存在を報告する」（レビュー対象が設計書の場合、該当場面が極めて稀） | 中 |
| 冗長な基準 | 「入力検証を行うこと」と「ユーザー入力のバリデーションを実施すること」が別基準として列挙 | 中 |
| コスト非効率 | 「全ファイルのインポート文を走査して未使用依存を検出」（コスト高・低価値） | 中 |
| 定量基準の欠如 | 「関数の複雑度が高すぎないことを確認」（閾値の定義なし） | 軽微 |
| カバレッジ欠落 | セキュリティレビューにおいてSQLインジェクションのチェック基準が存在しない | 軽微 |
| 順序非効率 | 詳細な実装チェックが概要レベルのアーキテクチャチェックより前に配置 | 軽微 |
