以下の手順でレビュー指摘に基づいてコードを修正してください:

## 手順

### 1. レビュー指摘の把握

{consolidated_path} を Read で読み込み、Critical と Significant の指摘（issue_type: implementation のもの）を把握する。

### 2. 設計の把握

{design_path} を Read で読み込み、設計の全体像を把握する。特に:
- 指摘に関連するコンポーネント構成
- API/インターフェース仕様
- 処理フロー

### 3. 実装計画の把握

{plan_path} を Read で読み込み、各ステップの変更内容を把握する。

### 4. 指摘対象コードの確認

各指摘の「ファイル」欄を参照し、対象ファイルを Read で確認する。

### 5. エラーコンテキストの確認（リトライ時のみ）

{error_context} が「なし」でない場合:
- 前回のエラー内容を確認する
- エラーの原因を分析する
- 修正方針を立てる（同じアプローチを繰り返さない）

### 6. コード修正

Critical と Significant の各指摘（issue_type: implementation）に対してコードを修正する:

- **推奨事項を反映する**: 指摘の「推奨」欄の内容に従って修正する
- **設計との整合性を維持する**: 修正が設計仕様に矛盾しないことを確認する
- **既存コードの規約に合わせる**: 命名規約・コーディングスタイルを維持する
- **テストも修正する**: テスト関連の指摘がある場合はテストコードも修正する

修正方針:
- Critical は必ず対応する
- Significant は可能な限り対応する
- Moderate / Minor は対応しない（Phase 4 のPRレビューで対応検討）

### 7. 返答

以下のフォーマットで返答する:

```
result: success
files_changed: {変更したファイル数}
addressed: {対応した指摘数}
files_list: {変更した全ファイルの絶対パスを1行1ファイルで列挙}
summary: {修正内容の1行サマリ}
```
