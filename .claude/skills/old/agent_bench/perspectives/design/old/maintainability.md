# 観点定義: 保守性（設計レビュー）

## 概要
設計書の長期的な保守性・変更容易性・拡張性をアーキテクチャ・設計レベルで評価する。変更影響範囲の限定、モジュール性・結合度、段階的実装可能性、テスタビリティ設計を重点的に評価する。

## 評価スコープ
- 変更容易性（モジュール分割と依存関係管理、拡張ポイントの明示、変更の局所化、ビジネスロジックと技術詳細の分離、想定される変更シナリオに対する影響範囲分析、設定管理・環境差分の設計）
- 結合度と凝集度（依存関係の数と方向、コンポーネント間インターフェースの設計、循環依存・双方向依存・未使用インポート、シングルトンやグローバル状態の使用箇所の妥当性、単一コンポーネントの責務の数）
- テスタビリティ設計（依存性注入設計、外部依存の抽象化、モックポイント、コンポーネント境界の明確性）
- API・データモデル設計品質（バージョニング戦略、後方互換性、破壊的変更リスク、拡張メカニズム、スキーマ進化戦略）
- 段階的実装可能性（機能の独立性、段階的リリース計画、MVP範囲、依存関係の実装順序、ロールバック戦略）

## スコープ外
- セキュリティ脆弱性（認証・認可設計、暗号化方針等）→ security で扱う
- パフォーマンスの問題（クエリ最適化、キャッシュ戦略等）→ performance で扱う
- API設計の統一性・コーディング規約 → consistency で扱う
- 設計原則の遵守（DRY、SOLID原則の抽象的評価）、テストケース設計やテスト戦略の網羅性、エラー分類・リカバリー戦略 → best-practices で扱う
- ドキュメンテーション、非同期処理の保守性（他観点との重複リスクが高いため）

## ボーナス/ペナルティの判定指針
- **ボーナス対象**: 循環依存の存在、YAGNI違反（現時点で不要な複雑な抽象化層）、ドメインロジックが外部実装詳細に直接依存、変更シナリオでの影響範囲が広範囲、エラーハンドリング戦略が未定義で例外処理の一貫性欠如、設定管理戦略が未定義で環境差分が暗黙的、ロールバック戦略の欠如
- **ペナルティ対象**: SQLインジェクション等のセキュリティ脆弱性、クエリ最適化等のパフォーマンス問題、コーディング規約違反
- **判断に迷うケース**: 既存コードとの不整合 → 保守コスト増大の文脈（将来的な変更時の混乱、認知負荷）であればスコープ内

## 問題バンク

以下は埋め込み可能な問題のカテゴリと例。実際の埋め込み時はこれらを参考にしつつ、テスト対象文書の文脈に合った具体的な問題を作成する。

| カテゴリ | 問題例 | 深刻度 |
|---------|--------|-------|
| 結合度 | コンポーネント間に循環依存が存在する設計 | 重大 |
| YAGNI | 現時点で不要な複雑な抽象化層を設計している | 重大 |
| 変更影響 | 1つの機能変更が多数のコンポーネントに波及する設計 | 重大 |
| 技術的負債 | 「暫定対応」の設計が恒久化するリスクが高い | 中 |
| 依存関係管理 | ドメインロジックが外部実装詳細（ORM、外部API）に直接依存 | 中 |
| エラーハンドリング | エラーハンドリング戦略が未定義で例外処理の一貫性が欠如 | 中 |
| 設定管理 | 設定管理戦略が未定義で環境差分が暗黙的 | 中 |
| API設計 | APIにバージョニング戦略がなく、破壊的変更リスクが高い | 中 |
| 段階的実装 | 基盤コンポーネント完成前にそれに依存するモジュールをMVPリリースする計画 | 中 |
| ロールバック | ロールバック戦略の欠如（データ移行を伴う変更での後方互換性なし） | 中 |
| テスタビリティ | 外部依存の抽象化が不十分でモック困難 | 軽微 |
| グローバル状態 | シングルトンやグローバル状態の過剰使用で単体テストが困難 | 軽微 |
