以下の手順で採点とエラー分析を実行してください:

## 採点

1. Read で以下を読み込む:
   - {scoring_rubric_path} （採点基準）
   - {answer_key_path} （正解キー）
   - {perspective_path} （観点定義）
   - {result_run1_path} （Run1結果）
   - {result_run2_path} （Run2結果）
   - {result_run3_path} （Run3結果）

2. 採点基準の検出判定基準に従い、各 Run の結果を問題ごとに ○/△/× で判定する。以下のアンカーサンプルを参照し、判定の一貫性を確保する:

   **○判定の例**: 正解キーが「認証エンドポイントへのレート制限欠如を指摘し、ブルートフォース攻撃防止の具体的な制限値の設定を推奨」を求めている場合、レビュー出力に「/api/auth/login にレート制限がなく、ブルートフォース攻撃に脆弱。IPあたり10回/分の制限を推奨」とあれば → **○**（核心的な問題点と具体的な対策の両方に言及）

   **△判定の例**: 同じ正解キーに対し、レビュー出力に「APIエンドポイント全体にレート制限を検討すべき」とあれば → **△**（関連カテゴリへの言及はあるが、認証エンドポイント固有の攻撃シナリオに触れていない）

   **×判定の例**: レビュー出力に認証エンドポイントのレート制限に関する記述が全くない → **×**

   **判定のポイント**: ○と△の分岐点は「正解キーで指定された核心的なポイントに触れているか」。一般的・抽象的な言及にとどまる場合は△、核心に到達している場合は○と判定する

3. 採点基準のスコア計算式に従い、各 Run のスコアを計算する:
   - run_score = Σ(検出スコア) + (ボーナス件数 × 0.5) - (ペナルティ件数 × 0.5)
   - mean = (run1_score + run2_score + run3_score) / 3
   - sd = stddev(run1_score, run2_score, run3_score)

## エラー分析（抽象的）

4. 採点結果から以下のエラー分析を生成する。**重要: 問題の具体的なタイトル（P01, P02等）や文書固有の内容は含めないこと。カテゴリレベルの抽象的な分析のみ行う。**

   a. **見逃し・部分検出のカテゴリ分析**: 正解キーのカテゴリごとに検出状況を集計する
      - 各カテゴリの問題数、完全検出(○)数、部分検出(△)数、未検出(×)数
      - 3回の Run で結果が異なる場合は安定性を記録する:
        - 高: 3回とも同じ判定
        - 中: 2回一致、1回異なる
        - 低: 3回とも異なる判定

   b. **プロンプトギャップの特定**: 未検出/部分検出のカテゴリについて、プロンプトのどの要素が不足しているかを分析する
      - 例: 「入力検証カテゴリで2問未検出 — プロンプトに入力境界の分析指示がない」
      - 例: 「データ保護カテゴリで1問部分検出 — 暗号化の深さは指摘するが鍵管理には言及しない」
      - **プロンプトの具体的なセクションや記述を参照して**ギャップを特定する

   c. **改善方向の提案**: 各プロンプトギャップに対する改善の方向性を記述する
      - 方向性のみ記述し、具体的なプロンプト修正案は含めない
      - 例: 「鍵管理・ローテーション・アクセス制御を含むデータ保護の分析深度を強化する方向」

   d. **保持すべき強み**: 完全検出(○)のカテゴリについて、プロンプトのどの要素が効果的かを分析する
      - 例: 「認証設計カテゴリの全問検出 — プロンプトのセッション管理チェックリストが有効」

## 保存

5. 採点詳細とエラー分析を Write で {scoring_save_path} に保存する。以下のフォーマット:

```markdown
# 採点結果: {prompt_name}

## スコアサマリ
Mean={X.X}, SD={X.X}
Run1={X.X}(検出{X.X}+bonus{N}-penalty{N}), Run2={X.X}(...), Run3={X.X}(...)

## 検出マトリクス
| ID | カテゴリ | 深刻度 | Run1 | Run2 | Run3 |
|----|---------|--------|------|------|------|
...

## ボーナス・ペナルティ詳細
### Run1
- Bonus: ...
- Penalty: ...
### Run2
...
### Run3
...

## エラー分析（抽象的）

### Missed/Partial by Category
| Category | Problems | ○ | △ | × | Stability | Prompt Gap |
|----------|----------|---|---|---|-----------|------------|
...

### Improvement Directions
- {カテゴリ}: {改善の方向性}
...

### Strengths to Preserve
- {カテゴリ}: {有効なプロンプト要素}
...
```

6. 以下のコンパクトなスコアサマリのみ返答する:

{prompt_name}: Mean={X.X}, SD={X.X}
Run1={X.X}(検出{X.X}+bonus{N}-penalty{N}), Run2={X.X}(...), Run3={X.X}(...)
Missed categories: {未検出カテゴリのカンマ区切りリスト}
Partial categories: {部分検出カテゴリのカンマ区切りリスト}
