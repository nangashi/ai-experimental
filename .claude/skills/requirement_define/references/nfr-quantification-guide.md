# NFR Quantification Guide

定性的な NFR 記述を定量的な測定可能基準に変換するためのリファレンス。

## 定量化の原則

1. **測定可能性**: 全ての NFR に具体的な数値または判定基準を設定する
2. **導出根拠の明記**: なぜその値にしたかを記録する（ステークホルダー合意、業界標準、ベンチマーク等）
3. **測定方法の明記**: どうやって測定するかを記録する
4. **制約との整合**: 制約（コスト、環境等）と矛盾しないことを確認する
5. **3値指定**: 可能な場合、ベースライン（現状）/ ターゲット（目標）/ 制約（許容下限）の3値で定義する

## 観点別の定量化パターン

### パフォーマンス

| 定性表現 | 定量化の方向性 | 導出ヒント |
|---------|-------------|-----------|
| 「遅すぎない」 | 応答時間の上限（秒） | Nielsen の応答時間閾値: 0.1秒=瞬時、1秒=思考の中断なし、10秒=注意力の限界 |
| 「素早く」 | 操作完了時間の上限 | 競合サービスのベンチマーク、ユーザーの利用場面から導出 |
| 「大量データ対応」 | 同時処理件数/データ量の下限 | 想定利用規模の3-5倍を目安に設定 |
| 「リアルタイム」 | 遅延時間の上限 | 用途に応じた遅延許容値を定義（操作応答 vs データ同期） |

### セキュリティ

| 定性表現 | 定量化の方向性 | 導出ヒント |
|---------|-------------|-----------|
| 「安全な」 | 保護対象データの分類と保護レベル | データ分類（公開/内部/機密）→ 分類ごとの保護要件 |
| 「必要最低限」 | 認証・認可の具体的要件 | アクター一覧 × 機能一覧のアクセス権限マトリクスから導出 |
| 「認証情報の安全な管理」 | 認証情報の保存・伝送方式の要件 | OWASP ガイドラインに基づく最低基準 |

### 可用性

| 定性表現 | 定量化の方向性 | 導出ヒント |
|---------|-------------|-----------|
| 「常時使える」 | 稼働率（%）、計画停止条件 | サービスレベルから算出。99.9% = 月間約43分停止 |
| 「停止は許容」 | 許容停止時間、復旧時間目標（RTO） | ステークホルダーの許容度。「数時間」→ 具体的な時間数 |
| 「データが消えない」 | RPO（復旧ポイント目標）、バックアップ頻度 | データの再作成コストから導出 |

### コスト

| 定性表現 | 定量化の方向性 | 導出ヒント |
|---------|-------------|-----------|
| 「無償」 | 月額上限（0円）、利用可能な既存契約の列挙 | 制約テーブルの内容をそのまま要求化 |
| 「低コスト」 | 月額上限の具体値 | ステークホルダーへの確認。代替案の費用との比較 |
| 「既存契約を活用」 | 利用可能なサービス・API の列挙と利用上限 | 制約テーブルから導出 |

### 運用負荷

| 定性表現 | 定量化の方向性 | 導出ヒント |
|---------|-------------|-----------|
| 「手間を最小限」 | 運用作業の頻度と所要時間の上限 | 運用者のスキルと可用時間から導出 |
| 「自動化」 | 自動化対象の操作リストと手動残存操作 | 運用シナリオの洗い出し → 自動/手動の仕分け |
| 「誰でも運用」 | 前提知識・スキルの要件定義 | 運用者のペルソナから導出 |

### ユーザビリティ

| 定性表現 | 定量化の方向性 | 導出ヒント |
|---------|-------------|-----------|
| 「使いやすい」 | 特定タスクの操作ステップ数上限 | 主要ユースケースごとにステップ数を定義 |
| 「直感的」 | 初回利用時のタスク完了率 | ユーザーテストで測定可能な基準 |
| 「誤操作しにくい」 | 破壊的操作の確認ステップ要否 | 取り消し不能な操作の列挙 → 確認要件 |

## 定量化できない場合の対処

NFR の定量化にユーザーの判断が必要な場合、松竹梅方式で候補を提示する:

```
{観点}について、以下のどのレベルを目標としますか？

- A（松）: {高い基準}（{トレードオフ: コスト・複雑性の増加}）
- B（竹）: {標準的な基準}（{トレードオフ: バランス型}）
- C（梅）: {控えめな基準}（{トレードオフ: 実装容易だが制約あり}）
```

各候補には以下を含める:
- 具体的な数値または基準
- その値の導出根拠
- トレードオフ（何を得て何を失うか）

## FURPS+ カテゴリの網羅チェック

入力ドキュメントの NFR を以下のカテゴリでチェックし、明示的に扱われていないカテゴリを検出する:

| カテゴリ | 対応する NFR 観点 |
|---------|-----------------|
| Functionality（機能性） | セキュリティ、監査、ライセンス |
| Usability（ユーザビリティ） | タスク効率、エラー防止、アクセシビリティ |
| Reliability（信頼性） | 可用性、MTBF/MTTR、データ整合性 |
| Performance（性能） | 応答時間、スループット、リソース消費 |
| Supportability（保守性） | インストール性、保守性、アップグレード性 |
| +Constraints | 設計制約、実装制約、インターフェース制約 |

扱われていないカテゴリについて:
- 対応が必要な場合: NFR 追加を提案する
- 対応不要な場合: 「該当なし」と判断理由を記録する
