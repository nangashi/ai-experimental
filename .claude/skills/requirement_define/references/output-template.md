# Output Template

Phase 7 で要件定義書を生成する際に参照するテンプレート。
Phase 2〜6 で確定した情報と入力ユーザー要求書の内容を統合して `docs/project-definition/requirements.md` を生成する。

## テンプレート

```markdown
# {タイトル}: 要件定義書

## ステータス

{Draft | Confirmed}

## 日付

{YYYY-MM-DD}

## 1. 問題定義

### 1.1 何が問題か

{パススルー: 入力文書の「問題定義 > 何が問題か」}

### 1.2 なぜ今解決が必要か

{パススルー: 入力文書の「問題定義 > なぜ今解決が必要か」}

### 1.3 期待するゴール状態

{パススルー: 入力文書の「問題定義 > 期待するゴール状態」}

## 2. 背景

### 2.1 現状のプロセス

{パススルー: 入力文書の「背景 > 現状のプロセス」}

### 2.2 過去の試行

{パススルー: 入力文書の「背景 > 過去の試行」}

### 2.3 ステークホルダー

{パススルー: 入力文書の「背景 > ステークホルダー」テーブル}

## 3. アプローチ選定

### 3.1 検討した代替案

{パススルー: 入力文書の「アプローチ選定 > 検討した代替案」テーブル}

### 3.2 選定結果

{パススルー: 入力文書の「アプローチ選定 > 選定結果」}

## 4. 制約

{抽出: 入力文書の「背景 > 制約」テーブルを独立セクションとして配置}

| 種別 | 内容 | 根拠 |
|------|------|------|
| {種別} | {内容} | {根拠} |

## 5. スコープ

### 5.1 Must（必須）

{パススルー: 入力文書の「スコープ > Must」}

### 5.2 Nice-to-have（あれば良い）

{パススルー: 入力文書の「スコープ > Nice-to-have」}

### 5.3 スコープ外（明示的除外）

{パススルー: 入力文書の「スコープ > スコープ外」}

## 6. ユースケース

### 6.1 ユーザー種別

{パススルー: 入力文書の「ユースケース > ユーザー種別」テーブル}

### 6.2 シナリオ一覧

{パススルー: 入力文書の「ユースケース > シナリオ一覧」テーブル}

## 7. システム境界

### 7.1 システム概要

{導出: Phase 2 のシステム概要}

### 7.2 アクター一覧

| ID | アクター | 種別 | 概要 |
|----|---------|------|------|
| ACT-1 | {アクター名} | 人間/外部システム | {役割} |

### 7.3 外部インターフェース

| ID | インターフェース | 接続先 | 方向 | 概要 |
|----|-----------------|--------|------|------|
| IF-1 | {インターフェース名} | {接続先} | 入力/出力/双方向 | {概要} |

### 7.4 スコープ

**内部（システムが担う範囲）:**
- {項目}

**外部（システムが担わない範囲）:**
- {項目}

## 8. 機能要件

| SR-ID | 要件 | EARS型 | トレース元 |
|-------|------|--------|-----------|
| SR-001 | {EARS記法の要件文} | {型} | {UC-N または —} |

## 9. 非機能要件

| NFR-ID | 観点 | 要件 | 測定基準 | 測定方法 | 導出根拠 |
|--------|------|------|---------|---------|---------|
| NFR-001 | {観点} | {定量的な要件} | {具体的基準} | {方法} | {根拠} |

## 10. インターフェース要件

| IR-ID | インターフェース | 要件 | トレース元 |
|-------|-----------------|------|-----------|
| IR-001 | {IF-ID}: {名前} | {要件} | {IF-ID}, {UC-ID} |

## 11. 成功基準・リスク

### 11.1 完了条件

{パススルー: 入力文書の「成功基準 > 完了条件」}

### 11.2 リスク

{パススルー: 入力文書の「成功基準 > リスク」テーブル}

## 12. 未解決事項

{統合: 入力文書の「未解決事項」+ Phase 1 の保留ギャップ + Phase 2-6 で新たに発見された未確定事項}

- [ ] {項目}

## 付録

### A. 用語集

| 用語 | 定義 |
|------|------|
| {用語} | {定義} |
```

## 記入ガイダンス

- **パススルーセクション（1-6, 11）**: 入力文書から構造のみテンプレートに合わせてコピーする。内容は変更しない
- **導出セクション（7-10）**: テーブルヘッダーは「要件」を使用する（「要求」ではない）
- **制約セクション（4）**: 入力文書の「背景 > 制約」サブセクションを独立セクションとして抽出する。内容は変更しない。見出しを H2 に昇格する
- **スコープセクション（5）**: 入力文書の「スコープ > 非機能要求」と「スコープ > MVP」は含めない。非機能要求は Section 9 として導出済み、MVP は Must と実質重複のため
- **機能要件（8）**: Must UC 由来の SR のみ記載する。全て EARS 記法で記述し、曖昧な動詞（サポート、管理、処理）を使わない。UC に紐づかない要件のトレース元は「—」とする
- **非機能要件（9）**: 必ず測定基準と測定方法を含める。「速い」「安全」等の定性表現は不可
- **トレーサビリティ**: SR のトレース元列で UC との対応を管理する。トレース元が「—」の SR は導出根拠を要件文内で明確にすること
- **未解決事項（12）**: 入力文書の未解決事項 + Phase 1 で保留されたギャップ + Phase 2-6 で新たに発見された未確定事項を統合した1つのリストにする
- **SR-ID**: 連番で付与する識別子。テーブル内の並び順はトレース元の UC 順。ID の欠番や順序の乱れは許容する
- **用語集**: パススルーセクションと導出セクションの両方から専門用語を抽出して定義する
