# EARS Notation Guide

UC → SR 分解時に参照する EARS（Easy Approach to Requirements Syntax）記法のリファレンス。

## EARS記法の5パターン

### Ubiquitous（常時）

- **パターン**: The system shall {action}.
- **使い方**: 条件なしで常に成立する要求。データ制約、不変条件
- **導出元**: UC の基本フロー中の無条件動作
- **例**: 「システムは全ての保存データに保存日時を記録すること」

### Event-Driven（イベント駆動）

- **パターン**: When {trigger event}, the system shall {action}.
- **使い方**: 特定のトリガーで発動する要求
- **導出元**: UC のアクターアクション、外部イベント
- **例**: 「ユーザーが URL を入力して保存を実行したとき、システムは記事のメタデータを取得して保存すること」

### State-Driven（状態駆動）

- **パターン**: While {system state}, the system shall {action}.
- **使い方**: 特定の状態にある間の振る舞い
- **導出元**: UC の前提条件、継続的な状態
- **例**: 「未読記事が存在する間、システムは未読件数を表示すること」

### Unwanted Behaviour（異常系）

- **パターン**: If {unwanted condition}, then the system shall {action}.
- **使い方**: エラー、障害、異常入力への対応
- **導出元**: UC の異常系シナリオ、エッジケース
- **例**: 「URL 形式が不正な場合、システムはエラーメッセージを表示し保存を中止すること」

### Optional Feature（オプション）

- **パターン**: Where {feature is included}, the system shall {action}.
- **使い方**: スコープの Nice-to-have に対応する要求
- **導出元**: UC の Nice 優先度シナリオ
- **例**: 「タグ機能が有効な場合、システムは記事に自動タグを付与すること」

## UC → SR 分解の手順

1. **UC の概要文を分析する**: UC が記述するアクターの目標と主要動作を特定する
2. **適切な EARS パターンを選択する**: 主要動作の性質に応じてパターンを決める
   - 無条件の基本動作 → Ubiquitous
   - アクターの操作やイベントへの応答 → Event-Driven
   - 状態依存の振る舞い → State-Driven
   - エラー・異常ケース → Unwanted Behaviour
   - オプション機能 → Optional Feature
3. **トリガー・状態・条件を UC のコンテキストから特定する**: EARS パターンの括弧内を埋める
4. **1つの UC から複数の SR を導出する**: 基本フロー + エラーパス + 前提条件でそれぞれ SR が必要
5. **各 SR に一意の ID を付与し、トレース元 UC を記録する**: SR-001, SR-002, ... の連番

## 分解の観点チェックリスト

各 UC について以下の観点を確認し、該当する SR を導出する:

- [ ] 主要動作（基本フロー）: この UC の正常系で何が起きるか
- [ ] エラーパス: 何が失敗しうるか、失敗時にシステムはどう振る舞うか
- [ ] 前提条件違反: ユーザーが想定外の状態で操作した場合どうなるか
- [ ] セキュリティ: この UC はデータ露出や不正利用のリスクがあるか
- [ ] 同時アクセス: 複数ユーザー/デバイスが同時に操作した場合どうなるか
- [ ] データの境界値: 入力データが空・上限・不正形式の場合どうなるか

## 禁止表現リスト

以下の表現は EARS 文中で使用してはならない。具体的な表現に置換する:

| 禁止表現 | 問題 | 置換方針 |
|---------|------|---------|
| 「速い」「遅くない」 | 測定不能 | 具体的な時間（秒）・回数に置換 |
| 「簡単な」「使いやすい」 | 測定不能 | 操作ステップ数・エラー率に置換 |
| 「サポートする」 | 曖昧 | 具体的な動作（表示、保存、変換等）に置換 |
| 「適切な」「十分な」 | 曖昧 | 具体的な基準値に置換 |
| 「一般的な」 | 曖昧 | 具体的な条件に置換 |
| 「柔軟な」 | 曖昧 | 具体的な拡張ポイントの記述に置換 |
| 「管理する」 | 曖昧 | CRUD の具体的操作に分解 |
| 「処理する」 | 曖昧 | 入力→変換→出力の具体的記述に置換 |
| 「安全な」 | 曖昧 | 具体的な保護対象と保護レベルに置換 |
| 「効率的な」 | 測定不能 | 具体的なリソース使用量・時間に置換 |
