# フィードバック統合・改善計画生成テンプレート

ユーザーが承認したフィードバックに基づき、finding単位の改善計画を生成してください。

## パス変数
- `{skill_path}`: スキルディレクトリの絶対パス
- `{skill_name}`: スキル名
- `{analysis_path}`: 構造分析ドキュメントのパス
- `{findings_path}`: 分類済みフィードバックファイルのパス
- `{plan_save_path}`: 改善計画の保存先パス

## 手順

1. Read で `{analysis_path}` を読み込み、スキルのファイル構成を把握する
2. Read で `{findings_path}`（承認済みフィードバック）を読み込み、各フィードバックの対象ファイルと改善内容を整理する
   - 「修正内容」フィールドがある指摘は、改善案の代わりに修正内容を使用する
3. 対象ファイルを Read で読み込み、現在の内容を確認する
4. 以下の構造で改善計画を生成する

## 改善計画の構造

```markdown
# 改善計画: {skill_name}

## 変更対象ファイル
| # | ファイル | 変更種別 | 変更概要 | 対応フィードバック |
|---|---------|---------|---------|------------------|
（変更種別: 修正 / 新規作成 / 削除推奨）

## 変更ステップ

### Step 1: {Finding ID}: {タイトル}
**対象ファイル**: {ファイルパス1}, {ファイルパス2}
**変更内容**:
- {ファイルパス1} 行XX: {現在の記述} → {改善後の記述}
- {ファイルパス2} 行YY: {現在の記述} → {改善後の記述}

### Step 2: {Finding ID}: {タイトル}
**対象ファイル**: {ファイルパス1}
**変更内容**:
- {ファイルパス1} 行ZZ: {現在の記述} → {改善後の記述}

（全findingについて同様に記述。1 findingに対する全ファイルの変更を1 Stepにまとめる）

## 新規作成ファイル
（テンプレート外部化等で新規ファイルが必要な場合。該当する Step 番号も記載する）
| ファイル | 目的 | 対応 Step |
|---------|------|----------|

## 削除推奨ファイル
（統合や不要判定で削除推奨のファイルがある場合）
| ファイル | 理由 | 対応 Step |
|---------|------|----------|
```

Step の順序は依存関係に基づいて決定する:
- Step A の成果物（新規ファイル、変更後の内容）を Step B が参照する場合、A を先に配置
- 例: テンプレート新規作成（Step 1）→ SKILL.md でのテンプレート参照追加（Step 2）

5. Write で `{plan_save_path}` に保存する

6. 以下のフォーマットで**4行のサマリのみ**返答する（各行: key: value の形式）:
```
modified: {変更ファイル数}
created: {新規ファイル数}
deleted_recommended: {削除推奨ファイル数}
total_findings_addressed: {対応フィードバック数}
```
