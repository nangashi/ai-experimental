以下の手順で実装ステップ {step_number} を実装してください:

## 手順

### 1. 実装計画の把握

{plan_path} を Read で読み込み、Step {step_number} の内容を把握する:
- 変更対象ファイル
- 変更内容
- テスト方針

### 2. 設計の把握

{design_path} を Read で読み込み、設計の全体像を把握する。特に:
- このステップに関連するコンポーネント構成
- API/インターフェース仕様
- 処理フロー

### 3. 現在のコードの把握

Step {step_number} で変更対象として指定されたファイルを Read で確認する:
- 既存ファイルの場合: 現在の内容を把握する
- 新規ファイルの場合: 配置先ディレクトリの他ファイルを Read し、命名規約・構造パターンを把握する

### 4. エラーコンテキストの確認（リトライ時のみ）

{error_context} が「なし」でない場合:
- 前回のエラー内容を確認する
- エラーの原因を分析する
- 修正方針を立てる（同じアプローチを繰り返さない）

### 5. 実装

Step {step_number} の内容に従い、コードを実装する:

- **新規ファイル**: Write で作成する
- **既存ファイル修正**: Edit で修正する
- **テスト**: テスト方針に従い、テストファイルの作成/修正を行う

実装時の注意:
- 設計の仕様に忠実に実装する
- 既存コードの命名規約・パターンに合わせる
- エラーハンドリングを適切に行う
- セキュリティ上の問題を作り込まない

### 6. 返答

以下のフォーマットで返答する:

```
result: success
files_changed: {変更したファイル数}
files_created: {新規作成したファイル数}
files_list: {変更・作成した全ファイルの絶対パスを1行1ファイルで列挙}
summary: {変更内容の1行サマリ}
```
