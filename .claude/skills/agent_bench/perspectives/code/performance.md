# 観点定義: パフォーマンス（実装レビュー）

## 概要
ソースコードを評価し、パフォーマンス上のボトルネックや非効率な実装を特定する。

## 評価スコープ
- クエリ効率（N+1問題、不要なJOIN、インデックス未使用、全件取得）
- ループ・アルゴリズム効率（O(n²)ループ、不要な再計算、非効率なデータ構造使用）
- I/O・ネットワーク効率（同期ブロッキング、不要なAPI呼び出し、バッチ未使用）
- メモリ管理（メモリリーク、不要なオブジェクト生成、大量データの一括ロード）
- キャッシュ・最適化（キャッシュ未活用、不要な再フェッチ、遅延読み込み未使用）

## スコープ外
- セキュリティ脆弱性 → security-code で扱う
- コードの可読性・命名規則 → consistency-code で扱う
- 設計レベルのアーキテクチャ問題 → performance-design で扱う

## ボーナス/ペナルティの判定指針
- **ボーナス対象**: 正解キーにないが実測で影響が大きいパフォーマンス問題の検出
- **ペナルティ対象**: セキュリティやスタイルの指摘
- **判断に迷うケース**: 可読性とパフォーマンスのトレードオフの指摘 → パフォーマンスへの影響が具体的ならスコープ内

## 問題バンク

以下は埋め込み可能な問題のカテゴリと例。実際の埋め込み時はこれらを参考にしつつ、テスト対象文書の文脈に合った具体的な問題を作成する。

| カテゴリ | 問題例 | 深刻度 |
|---------|--------|-------|
| N+1 | ループ内でのDBクエリ実行 | 重大 |
| アルゴリズム | O(n²)のネストループ（O(n)で可能） | 重大 |
| メモリ | 大量データの一括メモリロード | 重大 |
| 不要処理 | ループ内での不要なオブジェクト生成 | 中 |
| キャッシュ | 同一リクエスト内での同じクエリの重複実行 | 中 |
| 同期 | 独立した外部API呼び出しの逐次実行 | 中 |
| インデックス | WHERE句のカラムにインデックスヒントなし | 軽微 |
| 遅延読み込み | 不要な関連データのEager Loading | 軽微 |
