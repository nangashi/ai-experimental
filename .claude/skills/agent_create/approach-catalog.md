# Improvement Approach Catalog

汎用エージェント定義ファイルの改善アプローチカタログ。
カテゴリ → テクニック → バリエーション の3階層で管理する。

## ID 命名規則

- カテゴリ: 大文字1文字 (S, C, N, M)
- テクニック: カテゴリ文字 + 番号 (S1, C2, ...)
- バリエーション: テクニック + 小文字 (S1a, S1b, ...)

## 共通ルール

全アプローチ適用時の制約:

- YAML frontmatter、ロール定義、ドメイン固有用語、核心的な目的は保持する
- 元プロンプトの言語を維持する（言語変更は N2 で明示的に行う）
- 改善の目的はモデルの自律的分析・実行能力を引き出すこと

## 推奨プロンプト構成

```
[YAML frontmatter]
[ロール定義（簡潔に）]
[実行優先順位]
[実行基準 / 評価項目（テーブル/マトリクス構造 — S3/S5）]
  └ 明示的タスク指示を含む（S5）
[出力フォーマット（セクション名のみ — S3）]
[出力例 — Few-shot × 0-2個（S1）]
[行動姿勢（3-4項目）]
```

---

## Category: Structural (S) — プロンプト構造の変更

### S1: Few-shot Examples ⚠条件付

具体的な出力例がないプロンプトに適用。0-2個の入出力例を追加する。

**注意**: 4例以上は実証済みの逆効果（-0.5〜-3.75pt）。2例以下に留めること。

**実装指針**:
- 各例: 入力状況 → 実行/判断 → 出力例 → 根拠
- リアルで具体的、例同士で重複しない
- 出力フォーマットセクションの直後に配置

**バリエーション**:
- **S1a**: 基本 — 異なる難易度/種類の入出力例を1-2個追加
- **S1b**: ドメイン特化 — 対象エージェントの典型的タスクに特化した例
- **S1c**: 敵対的 — 判断が難しいエッジケースの処理例
- **S1d**: 否定例 — やるべきでないこと(失敗例)の明示

### S2: Success Criteria

定量的/定性的な成功基準がないプロンプトに適用。品質基準を追加する。

**実装指針**:
- エージェントの主要タスクから品質次元を特定
- 各次元に対する基準を明記

**バリエーション**:
- **S2a**: 基本品質基準 — 出力品質の5段階または3段階基準
- **S2b**: チェックリスト型 — 出力に含めるべき要素の明示的リスト
- **S2c**: 比較基準 — 良い出力と悪い出力の特徴リスト

### S3: Output Format ✓実証済

詳細な出力テンプレートを簡素化する。

**効果実績**: +0.75pt (security Round 1)

**実装指針**:
- 詳細テンプレートを削除
- セクション名 + 括弧書き1行説明のみ
- 全体指示は維持

**バリエーション**:
- **S3a**: セクション名のみ（テンプレート削除）
- **S3b**: 最小自由記述（セクション構造なし）
- **S3c**: テーブル中心（表形式で統一）

### S4: Sub-item Reduction ✓実証済

項目ごとに2行以上の説明がある場合に適用。

**効果実績**: +4.25pt（圧縮時、ただし過度な削減は-1.0pt）

**バリエーション**:
- **S4a**: 1行要約化 — 各項目の説明を核心1行に削減
- **S4b**: 階層簡略化 — 見出し維持+内容フラット化

### S5: Explicit Task Instructions ✓実証済

タスク実行の明示的指示がないプロンプトに適用。

**効果実績**: +0.75〜+2.5pt

**バリエーション**:
- **S5a**: タスクチェックリスト — 実行すべきことのリスト
- **S5b**: アンチパターンリスト — 避けるべきことのリスト
- **S5c**: 欠落検出 — 「存在すべきだが欠けているもの」の確認指示

---

## Category: Cognitive (C) — 推論方法の変更

### C1: Chain-of-Thought ⚠条件付

**注意**: 創造的タスクでは-4.5ptの逆効果（structural-quality Round 4）。論理推論タスクに限定。

- **C1a**: 基本段階的分析 — 「まず〜、次に〜」の手順指示
- **C1b**: 自問フレームワーク — 各ステップで自問リスト付与
- **C1c**: マルチパス — 1回目:全体把握、2回目:詳細分析

### C2: Role Framing ⚠条件付

**注意**: 敵対的ロールは-2.0ptの逆効果。専門家ロールは効果的。

- **C2a**: 専門家ペルソナ — 分野の権威としてのロール設定
- **C2b**: メンター視点 — 教育的観点で丁寧に分析
- **C2c**: 二重役割 — 分析者+検証者の両面

### C3: Priority Ordering

- **C3a**: 重要度優先 — 重要な要素から処理する指示
- **C3b**: リスクベース — 発生確率×影響度で順序付け
- **C3c**: カテゴリ→重要度 — カテゴリ別にグループ化してから重要度順

### C4: Self-Verification

- **C4a**: 完了チェック — 「出力前に以下を確認せよ」のリスト
- **C4b**: 反証思考 — 「自分の結論に対する反論を考えよ」
- **C4c**: 品質ゲート — 各セクション完了時の品質確認ステップ

---

## Category: Content (N) — ドメイン知識・内容の変更

### N1: Knowledge Enrichment ✓実証済

**効果実績**: NFRチェックリスト+3.0pt、データライフサイクル+2.25pt（3-4領域まで有効）

- **N1a**: 業界標準ベース — 該当分野の標準知識を追加
- **N1b**: アンチパターン集 — 典型的な失敗パターンリスト
- **N1c**: 隣接領域の知識 — 関連分野からの知見を追加

### N2: Prompt Language ✓実証済

**効果実績**: 英語化で+1.5〜+2.75pt、SD=0.0

- **N2a**: 全文英語 — プロンプト全体を英語に変換
- **N2b**: 混合言語 — 技術用語は英語、説明は日本語
- **N2c**: 全文日本語 — 対照群

### N3: Prompt Length

- **N3a**: 最小化 — 全体を50%程度に圧縮
- **N3b**: 拡張 — 判断基準や理由を50%程度増量
- **N3c**: 選択的最適化 — 低価値セクションのみ削除

### N4: Constraint Specification

- **N4a**: 明示的制約 — 出力の長さ・形式・スコープの明示
- **N4b**: ネガティブ制約 — 「〜してはいけない」の明示
- **N4c**: スコープ限定 — 「〜のみに集中せよ」の明示

---

## Category: Meta (M) — プロンプト構成方法の変更

### M1: Task Decomposition

- **M1a**: 事前分析+本実行 — 「まず理解し、次に実行せよ」の2段階
- **M1b**: 実行と出力の分離 — 分析フェーズと出力整形フェーズを分離

### M2: Constraint Manipulation ⚠注意

**注意**: 最低件数制約（M2a）は効果的だが、制約緩和（M2b）は不安定化リスク。

- **M2a**: 最低出力要件 — 「最低N項目を含めること」
- **M2b**: 制約緩和 — 不要な制約の削除（自由度向上）
- **M2c**: 確信度注釈 — 各出力に確信度(高/中/低)を付与させる

### M3: Context Window Management

- **M3a**: 重要情報の先頭配置 — プロンプトの冒頭に最重要指示
- **M3b**: 繰り返し強調 — 重要指示を冒頭と末尾の両方に配置
- **M3c**: 階層的情報配置 — 概要→詳細→補足の順序で構成

---

## クロスリファレンス

エージェント横断の検証結果は `proven-techniques.md` に自動集約されます。
個別エージェントの詳細は `prompt-improve/{agent_name}/knowledge.md` を参照してください。
