# Scoring Rubric

`agent_create` スキルにおけるエージェント出力の採点基準。

---

## 1. 基準別判定

各テストシナリオのルーブリック基準に対し、以下の3段階で判定する:

| スコア | 判定 | 基準 |
|-------|------|------|
| **2** | 完全達成 | ルーブリックの「Full」条件を **すべて** 満たす |
| **1** | 部分達成 | 関連する内容に触れているが、核心的な条件を完全には満たしていない |
| **0** | 未達成 | 当該基準に関する内容が出力に全くない |

---

## 2. スコア計算式

```
criterion_score = judge_rating (0/1/2) × weight
scenario_score = Σ(criterion_scores) / max_possible_score × 10  (0-10 に正規化)
run_score = mean(全 scenario_scores)
variant_mean = mean(run1_score, run2_score)
variant_sd = stddev(run1_score, run2_score)
```

- `max_possible_score` = Σ(2 × weight) for all criteria in a scenario
- `run_score` は全シナリオの平均（0-10スケール）

---

## 3. 安定性閾値

| 標準偏差 (SD) | 判定 | 意味 |
|--------------|------|------|
| SD ≤ 0.5 | 高安定 | 結果が信頼できる |
| 0.5 < SD ≤ 1.0 | 中安定 | 傾向は信頼できるが、個別の実行で変動がある |
| SD > 1.0 | 低安定 | 結果にばらつきが大きく、追加実行で確認が必要 |

---

## 4. 推奨判定基準

全採点完了後、バリアントの平均スコアとベースラインの平均スコアの差に基づき推奨プロンプトを判定する:

| 条件 | 判定 |
|------|------|
| 平均スコア差 > 1.0pt | スコアが高い方を **推奨** |
| 平均スコア差 0.5〜1.0pt | 標準偏差が小さい方を **推奨**（安定性重視） |
| 平均スコア差 < 0.5pt | **ベースラインを推奨**（ノイズによる誤判定を回避） |

- 「平均スコア差」= バリアントの平均スコア - ベースラインの平均スコア
- 複数バリアントがベースラインを上回る場合は、最も平均スコアが高いバリアントを推奨

### 収束判定

| 条件 | 判定 |
|------|------|
| 2ラウンド連続で改善幅 < 0.5pt | 「最適化が収束した可能性あり」 |
| それ以外 | 「継続推奨」 |
