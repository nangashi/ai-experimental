# 採点結果: v001-baseline

## スコアサマリ
Mean=11.7, SD=0.5
Run1=11.5(検出11.5+bonus0-penalty0), Run2=12.5(検出12.5+bonus0-penalty0), Run3=11.0(検出11.0+bonus0-penalty0)

## 検出マトリクス
| ID | カテゴリ | 深刻度 | Run1 | Run2 | Run3 |
|----|---------|--------|------|------|------|
| P01 | 認証・認可設計 | 重大 | ○ | ○ | ○ |
| P02 | 入力検証・攻撃防御 | 中 | ○ | △ | ○ |
| P03 | 入力検証・攻撃防御 | 中 | △ | ○ | △ |
| P04 | 入力検証・攻撃防御 | 中 | △ | △ | × |
| P05 | 脅威モデリング（Information Disclosure） | 中 | ○ | ○ | ○ |
| P06 | データ保護 | 重大 | ○ | ○ | ○ |
| P07 | データ保護 | 中 | × | × | × |
| P08 | データ保護 | 軽微 | × | × | × |
| P09 | データ保護 | 重大 | ○ | ○ | ○ |
| P10 | 脅威モデリング（Repudiation）、インフラ・依存関係・監査 | 中 | △ | ○ | △ |
| P11 | 認証・認可設計 | 重大 | ○ | ○ | ○ |
| P12 | インフラ・依存関係・監査 | 中 | △ | △ | △ |
| P13 | インフラ・依存関係・監査 | 軽微 | ○ | ○ | ○ |
| P14 | 脅威モデリング（Tampering） | 軽微 | × | × | × |
| P15 | 入力検証・攻撃防御 | 軽微 | △ | ○ | △ |

## ボーナス・ペナルティ詳細
### Run1
- Bonus: なし
- Penalty: なし

### Run2
- Bonus: なし
- Penalty: なし

### Run3
- Bonus: なし
- Penalty: なし

## エラー分析（抽象的）

### Missed/Partial by Category
| Category | Problems | ○ | △ | × | Stability | Prompt Gap |
|----------|----------|---|---|---|-----------|------------|
| データ保護 | 5 | 3 | 0 | 2 | 高（3/3一致×3問、3/3一致×2問） | データ分類・保持期間方針、内部通信暗号化の検出指示が不足 |
| 入力検証・攻撃防御 | 5 | 2 | 2 | 1 | 低（P04は3回異なる判定） | 認証エンドポイント固有のレート制限、具体的なCORS設定欠如の検出指示が不足 |
| 脅威モデリング（Tampering） | 1 | 0 | 0 | 1 | 高（3/3一致） | データ完全性検証（改ざん検知メカニズム）の分析指示が不足 |
| インフラ・依存関係・監査 | 3 | 1 | 2 | 0 | 高（P12は3/3一致、P10は2/3一致） | シークレット管理の詳細（ローテーション、KMS連携）の分析指示が不足 |

### Improvement Directions

**データ保護カテゴリ（2問未検出）**:
- **P07（データ分類・保持期間方針の欠如）**: プロンプトの「Data Protection」セクションでは「PII分類・保持期間・削除方針の設計が存在するか」を確認項目として列挙しているが、設計書に**明示的な記載がない場合**の検出強度が不足。現在のプロンプトは「データ保護の必要性」への言及にとどまっており、具体的な分類方針・保持期間・削除ポリシーの欠如を積極的に指摘する指示が必要。
- **P08（転送時の暗号化が不十分）**: 「Data Protection」で「転送時の保護方式」を確認するとあるが、**内部通信**（バックエンド-DB間、マイクロサービス間）の暗号化欠如を検出する指示が明示されていない。外部通信のTLS設定が記載されている場合でも、内部通信の暗号化方針欠如を指摘する必要がある。

**入力検証・攻撃防御カテゴリ（1問未検出、2問部分検出）**:
- **P04（認証エンドポイントのレート制限欠如）**: プロンプトの「Infrastructure, Dependencies & Audit」および「Threat Modeling (STRIDE)」のDoS対策では一般的なレート制限を確認しているが、**認証エンドポイント固有**のブルートフォース対策（ログイン試行回数制限、アカウントロックアウト）の分析指示が不足。全体的なレート制限が記載されている設計でも、認証エンドポイント専用の対策欠如を検出する必要がある。
- **P03（CORS設定の未定義）**: 「Input Validation & Attack Defense」で「CORS/origin control」が設計されているかを確認するとあるが、設計書に**CORS設定が完全に欠如している場合**の検出指示が弱い。SPAとAPIの分離構成において、CORS設定が未定義であることを明示的に指摘する必要がある。

**脅威モデリング（Tampering）カテゴリ（1問未検出）**:
- **P14（データ完全性検証の欠如）**: プロンプトの「Threat Modeling (STRIDE)」では「Tampering: data integrity verification」を確認項目として列挙しているが、重要データ（診察記録等）に対する**改ざん検知メカニズム**（ハッシュ、デジタル署名、監査証跡）の具体的な分析指示が不足。STRIDE-T対策として、明示的な改ざん検知設計の有無を確認する必要がある。

**インフラ・依存関係・監査カテゴリ（2問部分検出）**:
- **P12（シークレット管理方針の不足）**: 「Infrastructure, Dependencies & Audit」で「secret management design」を確認するとあるが、**ローテーション、KMS連携、アクセス制御、暗号化**の具体的な要素の欠如を検出する指示が不足。Parameter Store等の記載があっても、詳細な管理方針（ローテーション、暗号化）の欠如を指摘する必要がある。
- **P10（セキュリティ監査ログの欠如）**: 「Infrastructure, Dependencies & Audit」で「security audit logging design for critical operations」を確認するとあるが、アプリケーションログが記載されている場合でも、**セキュリティ監査ログ**（認証失敗、権限変更、機密データアクセス等）の具体的な設計欠如を検出する指示が不足。一般的なロギング方針と監査ログの区別を明確にする必要がある。

### Strengths to Preserve

**認証・認可設計カテゴリ（2問完全検出）**:
- P01、P11の完全検出（3回×○）は、プロンプトの「Authentication & Authorization Design」セクションおよび「API Endpoint Authorization Checklist」が有効。特に「Resource access endpoints: Check that ownership/membership verification is specified」の指示が、APIエンドポイントの認可チェック詳細欠如（P11）の検出に貢献している。

**データ保護カテゴリ（重大問題の高検出率）**:
- P06（ログへの機密データ出力）、P09（保存時データ暗号化の欠如）の完全検出（3回×○）は、プロンプトの「Data Protection」セクションで「機密データの保存・転送時の保護方式」および「PII分類」を明示的に確認する指示が有効。

**脅威モデリング（Information Disclosure）カテゴリ（1問完全検出）**:
- P05（エラーメッセージの過度な情報露出）の完全検出（3回×○）は、プロンプトの「Threat Modeling (STRIDE)」で「Information Disclosure: data classification and encryption」を確認する指示が有効。

**インフラ・依存関係・監査カテゴリ（軽微問題の完全検出）**:
- P13（依存ライブラリの脆弱性管理方針の欠如）の完全検出（3回×○）は、プロンプトの「Infrastructure, Dependencies & Audit」で「vulnerability management policies for third-party libraries」を明示的に確認する指示が有効。
