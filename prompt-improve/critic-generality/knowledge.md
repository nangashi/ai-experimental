# Agent Optimize Knowledge: critic-generality

## 対象エージェント
- **エージェント名**: critic-generality
- **エージェントパス**: /home/toyama-ryosuke/ghq/github.com/nangashi/ai-experimental/.claude/skills/reviewer_create/templates/critic-generality.md
- **エージェント目的**: 観点定義の汎用性と業界非依存性を評価する批評エージェント（reviewer_createスキルのチーム内で動作し、コーディネーターにSendMessageで批評結果を報告する）
- **累計ラウンド数**: 3
- **初期スコア**: 8.69

## パフォーマンス改善の要素

### 効果が確認された構造変化
| 変化 | 効果 (pt) | 安定性 (SD) | 確認ラウンド | 備考 |
|------|-----------|-------------|-------------|------|
| テーブル中心の出力形式（S3c） | +1.24 | 0.10 | Round 001 | 構造化された表形式が体系的な基準カバレッジを強制し、漏れ（特に問題バンク評価）を削減 |
| プロンプト全文英語化（N2a） | +1.28 | 0.00 | Round 003 | 英語の論理構造と明示的指示により、複雑な推論シナリオ（T02, T04, T05, T07, T08）での判断の明確化と全体像合成を大幅改善、完全スコア達成 |

### 効果が限定的/逆効果だった構造変化
| 変化 | 効果 (pt) | 安定性 (SD) | 確認ラウンド | 備考 |
|------|-----------|-------------|-------------|------|
| 自問フレームワーク（C1b） | -0.83 | 0.13 | Round 002 | 各評価ステップで自問リストを付与したが、多次元統合判断（T07, T08）で自問に答えることに注意が向きすぎ、最終的な統合判断の深さが希薄化 |
| タスクチェックリスト（S5a） | -1.04 | 0.14 | Round 002 | 実行すべきことの明示的リストを提供したが、「なぜ重要か」「どう判断するか」の理由付けが弱体化し、特にT07/T08で機械的実行による表面的評価を誘発 |
| 業界標準ベース（N1a） | +0.48 | 0.07 | Round 003 | ISO 27001, OWASP, NIST等の標準知識を追加したが、個別項目の分類精度は改善するものの、混在型シナリオ（T07, T08）での全体判断の統合で逆効果（標準への照合に注意が分散し、最終推奨の明示が弱体化） |

### バリエーションステータス
| Variation ID | Status | Round | Effect (pt) | Notes |
|-------------|--------|-------|-------------|-------|
| S1a | UNTESTED | - | - | 基本 — 異なる難易度/種類の入出力例を1-2個追加 |
| S1b | UNTESTED | - | - | ドメイン特化 — 対象エージェントの典型的タスクに特化した例 |
| S1c | UNTESTED | - | - | 敵対的 — 判断が難しいエッジケースの処理例 |
| S1d | UNTESTED | - | - | 否定例 — やるべきでないこと(失敗例)の明示 |
| S2a | UNTESTED | - | - | 基本品質基準 — 出力品質の5段階または3段階基準 |
| S2b | UNTESTED | - | - | チェックリスト型 — 出力に含めるべき要素の明示的リスト |
| S2c | UNTESTED | - | - | 比較基準 — 良い出力と悪い出力の特徴リスト |
| S3a | UNTESTED | - | - | セクション名のみ（テンプレート削除） |
| S3b | UNTESTED | - | - | 最小自由記述（セクション構造なし） |
| S3c | EFFECTIVE | Round 001, 002, 003 | +1.24, +0.07, baseline | テーブル中心（表形式で統一） — 体系的基準カバレッジを強制、Round 002で完全スコア(10.00, SD=0.00)達成 |
| S4a | UNTESTED | - | - | 1行要約化 — 各項目の説明を核心1行に削減 |
| S4b | UNTESTED | - | - | 階層簡略化 — 見出し維持+内容フラット化 |
| S5a | INEFFECTIVE | Round 002 | -1.04 | タスクチェックリスト — 実行すべきことのリスト（理由付け弱体化） |
| S5b | UNTESTED | - | - | アンチパターンリスト — 避けるべきことのリスト |
| S5c | UNTESTED | - | - | 欠落検出 — 「存在すべきだが欠けているもの」の確認指示 |
| C1a | UNTESTED | - | - | 基本段階的分析 — 「まず〜、次に〜」の手順指示 |
| C1b | INEFFECTIVE | Round 002 | -0.83 | 自問フレームワーク — 各ステップで自問リスト付与（多次元統合判断で逆効果） |
| C1c | UNTESTED | - | - | マルチパス — 1回目:全体把握、2回目:詳細分析 |
| C2a | UNTESTED | - | - | 専門家ペルソナ — 分野の権威としてのロール設定 |
| C2b | UNTESTED | - | - | メンター視点 — 教育的観点で丁寧に分析 |
| C2c | UNTESTED | - | - | 二重役割 — 分析者+検証者の両面 |
| C3a | UNTESTED | - | - | 重要度優先 — 重要な要素から処理する指示 |
| C3b | UNTESTED | - | - | リスクベース — 発生確率×影響度で順序付け |
| C3c | UNTESTED | - | - | カテゴリ→重要度 — カテゴリ別にグループ化してから重要度順 |
| C4a | UNTESTED | - | - | 完了チェック — 「出力前に以下を確認せよ」のリスト |
| C4b | UNTESTED | - | - | 反証思考 — 「自分の結論に対する反論を考えよ」 |
| C4c | UNTESTED | - | - | 品質ゲート — 各セクション完了時の品質確認ステップ |
| N1a | MARGINAL | Round 003 | +0.48pt | 業界標準ベース — 該当分野の標準知識を追加（個別分類は改善、混在型全体判断で逆効果） |
| N1b | UNTESTED | - | - | アンチパターン集 — 典型的な失敗パターンリスト |
| N1c | UNTESTED | - | - | 隣接領域の知識 — 関連分野からの知見を追加 |
| N2a | EFFECTIVE | Round 003 | +1.28pt | 全文英語 — プロンプト全体を英語に変換（完全スコア10.00, SD=0.00達成） |
| N2b | UNTESTED | - | - | 混合言語 — 技術用語は英語、説明は日本語 |
| N2c | UNTESTED | - | - | 全文日本語 — 対照群 |
| N3a | UNTESTED | - | - | 最小化 — 全体を50%程度に圧縮 |
| N3b | UNTESTED | - | - | 拡張 — 判断基準や理由を50%程度増量 |
| N3c | UNTESTED | - | - | 選択的最適化 — 低価値セクションのみ削除 |
| N4a | UNTESTED | - | - | 明示的制約 — 出力の長さ・形式・スコープの明示 |
| N4b | UNTESTED | - | - | ネガティブ制約 — 「〜してはいけない」の明示 |
| N4c | UNTESTED | - | - | スコープ限定 — 「〜のみに集中せよ」の明示 |
| M1a | UNTESTED | - | - | 事前分析+本実行 — 「まず理解し、次に実行せよ」の2段階 |
| M1b | UNTESTED | - | - | 実行と出力の分離 — 分析フェーズと出力整形フェーズを分離 |
| M2a | UNTESTED | - | - | 最低出力要件 — 「最低N項目を含めること」 |
| M2b | UNTESTED | - | - | 制約緩和 — 不要な制約の削除（自由度向上） |
| M2c | UNTESTED | - | - | 確信度注釈 — 各出力に確信度(高/中/低)を付与させる |
| M3a | UNTESTED | - | - | 重要情報の先頭配置 — プロンプトの冒頭に最重要指示 |
| M3b | UNTESTED | - | - | 繰り返し強調 — 重要指示を冒頭と末尾の両方に配置 |
| M3c | UNTESTED | - | - | 階層的情報配置 — 概要→詳細→補足の順序で構成 |

## テストセット履歴

| ラウンド | テーマ/シナリオ | 主要品質次元 |
|---------|---------------|-------------|
| Round 001 | 8シナリオ（T01-T08）: 単一/複数ドメイン依存、技術スタック依存、境界線判断、混在パターン | 汎用性評価の包括性、問題バンク評価、条件付き汎用性の合成 |
| Round 002 | 8シナリオ（T01-T08）: 同上（Round 001と同一テストセット） | S3c基盤への追加独立変数（C1b, S5a）の効果、多次元統合判断での安定性 |
| Round 003 | 8シナリオ（T01-T08）: 同上（Round 001/002と同一テストセット） | N2a（全文英語化）とN1a（業界標準ベース）の効果、複雑な推論シナリオでの判断明確化 |

## 最新ラウンドサマリ

**Round 003** (2026-02-11)
- **スコア**: v003-baseline 8.72 (SD=0.07), v003-variant-english 10.00 (+1.28pt, SD=0.00), v003-variant-standards 9.20 (+0.48pt, SD=0.07)
- **推奨**: v003-variant-english (Variation S3c + N2a)
- **主要知見**: N2a（全文英語化）が完全スコア達成（10.00, SD=0.00）、全8シナリオで完全スコア。N1a（業界標準ベース）は個別分類精度改善も混在型シナリオ（T07, T08）で全体判断弱体化
- **収束判定**: Round 002→003の改善幅+1.28pt（> 0.5pt閾値）により継続推奨。ただし完全スコア達成のため改善余地は限定的
- **次回推奨**: (1)他エージェントへのN2a横展開、(2)N2a + 追加独立変数の組み合わせテスト、(3)critic-generality最適化の終了

## 改善のための考慮事項

1. **構造化された出力形式は基準カバレッジを改善する** （根拠: Round 001, S3c, 効果+1.24pt, SD=0.10; Round 002, S3c, 完全スコア10.00, SD=0.00） — テーブル形式は評価基準の体系的チェックを強制し、特に複雑な判断（問題バンク評価、多次元統合判断）での漏れを完全に排除する。Round 002で効果飽和を確認
2. **プロンプトの全文英語化は判断の明確化と複雑な推論を大幅改善する** （根拠: Round 003, N2a, 効果+1.28pt, SD=0.00, 完全スコア達成） — 英語の論理構造（主語-述語の明確化、接続詞の明示）と明示的指示（"clearly state", "explicitly recommend"）により、曖昧な表現を排除し強い判断を促進。特に複雑な推論シナリオ（T02, T04, T05, T07, T08）で顕著な効果
3. **同一Variation IDでも実装品質で結果が異なる** （根拠: Round 001, S3c 2実装比較, 9.93 vs 8.42） — 出力テンプレートの具体的構造（テーブルスキーマ、セクション見出しの明確さ）が重要
4. **条件付き判断の合成は構造化出力で解決済み** （根拠: Round 001, T06での8.9点 → Round 002, T06での10.0点） — Round 001で指摘された課題は、S3cのテーブル形式により完全に解消。明示的な「合成」セクションを追加する必要はない
5. **問題バンク評価は明示的チェック項目として扱うべき** （根拠: Round 001, T07での改善8.6→10.0） — 暗黙的依存として見落とされやすいため、構造化出力で必須項目として強制すると効果的
6. **自問フレームワークは多次元統合判断で逆効果** （根拠: Round 002, C1b, 効果-0.83pt, T07/T08で-1.9pt/-2.0pt） — 単純な判断タスク（T01-T05）では問題ないが、複雑な統合判断では自問に答えることに注意が分散し、全体像の合成が弱まる
7. **タスクチェックリストは判断の深さを弱体化させる** （根拠: Round 002, S5a, 効果-1.04pt, T07/T08で-3.3pt/-2.9pt） — 「実行すべきこと」の列挙は手順の明確化には有効だが、critic-generalityのような判断の深さが求められるタスクでは、チェックボックス思考が表面的な評価を誘発する
8. **外部知識の追加は個別分類精度を改善するが全体判断で注意分散リスクがある** （根拠: Round 003, N1a, 効果+0.48pt, T07/T08で-1.0pt/-2.4pt） — 業界標準知識（ISO 27001, OWASP, NIST等）の追加は個別項目の分類精度を改善するが、混在型シナリオでの全体判断の統合では標準への照合に注意が向きすぎ、最終推奨の明示が弱体化。Round 002で確認されたC1b/S5aと同様の「注意の分散」パターン
9. **最適化の効果飽和は完全スコア＋ゼロ分散で判断可能** （根拠: Round 002, S3c, 10.00 ± 0.00, 追加変数の逆効果; Round 003, N2a, 10.00 ± 0.00） — 完全スコア（10.00）＋完全安定性（SD=0.00）を達成した場合、最適化が飽和状態に達したと判断できる。Round 003でS3c + N2aの組み合わせにより最適解に到達
