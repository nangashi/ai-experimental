# Agent Optimize Knowledge: critic-effectiveness

## 対象エージェント
- **エージェント名**: critic-effectiveness
- **エージェントパス**: /home/toyama-ryosuke/ghq/github.com/nangashi/ai-experimental/.claude/skills/reviewer_create/templates/critic-effectiveness.md
- **エージェント目的**: 観点定義の有効性を評価する批評エージェント。レビュー品質への寄与度と他の既存観点との境界明確性を評価する。この観点がなかった場合に見逃される問題の列挙、スコープの重複検出、相互参照の正確性検証を行う。
- **累計ラウンド数**: 3
- **初期スコア**: 9.81/10 (Round 001 baseline)

## パフォーマンス改善の要素

### 効果が確認された構造変化
| 変化 | 効果 (pt) | 安定性 (SD) | 確認ラウンド | 備考 |
|------|-----------|-------------|-------------|------|
| S1a: 1-2個の基本的な入出力例を追加 | +0.19 | 0.00 | 001 | 全シナリオで天井パフォーマンス(10.0/10)を達成; T01の不整合を解消; 包括的な基準カバレッジのパターンを提供 |
| C1a: 基本段階的分析(CoT)「まず〜、次に〜」の手順指示 | +3.64 | 0.00 | 002 | T07行動可能性評価の完全失敗を解決(0.5→10.0, +9.5pt); T05狭隘性検出の弱点を解消(5.0→10.0, +5.0pt); 構造化推論により包括的な基準カバレッジと微妙な問題の見落とし防止を実現 |
| S5a: タスクチェックリスト(実行すべきことのリスト) | +3.64 | 0.00 | 002 | C1aと同一のパフォーマンス(10.0/10, SD=0.00); 明示的なチェックリスト形式により体系的実行と完了確認を保証; T05/T07で同等の大幅改善を達成 |

### 効果が限定的/逆効果だった構造変化
| 変化 | 効果 (pt) | 安定性 (SD) | 確認ラウンド | 備考 |
|------|-----------|-------------|-------------|------|
| N3a: 全体を約50%に圧縮 | -3.14 | 0.11 | 001 | オーバーラップ分析に深刻なダメージ(T02: -4.3pt)と境界検証の損傷(T01: -1.3pt); 重要な分析フレームワークとエビデンス収集ガイダンスを削除; 過度な圧縮は避けるべき |
| S2a: 5段階評価基準の追加 | -7.50 | 0.00 | 003 | タスク不整合によりレビュー機能せず; プロンプトのメタ目的(観点評価vs観点適用)の曖昧性により、両Run共にテスト文書評価を放棄しメタ評価を実施; バリアント生成時のタスク適合性検証が必須 ※テスト設計問題により無効 |
| N1a: 業界標準ベースの知識追加 | -3.50 | 4.00 | 003 | Run間でタスク理解が分岐(Run1: メタ分析0.0pt, Run2: 設計書評価8.0pt)し不安定; プロンプト設計の曖昧性により適用対象の解釈余地が拡大; Run2単独では+0.5pt改善とP04検出成功を示すが信頼性低い ※テスト設計問題により無効 |

### バリエーションステータス
| Variation ID | Status | Round | Effect (pt) | Notes |
|-------------|--------|-------|-------------|-------|
| S1a | EFFECTIVE | 001 | +0.19 | 天井パフォーマンス(10.0/10)達成、SD=0.00 |
| S1b | UNTESTED | - | - | ドメイン特化 — 対象エージェントの典型的タスクに特化した例 |
| S1c | UNTESTED | - | - | 敵対的 — 判断が難しいエッジケースの処理例 |
| S1d | UNTESTED | - | - | 否定例 — やるべきでないこと(失敗例)の明示 |
| S2a | INVALID | 003 | -7.50 | タスク不整合によりレビュー機能せず（テスト設計問題により無効） |
| S2b | UNTESTED | - | - | チェックリスト型 — 出力に含めるべき要素の明示的リスト |
| S2c | UNTESTED | - | - | 比較基準 — 良い出力と悪い出力の特徴リスト |
| S3a | UNTESTED | - | - | セクション名のみ（テンプレート削除） |
| S3b | UNTESTED | - | - | 最小自由記述（セクション構造なし） |
| S3c | UNTESTED | - | - | テーブル中心（表形式で統一） |
| S4a | INEFFECTIVE | 001 | -3.14 | 50%圧縮により分析能力に深刻なダメージ、特にT02で-4.3pt |
| S4b | UNTESTED | - | - | 階層簡略化 — 見出し維持+内容フラット化 |
| S5a | EFFECTIVE | 002 | +3.64 | 天井パフォーマンス(10.0/10)達成、SD=0.00 |
| S5b | UNTESTED | - | - | アンチパターンリスト — 避けるべきことのリスト |
| S5c | UNTESTED | - | - | 欠落検出 — 「存在すべきだが欠けているもの」の確認指示 |
| C1a | EFFECTIVE | 002 | +3.64 | 天井パフォーマンス(10.0/10)達成、SD=0.00 |
| C1b | UNTESTED | - | - | 自問フレームワーク — 各ステップで自問リスト付与 |
| C1c | UNTESTED | - | - | マルチパス — 1回目:全体把握、2回目:詳細分析 |
| C2a | UNTESTED | - | - | 専門家ペルソナ — 分野の権威としてのロール設定 |
| C2b | UNTESTED | - | - | メンター視点 — 教育的観点で丁寧に分析 |
| C2c | UNTESTED | - | - | 二重役割 — 分析者+検証者の両面 |
| C3a | UNTESTED | - | - | 重要度優先 — 重要な要素から処理する指示 |
| C3b | UNTESTED | - | - | リスクベース — 発生確率×影響度で順序付け |
| C3c | UNTESTED | - | - | カテゴリ→重要度 — カテゴリ別にグループ化してから重要度順 |
| C4a | UNTESTED | - | - | 完了チェック — 「出力前に以下を確認せよ」のリスト |
| C4b | UNTESTED | - | - | 反証思考 — 「自分の結論に対する反論を考えよ」 |
| C4c | UNTESTED | - | - | 品質ゲート — 各セクション完了時の品質確認ステップ |
| N1a | INVALID | 003 | -3.50 | Run間でタスク理解が分岐、不安定(SD=4.0)（テスト設計問題により無効） |
| N1b | UNTESTED | - | - | アンチパターン集 — 典型的な失敗パターンリスト |
| N1c | UNTESTED | - | - | 隣接領域の知識 — 関連分野からの知見を追加 |
| N2a | UNTESTED | - | - | 全文英語 — プロンプト全体を英語に変換 |
| N2b | UNTESTED | - | - | 混合言語 — 技術用語は英語、説明は日本語 |
| N2c | UNTESTED | - | - | 全文日本語 — 対照群 |
| N3a | UNTESTED | - | - | 最小化 — 全体を50%程度に圧縮 |
| N3b | UNTESTED | - | - | 拡張 — 判断基準や理由を50%程度増量 |
| N3c | UNTESTED | - | - | 選択的最適化 — 低価値セクションのみ削除 |
| N4a | UNTESTED | - | - | 明示的制約 — 出力の長さ・形式・スコープの明示 |
| N4b | UNTESTED | - | - | ネガティブ制約 — 「〜してはいけない」の明示 |
| N4c | UNTESTED | - | - | スコープ限定 — 「〜のみに集中せよ」の明示 |
| M1a | UNTESTED | - | - | 事前分析+本実行 — 「まず理解し、次に実行せよ」の2段階 |
| M1b | UNTESTED | - | - | 実行と出力の分離 — 分析フェーズと出力整形フェーズを分離 |
| M2a | UNTESTED | - | - | 最低出力要件 — 「最低N項目を含めること」 |
| M2b | UNTESTED | - | - | 制約緩和 — 不要な制約の削除（自由度向上） |
| M2c | UNTESTED | - | - | 確信度注釈 — 各出力に確信度(高/中/低)を付与させる |
| M3a | UNTESTED | - | - | 重要情報の先頭配置 — プロンプトの冒頭に最重要指示 |
| M3b | UNTESTED | - | - | 繰り返し強調 — 重要指示を冒頭と末尾の両方に配置 |
| M3c | UNTESTED | - | - | 階層的情報配置 — 概要→詳細→補足の順序で構成 |

## テストセット履歴

| ラウンド | テーマ/シナリオ | 主要品質次元 |
|---------|---------------|-------------|
| 001 | 7シナリオ(T01-T07): 観点定義の有効性評価 (範囲、境界、クロスリファレンス、出力品質) | 境界検証、オーバーラップ検出、価値提案明瞭性、参照精度、狭隘性検出、冗長性分析、実行可能性評価 |
| 002 | 7シナリオ(T01-T07): 観点定義の有効性評価 (価値認識、境界明瞭性、オーバーラップ検出、参照精度、狭隘性、行動可能性) | 価値認識と境界明瞭性、スコープオーバーラップ検出、曖昧な価値提案検出、クロスリファレンス精度検証、過度な狭隘性検出、非行動可能出力パターン検出 |
| 003 | SmartHealth IoT Platform システム設計書 (10問題+8ボーナス) | Security/Credential管理・暗号化、Performance/スケーラビリティ、Reliability/耐障害性・監視・データ整合性・災害復旧、Consistency/文書完全性・エラー処理、Best Practices/テスト戦略 |

## 最新ラウンドサマリ

**Round 003** (2026-02-11)
- **スコア**: baseline(C1a)=7.50 (SD=0.00), scoring(S2a)=0.00 (SD=0.00), standards(N1a)=4.00 (SD=4.00)
- **推奨**: v003-baseline (C1a)
- **理由**: ベースラインが最高スコア7.50、両バリアント共にINEFFECTIVE (S2a: -7.50pt, N1a: -3.50pt)
- **主要知見**:
  - バリアント生成の品質管理が重要: S2a/N1aはタスク不整合問題(0.0-4.0pt)で不安定
  - テストスイート難化成功: Round 002天井効果を解消、baseline 7.5/10.0で識別能力回復
  - baseline弱点: P04(定量的整合性チェック)、P09(テスト網羅性)未検出
  - N1a Run2はP04検出成功+0.5pt改善を示すが、SD=4.0で信頼性低い
  - 最適化継続の余地: targeted improvement (定量検証手順追加)により8.0-8.5/10.0到達可能と推定
- **注記**: Round 3-4はテスト設計の構造的問題（critic-effectivenessは観点定義を評価するエージェントだが、設計書をテスト対象に使用）により結果が無効。Round 3-4で検証したS2a, N1a のINEFFECTIVE判定はテスト設計問題に起因するため、真のパフォーマンスは不明。有効な最終結果はRound 2: CoT(C1a)バリアント Mean=10.00, SD=0.00。

## 改善のための考慮事項

1. **構造化推論は分析タスクに極めて高効果**: CoT(C1a)とチェックリスト(S5a)の両方が+3.64pt改善を達成。構造化ガイダンス(「まず〜、次に〜」またはタスク列挙)は包括的基準カバレッジと微妙な問題の見落とし防止を実現する。（根拠: Round 002, C1a/S5a, 効果+3.64pt）

2. **構造化推論はメタ評価トラップを解決**: 体系的分析指示は「認識のみで改善不可能な出力」パターン等の複雑な判断を可能にする。（根拠: Round 002, C1a/S5a on T07, 効果+9.5pt）

3. **構造化推論は難易度別パフォーマンス低下を解消**: Hard平均がbaseline=4.1→C1a/S5a=10.0(+5.9pt)。構造化ガイダンスは特に複雑なシナリオで効果が大きい。（根拠: Round 002, C1a/S5a on T05-T07, 効果+5.9pt）

4. **例示は分析エージェントに高効果**: 1-2個の具体的な入出力例の追加(+0.19pt→天井10.0/10)は、包括性の期待とエビデンス形式について明確性を提供する。（根拠: Round 001, S1a, 効果+0.19pt）

5. **過度な圧縮は微妙な分析を損なう**: 50%圧縮は分析フレームワークとエビデンス収集パターンを削除し深刻な退化(-3.14pt)を引き起こす。重要な分析ガイダンスは保持すべき。（根拠: Round 001, N3a, 効果-3.14pt）

6. **オーバーラップ分析は明示的エビデンス収集ガイダンス要**: 圧縮はT02で最大のシナリオ別退化(10.0→5.7)を引き起こした。オーバーラップ検出には「既存観点スコープと比較」し具体的エビデンスを提供する明示的指示が必要。（根拠: Round 001, N3a on T02, 効果-4.3pt）

7. **バリアント生成時のタスク適合性検証が必須**: プロンプトのメタ目的(観点評価vs観点適用)の曖昧性により、S2a/N1aは両Run共にタスク不実行またはRun間分岐(-7.50pt/-3.50pt)。バリアント生成後のドライラン実施とメタデータ-本文一貫性チェックが必要。（根拠: Round 003, S2a/N1a, 効果-7.50pt/-3.50pt）

8. **プロンプト冒頭の明示的タスク指示が曖昧性を解決**: N1a Run2はP04検出成功+0.5pt改善を示すが、Run1はメタ分析実施(SD=4.0)。「この観点は[テスト文書種別]の問題を検出するために使用されます」等の明記により安定化が期待できる。（根拠: Round 003, N1a Run2, 効果+0.5pt but SD=4.0）

9. **定量的整合性チェック手順の追加が有効**: baseline(C1a)はP04(手動フェイルオーバーとSLA 99.5%の矛盾)を未検出だが、N1a Run2はSMART原則のMeasurable基準により検出成功。CoT + 定量検証手順の組み合わせにより8.0-8.5/10.0到達可能と推定。（根拠: Round 003, N1a Run2 on P04, baseline未検出→N1a検出）

10. **テスト網羅性チェックの明示化が必要**: baseline(C1a)はP09(パフォーマンステスト欠如)を未検出。「非機能要件に対するテスト戦略の対応を確認せよ」等の手順追加により網羅性評価を強化できる。（根拠: Round 003, baseline on P09, 効果0pt）

11. **天井パフォーマンス達成時はテストスイート拡張を検討**: Round 002で14/14評価が10.0達成(SD=0.00)。Round 003でIoT設計書に変更後、baseline 7.5/10.0で識別能力回復。困難なエッジケースへの移行は有効。（根拠: Round 002→003, 天井効果解消）

12. **業界標準知識は適用対象の明示とセットで有効**: N1a Run2はSMART原則適用によりP04検出+ボーナス3件(+1.5pt)を達成したが、Run1は観点定義自体の評価に誤適用。知識追加時は「設計書の評価に使用せよ」等の明示が不可欠。（根拠: Round 003, N1a Run2効果+0.5pt, Run1効果-4.0pt）

13. **critic-effectivenessは観点定義ファイルを入力とするメタ評価エージェントであり、テスト対象は観点定義でなければならない。設計書をテスト対象とするとタスク不整合が発生する**: Round 3-4で全プロンプトがメタ評価に逸脱し、観点定義の評価ではなく設計書の評価を実施。テスト文書種別がエージェント目的と一致しない場合、バリアントの真のパフォーマンスは測定不可能。（根拠: Round 3-4, 全プロンプトがメタ評価に逸脱）
