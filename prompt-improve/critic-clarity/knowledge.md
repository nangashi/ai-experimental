# Agent Optimize Knowledge: critic-clarity

## 対象エージェント
- **エージェント名**: critic-clarity
- **エージェントパス**: /home/toyama-ryosuke/ghq/github.com/nangashi/ai-experimental/.claude/skills/reviewer_create/templates/critic-clarity.md
- **エージェント目的**: 観点定義の表現の明確性とAI実行時の動作一貫性を評価する批評エージェント。観点定義を複数のAIエージェントに与えたとき、全員が同じ範囲・基準でレビューを行えるかを評価する。
- **累計ラウンド数**: 2
- **初期スコア**: 6.99 (SD=0.11)

## パフォーマンス改善の要素

### 効果が確認された構造変化
| 変化 | 効果 (pt) | 安定性 (SD) | 確認ラウンド | 備考 |
|------|-----------|-------------|-------------|------|
| Few-shot examples (S1a): 異なる難易度/種類の入出力例を1-2個追加 | +2.87 | 0.14 | Round 1 | T06で劇的改善(+4.7pt)、多次元シナリオで有効 |
| Task-list + Staged analysis (S2a+C1a): タスクチェックリスト＋段階的分析 | +2.91 | 0.14 | Round 1 | 全複雑シナリオで10.0達成、構造的分解が鍵 |

### 効果が限定的/逆効果だった構造変化
| 変化 | 効果 (pt) | 安定性 (SD) | 確認ラウンド | 備考 |
|------|-----------|-------------|-------------|------|
| Knowledge-based refinement (N1a): 学習済みパターンの統合 | -0.42 | 0.05 | Round 2 | T03境界ケース分析で劣化(7.8/10)、構造分解なしは不十分 |
| Decomposition-focused (M1a): 事前分析+本実行の2段階アプローチ | -0.14 | 0.20 | Round 2 | T03でばらつき(8.3-10.1)、完全性チェック不足が要因 |

### バリエーションステータス
| Variation ID | Status | Round | Effect (pt) | Notes |
|-------------|--------|-------|-------------|-------|
| S1a | EFFECTIVE | Round 1 | +2.87 | 基本 — 異なる難易度/種類の入出力例を1-2個追加 |
| S1b | UNTESTED | - | - | ドメイン特化 — 対象エージェントの典型的タスクに特化した例 |
| S1c | UNTESTED | - | - | 敵対的 — 判断が難しいエッジケースの処理例 |
| S1d | UNTESTED | - | - | 否定例 — やるべきでないこと(失敗例)の明示 |
| S2a | EFFECTIVE | Round 1 | +2.91 (combined with C1a) | 基本品質基準 — 出力品質の5段階または3段階基準 (※C1aと組み合わせて検証) |
| S2b | UNTESTED | - | - | チェックリスト型 — 出力に含めるべき要素の明示的リスト |
| S2c | UNTESTED | - | - | 比較基準 — 良い出力と悪い出力の特徴リスト |
| S3a | UNTESTED | - | - | セクション名のみ（テンプレート削除） |
| S3b | UNTESTED | - | - | 最小自由記述（セクション構造なし） |
| S3c | UNTESTED | - | - | テーブル中心（表形式で統一） |
| S4a | UNTESTED | - | - | 1行要約化 — 各項目の説明を核心1行に削減 |
| S4b | UNTESTED | - | - | 階層簡略化 — 見出し維持+内容フラット化 |
| S5a | UNTESTED | - | - | タスクチェックリスト — 実行すべきことのリスト |
| S5b | UNTESTED | - | - | アンチパターンリスト — 避けるべきことのリスト |
| S5c | UNTESTED | - | - | 欠落検出 — 「存在すべきだが欠けているもの」の確認指示 |
| C1a | EFFECTIVE | Round 1 | +2.91 (combined with S2a) | 基本段階的分析 — 「まず〜、次に〜」の手順指示 (※S2aと組み合わせて検証) |
| C1b | UNTESTED | - | - | 自問フレームワーク — 各ステップで自問リスト付与 |
| C1c | UNTESTED | - | - | マルチパス — 1回目:全体把握、2回目:詳細分析 |
| C2a | UNTESTED | - | - | 専門家ペルソナ — 分野の権威としてのロール設定 |
| C2b | UNTESTED | - | - | メンター視点 — 教育的観点で丁寧に分析 |
| C2c | UNTESTED | - | - | 二重役割 — 分析者+検証者の両面 |
| C3a | UNTESTED | - | - | 重要度優先 — 重要な要素から処理する指示 |
| C3b | UNTESTED | - | - | リスクベース — 発生確率×影響度で順序付け |
| C3c | UNTESTED | - | - | カテゴリ→重要度 — カテゴリ別にグループ化してから重要度順 |
| C4a | UNTESTED | - | - | 完了チェック — 「出力前に以下を確認せよ」のリスト |
| C4b | UNTESTED | - | - | 反証思考 — 「自分の結論に対する反論を考えよ」 |
| C4c | UNTESTED | - | - | 品質ゲート — 各セクション完了時の品質確認ステップ |
| N1a | INEFFECTIVE | Round 2 | -0.42 | 業界標準ベース — 該当分野の標準知識を追加（構造分解なしでは境界ケース分析劣化） |
| N1b | UNTESTED | - | - | アンチパターン集 — 典型的な失敗パターンリスト |
| N1c | UNTESTED | - | - | 隣接領域の知識 — 関連分野からの知見を追加 |
| N2a | UNTESTED | - | - | 全文英語 — プロンプト全体を英語に変換 |
| N2b | UNTESTED | - | - | 混合言語 — 技術用語は英語、説明は日本語 |
| N2c | UNTESTED | - | - | 全文日本語 — 対照群 |
| N3a | UNTESTED | - | - | 最小化 — 全体を50%程度に圧縮 |
| N3b | UNTESTED | - | - | 拡張 — 判断基準や理由を50%程度増量 |
| N3c | UNTESTED | - | - | 選択的最適化 — 低価値セクションのみ削除 |
| N4a | UNTESTED | - | - | 明示的制約 — 出力の長さ・形式・スコープの明示 |
| N4b | UNTESTED | - | - | ネガティブ制約 — 「〜してはいけない」の明示 |
| N4c | UNTESTED | - | - | スコープ限定 — 「〜のみに集中せよ」の明示 |
| M1a | MARGINAL | Round 2 | -0.14 | 事前分析+本実行 — 「まず理解し、次に実行せよ」の2段階（安定性不足SD=0.20） |
| M1b | UNTESTED | - | - | 実行と出力の分離 — 分析フェーズと出力整形フェーズを分離 |
| M2a | UNTESTED | - | - | 最低出力要件 — 「最低N項目を含めること」 |
| M2b | UNTESTED | - | - | 制約緩和 — 不要な制約の削除（自由度向上） |
| M2c | UNTESTED | - | - | 確信度注釈 — 各出力に確信度(高/中/低)を付与させる |
| M3a | UNTESTED | - | - | 重要情報の先頭配置 — プロンプトの冒頭に最重要指示 |
| M3b | UNTESTED | - | - | 繰り返し強調 — 重要指示を冒頭と末尾の両方に配置 |
| M3c | UNTESTED | - | - | 階層的情報配置 — 概要→詳細→補足の順序で構成 |

## テストセット履歴

| ラウンド | テーマ/シナリオ | 主要品質次元 |
|---------|---------------|-------------|
| Round 1 | 6シナリオ（明確な基準、曖昧な観点、境界ケース、多層スコープ、最小スコープ+エッジケース、不整合な問題バンク） | 表現明確性、境界条件、多次元分析、横断的一貫性 |
| Round 2 | 同上（Round 1と同一テストセット） | 安定性検証、知識統合効果、分解アプローチの頑健性 |

## 最新ラウンドサマリ

**Round 2 (2026-02-11)**
- **比較バリアント**: v002-baseline (10.00, SD=0.00), v002-knowledge (9.58, SD=0.05), v002-decompose (9.86, SD=0.20)
- **推奨**: v002-baseline（完全スコア10.00、絶対安定性SD=0.00）
- **主要知見**:
  - Round 1のTask-list + Staged analysis構造が天井性能達成（全シナリオ10.0）
  - Knowledge統合単体(N1a)は境界ケース分析で劣化(-0.42pt)、構造フレームワーク内統合が必須
  - Decomposition(M1a)は高性能だが安定性不足(SD=0.20)、完全性チェック(C4a)追加が有効
  - テストセット飽和: 6シナリオ中4つで全バリアント10.0、T03/T06のみ識別力
- **次ラウンド提案**: C4a完全性チェック追加（ハイブリッド最適化）またはM/N系列の新次元探索

## 改善のための考慮事項

1. **構造的分解が多次元シナリオで必須**: 複数セクション間の関係分析（スコープvs問題バンク等）には明示的な段階的アプローチが必要。アドホックな分析では重大な見落としが発生（根拠: Round 1, v001-tasklist, 効果+2.91pt、ベースラインT06失敗5.3/10）
2. **Few-shot例は横断的不整合検出に特に有効**: 具体的パターンを示すことで多次元分析の深度が向上。境界ケース分析も改善（根拠: Round 1, v001-fewshot, 効果+2.87pt、T06で+4.7pt）
3. **4フェーズアプローチの有効性**: スコープ分析→一貫性テスト→実行可能性チェック→報告の順序で全ルーブリック基準を網羅（根拠: Round 1, v001-tasklist, 全複雑シナリオで10.0達成）。Round 2で天井性能（10.00, SD=0.00）を確認（根拠: Round 2, v002-baseline）
4. **安定性とパフォーマンスの両立**: 構造的アプローチはSD≤0.14で高安定性を維持しつつ大幅改善を実現（根拠: Round 1, 両バリアントSD≤0.5、改善幅+2.9pt）。最適化時は絶対安定性（SD=0.00）達成可能（根拠: Round 2, v002-baseline）
5. **シンプルシナリオは識別力不足**: T01/T02/T05は全バリアントで10.0達成。複雑シナリオ（境界条件、多層スコープ、横断的不整合）が識別に必要（根拠: Round 1, T03/T04/T06でのみバリアント間差異）。Round 2ではT03/T06のみ識別力維持
6. **知識統合は構造フレームワーク内で行うべき**: 学習パターンを独立適用すると境界ケース分析が劣化(-0.42pt)。構造的タスク分解フレームワークを維持した上で知識を統合する必要がある（根拠: Round 2, v002-knowledge, T03で7.8/10に低下）
7. **分解アプローチには完全性保証が必要**: 事前分析+本実行の2段階アプローチは高性能だが安定性不足(SD=0.20)。完全性チェック(C4a)追加で頑健性向上が期待される（根拠: Round 2, v002-decompose, T03で8.3-10.1のばらつき）
8. **テストセット飽和への対処**: 現行6シナリオ中4つで全バリアント10.0達成。更なる最適化には多条件境界ケース・3次元以上横断的不整合シナリオ追加が必要（根拠: Round 2, T01/T02/T04/T05識別力喪失）
