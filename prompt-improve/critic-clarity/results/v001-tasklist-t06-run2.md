# T06 Evaluation Result

## Test Scenario
Inconsistent Problem Bank

## Execution

### Phase 1: 評価スコープ分析
- [x] 各評価スコープ項目を1つずつ読み、主観的表現（「適切」「十分」「妥当」等）をマークする
  - 「主要な機能にテストがあるか」 → 「主要」をマーク
  - 「エッジケースのテストがあるか」 → やや抽象的
  - 「テストが定期的に実行される仕組みがあるか（CI 設定を確認）」 → 具体的基準あり
  - 「テストが独立して実行可能か（テスト間の依存がないか）」 → 具体的基準あり
  - 「モックやスタブが適切に使われているか」 → 「適切」をマーク
  - 「アサーションが具体的か（曖昧な assertTrue ではなく、assertEqual 等）」 → 具体的基準あり（例示）
- [x] マークした表現それぞれに対し、「複数AIが同じ基準で判定できるか」を検証する
  - 「主要な機能」: 何を「主要」と判断するか不明
  - 「適切に使われている」: 適切性の基準が不明
- [x] 曖昧な項目について、具体的な代替表現を考案する
  - 実施（Phase 4で詳述）

### Phase 2: 動作一貫性テスト
- [x] 各スコープ項目単体で「AIに何を確認させるか」を1文で述べられるかテストする
  - 「主要な機能にテストがあるか」 → 「主要」の基準が不明（公開API？ビジネスロジック？）
  - 「エッジケースのテストがあるか」 → どの程度のエッジケースカバーが必要か不明
  - 「テストが定期的に実行される仕組みがあるか（CI 設定を確認）」 → 「CI設定を確認する」（可能）
  - 「テストが独立して実行可能か（テスト間の依存がないか）」 → 「テスト間の依存を確認する」（可能）
  - 「モックやスタブが適切に使われているか」 → 「適切」の基準が不明（どの箇所にモックが必要？）
  - 「アサーションが具体的か（曖昧な assertTrue ではなく、assertEqual 等）」 → 「assertTrue以外の具体的アサーションが使われているか確認する」（可能）
- [x] ボーナス/ペナルティ判定指針の境界ケースを3つ挙げ、判定が一意に決まるか確認する
  - この観点定義にはボーナス/ペナルティセクションがない
- [x] スコープ外項目について「なぜスコープ外か」の根拠が明確か確認する
  - 「パフォーマンステスト」: 機能テストと明確に区別可能
  - 「E2E テストの詳細なシナリオ設計」: ユニット/統合テストと区別可能

### Phase 3: 実行可能性確認
- [x] 各スコープ項目が「問題パターン」として機能するか検証する（抽象的すぎないか）
  - 「テストが独立して実行可能か」: 問題パターンとして機能する（テスト間の依存を検出）
  - 「アサーションが具体的か」: 例示により検出可能
  - 「主要な機能にテストがあるか」「モックが適切に使われているか」: 抽象的で具体的検出基準がない
- [x] 問題バンクの例が、AI実行時の検出基準として十分具体的か確認する
  - 「テストが存在しない」: 具体的で検出可能
  - 「テストが常に失敗している」: 具体的で検出可能
  - 「テスト実行に他のテストの成功が必要（依存あり）」: 具体的で検出可能
  - 「カバレッジが50%未満」: 具体的で検出可能
  - 「モックが使われていない箇所がある」: やや曖昧（どの箇所にモックが必要？）
  - 「アサーションが曖昧（例: assertTrue のみ）」: 具体例により検出可能
  - 「一部のエッジケースにテストがない」: やや曖昧（どの程度の欠落が許容されるか）
  - 「テストの実行時間が長い（5秒以上）」: 具体的で検出可能
- [x] 深刻度区分（重大/中/軽微）が問題バンクから推測可能か確認する
  - 重大: テスト不在、テスト破綻、テスト依存（テスト体制の根本的問題）
  - 中: カバレッジ不足、モック未使用、曖昧なアサーション（テスト品質の問題）
  - 軽微: 一部のエッジケース欠如、実行時間（改善の余地）
  - 推測可能

### Phase 4: 報告作成
- [x] 重大な問題を優先順にリストアップする（AIの動作に大きなブレが生じるもの）
- [x] 改善提案を具体的な代替表現とともに記述する
- [x] 良い点（明確で一貫性のある箇所）を確認事項として記録する

## 出力

### 明確性批評結果

#### 重大な問題（AIの動作に大きなブレが生じる）
- [スコープと問題バンクの不整合]: 評価スコープは「主要な機能にテストがあるか」（主観的）と記載しているが、問題バンクには「カバレッジが50%未満（中）」という数値基準があり、不整合 → 評価スコープを「機能のカバレッジが50%以上か」に修正、または問題バンクを「主要機能（公開API、重要ビジネスロジック）にテストがない」に修正
- [評価スコープ/テストカバレッジ]: 「主要な機能」の定義が不明 → 「公開API、重要ビジネスロジック（データ処理、認証、決済等のコア機能）」と具体化
- [評価スコープ/テスト品質]: 「モックやスタブが適切に使われているか」の「適切」の基準が不明 → 「外部依存（API、データベース、ファイルシステム）を持つテストでモック/スタブが使用されているか」
- [境界ケースの曖昧性]: 「カバレッジが50%未満は中」だが、49%と51%の境界でのAI判断が分かれる可能性、かつ「主要な機能のみカバー（例: 60%）だが主要機能外はカバー不足」のケースの扱いが不明 → 「カバレッジ50%未満は中」かつ「主要機能（定義が必要）のカバレッジが80%未満は中」等の複合基準を明示

#### 改善提案
- [問題バンク/中]: 「モックが使われていない箇所がある」 → 「外部依存（API、データベース、ファイルシステム）を持つテストの50%以上でモックが未使用」
- [問題バンク/軽微]: 「一部のエッジケースにテストがない」と評価スコープの「エッジケースのテストがあるか」の関係が曖昧 → 「識別可能なエッジケース（null、空配列、境界値、エラーケース）の50%以上にテストがない（軽微）」と具体化
- [評価スコープ/テストカバレッジ]: 「エッジケースのテストがあるか」 → 「主要機能のエッジケース（null、空配列、境界値、エラーケース）にテストがあるか」

#### 確認（良い点）
- 問題バンクに「カバレッジ50%未満」「テストの実行時間が5秒以上」等の具体的な数値基準があり、これらは検出可能
- 「テストが常に失敗している」「テスト実行に他のテストの成功が必要」等の具体的問題パターンは明確で検出可能
- 「アサーションが具体的か（曖昧な assertTrue ではなく、assertEqual 等）」は具体例により判断基準が明確
- 「例: assertTrue のみ」のような具体例がAI判断を補助している
- 「テストが定期的に実行される仕組みがあるか（CI 設定を確認）」はカッコ内の補足により検出方法が明確
- スコープ外が「パフォーマンステスト」「E2Eテストの詳細なシナリオ設計」と明確に定義されている
- 深刻度の区分が論理的（テスト体制の根本的問題が重大、テスト品質の問題が中、改善の余地が軽微）
