# T03 Evaluation Result

## Test Scenario
Boundary Case Ambiguity

## Execution

### Phase 1: 評価スコープ分析
- [x] 各評価スコープ項目を1つずつ読み、主観的表現（「適切」「十分」「妥当」等）をマークする
  - 「変数名・関数名が意味を表しているか」 → やや曖昧だが「意味を表す」は比較的判断可能
  - 「複雑なロジックにコメントがあるか」 → 「複雑」をマーク
  - 「ネストが深すぎないか（3階層以内を推奨）」 → 具体的基準あり
  - 「関数が単一責任を守っているか」 → やや抽象的だが設計原則として判断可能
  - 「重複コードが適度に削減されているか（完全なDRY原則ではなく、バランスを考慮）」 → 「適度」「バランス」をマーク
  - 「テストコードがある場合、カバレッジが十分か」 → 「十分」をマーク
  - 「型安全性が高い設計」 → 「高い」をマーク
  - 「グローバル変数の過度な使用」 → 「過度」をマーク
- [x] マークした表現それぞれに対し、「複数AIが同じ基準で判定できるか」を検証する
  - 「適度に削減」「バランスを考慮」: AI間で判断が大きく異なる可能性が高い
  - 「十分なカバレッジ」: 数値基準がなく一意に判定不可
  - 「高い設計」: 何を基準に「高い」と判断するか不明
  - 「過度な使用」: グローバル変数が何個から「過度」か不明
- [x] 曖昧な項目について、具体的な代替表現を考案する
  - 実施（Phase 4で詳述）

### Phase 2: 動作一貫性テスト
- [x] 各スコープ項目単体で「AIに何を確認させるか」を1文で述べられるかテストする
  - 「変数名・関数名が意味を表しているか」 → 「変数名が処理内容を推測可能にしているか確認する」（おおむね可能）
  - 「複雑なロジックにコメントがあるか」 → 「複雑」の基準が不明（ネスト3階層以上？サイクロマティック複雑度10以上？）
  - 「ネストが深すぎないか（3階層以内を推奨）」 → 「ネストが3階層以内か確認する」（可能）
  - 「重複コードが適度に削減されているか」 → 「適度」の基準が不明（重複何行から問題？）
  - 「テストコードがある場合、カバレッジが十分か」 → 「十分」の基準が不明（50%？ 80%？）
  - 「型安全性が高い設計」 → 「高い」の基準が不明（型ヒント100%使用？型エラーゼロ？）
- [x] ボーナス/ペナルティ判定指針の境界ケースを3つ挙げ、判定が一意に決まるか確認する
  - 境界ケース1: TypeScriptで型ヒントが80%のコードは「型安全性が高い」か？ → 判定不可（基準がない）
  - 境界ケース2: グローバル変数が3個使用されている場合、「過度な使用」か？ → 判定不可（基準がない）
  - 境界ケース3: Pythonで型ヒントがない場合、ペナルティ対象か？ → 判定不可（「型安全性が高い」の定義が不明確）
- [x] スコープ外項目について「なぜスコープ外か」の根拠が明確か確認する
  - 「パフォーマンス最適化」: コード品質と明確に区別可能
  - 「特定のコーディング規約（チーム固有のルール）」: 一般的な可読性・保守性基準と区別可能

### Phase 3: 実行可能性確認
- [x] 各スコープ項目が「問題パターン」として機能するか検証する（抽象的すぎないか）
  - 「ネストが深すぎないか」: 問題パターンとして機能する（ネスト階層を数えるだけ）
  - 「重複コードが適度に削減」: 抽象的（具体的な検出基準がない）
  - 「カバレッジが十分か」: 抽象的（数値目標がない）
- [x] 問題バンクの例が、AI実行時の検出基準として十分具体的か確認する
  - 「関数が200行を超える」: 具体的で検出可能
  - 「テストが全く存在しない」: 具体的で検出可能
  - 「ネストが4-5階層」: 具体的で検出可能
  - 「一部に重複コードがある」: やや曖昧（何行以上の重複？何箇所？）
  - 「変数名が1文字（ただしループカウンタを除く）」: 具体的だが例外処理の判断が必要
- [x] 深刻度区分（重大/中/軽微）が問題バンクから推測可能か確認する
  - 重大: 関数サイズ・テスト欠如（保守性に重大な影響）
  - 中: ネスト深度・重複コード（可読性・保守性に中程度の影響）
  - 軽微: 変数名の問題（局所的な影響）
  - 推測可能

### Phase 4: 報告作成
- [x] 重大な問題を優先順にリストアップする（AIの動作に大きなブレが生じるもの）
- [x] 改善提案を具体的な代替表現とともに記述する
- [x] 良い点（明確で一貫性のある箇所）を確認事項として記録する

## 出力

### 明確性批評結果

#### 重大な問題（AIの動作に大きなブレが生じる）
- [評価スコープ/可読性]: 「ネストが深すぎないか（3階層以内を推奨）」と問題バンクの「ネストが4-5階層（中）」の境界が曖昧 → 「ネストが4階層以上は問題」と明示するか、「3階層超過は中程度問題」と評価スコープを修正
- [評価スコープ/保守性]: 「重複コードが適度に削減されているか（完全なDRY原則ではなく、バランスを考慮）」の「適度」「バランス」の基準が不明 → 「同一処理が10行以上かつ2箇所以上で重複している場合は削減対象。ただし、5行未満の重複や文脈が異なる場合は許容」
- [評価スコープ/保守性]: 「テストコードがある場合、カバレッジが十分か」の「十分」の基準が不明 → 「主要な機能（公開API、重要ビジネスロジック）のカバレッジが80%以上」
- [ボーナス/ペナルティ]: 「型安全性が高い設計」の「高い」の基準が不明 → 「TypeScriptまたはPython型ヒントが全関数で使用されている、かつ型エラーがゼロ」
- [ボーナス/ペナルティ]: 「グローバル変数の過度な使用」の「過度」の基準が不明 → 「グローバル変数が5個以上、またはグローバル変数が複数箇所から変更される」

#### 改善提案
- [評価スコープ/可読性]: 「複雑なロジックにコメントがあるか」 → 「サイクロマティック複雑度10以上の関数、またはネスト3階層以上の処理にコメントがあるか」
- [問題バンク/中]: 「一部に重複コードがある」 → 「同一処理が10行以上かつ2箇所で重複している」
- [条件付き基準]: 「テストコードがある場合」という条件分岐が、AIの判断を「テストがある」「テストがない」で分岐させる。「テストがない場合は別の問題（重大）として検出される」ことを明記するか、無条件の基準に変更する

#### 確認（良い点）
- 「関数が200行を超える」「テストが全く存在しない」「ネストが4-5階層」等の数値基準は明確で検出可能
- 「変数名が1文字（ただしループカウンタを除く）」は具体的で、例外も明示されている（ただしAI間での「ループカウンタ」の判断が一致するか要確認）
- スコープ外が「パフォーマンス最適化」「チーム固有のルール」と明確に区別されている
- 深刻度の区分（関数サイズ・テスト欠如が重大、ネスト・重複が中、変数名が軽微）は影響度から推測可能
