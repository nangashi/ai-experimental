# T03 Evaluation Result

## Phase 1: 評価スコープ分析

### 主観的表現のマーク
- "意味を表しているか" → 比較的明確
- "複雑なロジック" → 複雑さの定義なし
- "ネストが深すぎないか（3階層以内を推奨）" → 推奨だが強制ではない（境界の曖昧さ）
- "単一責任を守っているか" → 単一責任の判断基準なし
- "適度に削減されているか（完全なDRY原則ではなく、バランスを考慮）" → 「適度」「バランス」が曖昧
- "カバレッジが十分か" → 十分性の基準なし
- "型安全性が高い設計" → 高さの基準なし
- "グローバル変数の過度な使用" → 過度の定義なし

### 複数AI判定の検証
- "適度に削減"、"バランスを考慮"、"十分なカバレッジ"は、AI間で判断が大きく分かれる
- "3階層以内を推奨"と"4-5階層は中程度問題"の間（ちょうど3階層や4階層）の判断が不明確

### 代替表現
- "複雑なロジック" → "ネストが3階層以上、または分岐が5個以上含まれるロジック"
- "適度に削減されているか" → "3箇所以上で同一処理が繰り返されている場合は関数化されているか（ただし2箇所以下は許容）"
- "カバレッジが十分か" → "主要な分岐（if/else、switch）の80%以上がテストされているか"
- "型安全性が高い設計" → "パブリックAPIのすべての引数と戻り値に型注釈があるか"
- "グローバル変数の過度な使用" → "グローバル変数が3個以上、または複数のモジュールから変更されている"

## Phase 2: 動作一貫性テスト

### 各スコープ項目の確認内容
- "変数名・関数名が意味を表しているか" → "短縮形でない英単語を使用し、処理内容を推測可能な命名をしているか確認する"（比較的明確）
- "複雑なロジックにコメントがあるか" → 一意に述べられない（複雑さの定義なし）
- "ネストが深すぎないか" → "3階層を超えるネストがないか確認する"（ただし推奨なので3階層ちょうどの判断が曖昧）
- "関数が単一責任を守っているか" → 一意に述べられない（単一責任の判断基準なし）
- "重複コードが適度に削減されているか" → 一意に述べられない（適度の定義なし）
- "カバレッジが十分か" → 一意に述べられない（十分の基準なし）

### ボーナス/ペナルティの境界ケース
- "型安全性が高い設計" → ボーナス判定の境界が不明（一部の関数に型注釈があればボーナス? 全関数に必要?）
- "グローバル変数の過度な使用" → ペナルティ判定の境界が不明（1個はOK? 2個は? 3個から過度?）
- 境界ケース1: グローバル変数2個の場合 → 判定が分かれる可能性
- 境界ケース2: 型注釈が70%の関数にある場合 → 「高い」と判断するか否か不明
- 境界ケース3: ネストがちょうど3階層の場合 → 「推奨以内」だが問題バンクでは4-5階層が中程度問題。3階層は問題なしか?

### スコープ外の判断明確性
- "パフォーマンス最適化" → 明確にスコープ外と判断可能
- "特定のコーディング規約（チーム固有のルール）" → 明確にスコープ外と判断可能

## Phase 3: 実行可能性確認

### 問題パターンとしての機能性
- "変数名が意味を表す"、"ネスト3階層以内"、"関数が200行以下" → 検出可能
- "単一責任"、"適度なDRY"、"十分なカバレッジ" → 抽象的で検出困難

### 問題バンクの具体性
- 重大: "関数が200行を超える" → 明確
- 重大: "テストが全く存在しない" → 明確
- 中: "ネストが4-5階層" → 明確
- 中: "一部に重複コードがある" → 「一部」の範囲が不明（1箇所? 3箇所? 10箇所?）
- 軽微: "変数名が1文字（ただしループカウンタを除く）" → 例外処理が明確で良い

### 深刻度区分の推測可能性
数値基準がある項目（200行、4-5階層）は推測可能だが、「適度なDRY」等の主観的項目は推測困難。

## Phase 4: 報告作成

### 明確性批評結果

#### 重大な問題（AIの動作に大きなブレが生じる）
- [評価スコープ「ネスト3階層以内を推奨」と問題バンク「4-5階層は中」の境界]: ちょうど3階層、または4階層の場合の判定が曖昧。推奨ラインと問題ラインの間にグレーゾーンがある → "ネストが4階層以上は問題（中程度）、3階層以下を推奨"と明記
- [評価スコープ「適度に削減」「バランスを考慮」]: DRY原則の適用度合いの判断基準が全くなく、AI間で判断が大きく分かれる → "3箇所以上で同一処理が繰り返される場合は関数化されているか"等の具体基準を追加
- [評価スコープ「カバレッジが十分か」]: 条件付き基準（テストコードがある場合）だが、十分性の定義がなくAI判断が分岐する → "主要な分岐の80%以上がテストされているか"等の数値基準を追加
- [ボーナス/ペナルティ「型安全性が高い」「過度な使用」]: 高さ・過度さの判定基準がなく、境界ケースでAI判断が一致しない → "パブリックAPIの全ての引数に型注釈がある"、"グローバル変数が3個以上"等の具体基準を追加

#### 改善提案
- [問題バンク「一部に重複コードがある」]: 「一部」の範囲が不明 → "3箇所以上で同一の10行以上のコードブロックが繰り返される"等の具体化
- [評価スコープ「複雑なロジック」]: 複雑さの定義がない → "ネストが3階層以上、または分岐が5個以上"等の明確化
- [評価スコープ「単一責任を守っているか」]: SRPの判断基準が抽象的 → "1つの関数が複数の異なるデータソースにアクセスしていないか"等の検出可能なパターンに置換

#### 確認（良い点）
- 数値基準（200行、3階層、4-5階層）が明示され、これらの項目は境界ケースでも判断が比較的一致する
- "ループカウンタを除く"という例外処理が明記され、AI判断の一貫性を高めている
- スコープ外が明確に定義されている
