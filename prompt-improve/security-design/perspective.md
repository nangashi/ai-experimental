# 観点定義: セキュリティ（設計レビュー）

## 概要
設計書をアーキテクチャ・設計レベルで評価し、セキュリティ上の問題点や不足している対策を特定する。脅威モデリング、認証・認可設計、データ保護、入力検証、インフラセキュリティの観点から、潜在的なセキュリティリスクと対策の欠如を検出する。

## 評価スコープ
- 脅威モデリング（設計書の各コンポーネントに対し、STRIDE（Spoofing: なりすまし、Tampering: 改ざん、Repudiation: 否認、Information Disclosure: 情報漏洩、DoS: サービス拒否、Elevation of Privilege: 権限昇格）の6脅威カテゴリそれぞれへの対策の有無を確認する。各脅威に対する代表的なチェック項目: S=認証メカニズム、T=データ完全性検証、R=監査ログ、I=データ分類・暗号化、D=レート制限・リソース制限、E=認可チェック）
- 認証・認可設計（認証フローが設計されているか、認可モデル（RBAC/ABAC等）の選定が適切か、APIアクセス制御とセッション管理の設計にセキュリティ上の問題がないかを確認する）
- データ保護（機密データの保存・転送時の保護方式（暗号化アルゴリズム、鍵管理）が適切か、PII分類・保持期間・削除方針の設計が存在するか、プライバシー要件への対応が考慮されているかを確認する）
- 入力検証・攻撃防御（外部入力の検証方針が設計されているか、インジェクション攻撃（SQL/NoSQL/コマンド/XSS）への対策が存在するか、出力エスケーピング・CORS/オリジン制御・CSRF対策が設計されているか、ファイルアップロード等のリスク領域への制限が設計されているかを確認する）
- インフラ・依存関係・監査（サードパーティライブラリの脆弱性管理方針が存在するか、シークレット管理（環境変数・Vault等）の設計が適切か、デプロイメント時のシークレット漏洩防止・権限制御が考慮されているか、重要操作のセキュリティ監査ログ（認証失敗、権限変更、機密データアクセス等のセキュリティイベント記録）の設計が存在するかを確認する）

## スコープ外
- コードレベルの脆弱性（具体的なコード行の問題）→ security-code で扱う
- 偶発的障害への対応（サーキットブレーカー、べき等性、ロールバック計画、段階的展開）→ reliability で扱う
- 一般的なアプリケーションロギング設計（ログレベル、構造化ログ、トレーシング）→ structural-quality で扱う
- 正常時のパフォーマンス最適化（セキュリティに関連しない純粋なパフォーマンス問題）→ performance で扱う
- コーディング規約・命名規則 → consistency で扱う

## ボーナス/ペナルティの判定指針
- **ボーナス対象**: 設計書に明示されていないが暗黙的に存在するセキュリティリスクの指摘（例: 「監査ログ設計が欠如」「PII分類方針が未定義」「CORS設定が未定義」）
- **ペナルティ対象**: パフォーマンス・コーディングスタイル・一般的なエラーハンドリングの指摘（セキュリティに無関係）
- **判断に迷うケース**: (a) レート制限: 悪意あるアクセス制御（ブルートフォース防止、API濫用防止）は security スコープ内、偶発的障害保護（バックプレッシャー）は reliability。(b) DoS耐性: リソース制限・認証前のレート制限は security、正常時の効率化は performance。(c) デプロイメント: シークレット漏洩防止・権限制御は security、ロールバック計画・段階的展開は reliability
