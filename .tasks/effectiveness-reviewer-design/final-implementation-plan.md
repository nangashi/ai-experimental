# 有効性レビューアー追加の実装計画（最終版）

## レビューフィードバック対応サマリ

| 指摘 | 対応 |
|------|------|
| 項目E「代替アプローチ」はAI知識依存で再現性低 | 削除 |
| 項目C「判定ロジック」はアーキテクチャレビューアーと重複 | 削除 |
| 指摘がアクショナブルでない | 項目Aをデータフロー追跡ベースに具体化 |
| 出力フォーマットが他レビューアーと不整合 | 3段構造に統一、サマリテーブルは良い点の後に配置 |
| エッジケース範囲が無制限 | 3パターンに限定（最小構成/大規模構成/必須セクション欠落） |
| 項目B判定が主観的 | 変数名・フィールド名照合等3つの具体的基準に変更 |
| コンフリクトパターンが不足 | 4パターンに拡張 |
| 評価項目が多すぎる | 5項目→3項目（A.目的-手段整合性, B.データフロー, C.エッジケース） |
| 返答長制限 | 重大3件/改善5件に削減（他レビューアーの5/7より少なく焦点を絞る） |
| サマリテーブルの判定基準が不明確 | 高/中/低の判定基準を明示（高=重大0件, 中=改善のみ, 低=重大1件以上） |

## 変更対象ファイル

| # | ファイル | 変更種別 | 変更概要 |
|---|---------|---------|---------|
| 1 | `templates/reviewer-effectiveness.md` | 新規作成 | 有効性レビューアーテンプレート（3評価項目: 目的-手段整合性, データフロー, エッジケース） |
| 2 | `quality-criteria.md` | 修正 | 「5. 有効性・目的達成度」セクション追加 |
| 3 | `SKILL.md` | 修正 | Phase 2: 5件並列、Phase 3: コンフリクトパターン追加、Phase 7: 観点数更新 |

## 変更詳細

### 1. templates/reviewer-effectiveness.md（新規作成）
- final-template.md の内容をそのまま配置
- 評価項目: A.目的−手段の整合性, B.フェーズ間データフロー妥当性, C.エッジケース耐性
- 出力: 他レビューアーと同じ3段構造 + 末尾にサマリテーブル

### 2. quality-criteria.md（修正）
「4. アーキテクチャ・パターン」セクションの後に追加:
```
### 5. 有効性・目的達成度
- スキルの宣言された目的に対して、各フェーズの出力が後続フェーズまたは最終成果物に使用されていること
- フェーズ間のデータフローに情報欠落・暗黙的依存がないこと
- 最小構成・大規模構成・必須セクション欠落時にワークフローが適切に動作またはエラー通知すること
```

### 3. SKILL.md（修正）

#### Phase 2 の変更
- 説明文: `4つの品質観点` → `5つの品質観点（安定性・効率性・UX・アーキテクチャ・有効性）`
- レビュータスク数: `4件` → `5件`
- レビューアーリスト: `stability, efficiency, ux, architecture` → `stability, efficiency, ux, architecture, effectiveness`
- テンプレートテーブルに1行追加:
  | `reviewer-effectiveness.md` | `{work_dir}/review-effectiveness.md` |
- 並列起動を5件に変更
- `レビュー完了: {成功数}/4件` → `レビュー完了: {成功数}/5件`
- 成功数の最低基準: `成功数 ≥3` → `成功数 ≥4`、`成功数 ≤2` → `成功数 ≤3`

#### Phase 3 の変更
想定コンフリクトパターンに以下を追加:
```
- 有効性「フェーズを追加すべき」↔ 効率性「フェーズが多すぎる」→ データフロー不全（情報欠落）が存在する場合は有効性優先、単なる情報冗長の場合は効率性優先
- 有効性「判定ロジック変更」↔ 安定性「判定フォーマット維持」→ 出力形式の維持が目的達成に影響しないなら安定性優先
- 有効性「エッジケース対応追加」↔ UX「確認ポイント追加」→ エッジケースが致命的エラーを引き起こすなら有効性優先
- 有効性「フェーズ追加」↔ アーキテクチャ「テンプレート外部化が必要」→ 両立可能（フェーズ追加時にテンプレート外部化も実施）
```

#### Phase 7 の変更
- `レビュー観点: 4 (stability, efficiency, ux, architecture)` → `レビュー観点: 5 (stability, efficiency, ux, architecture, effectiveness)`

## 実装順序
1. `quality-criteria.md` — 品質基準定義追加（他ファイルが参照）
2. `templates/reviewer-effectiveness.md` — テンプレート新規作成
3. `SKILL.md` — 親ワークフローの統合変更
