# プロジェクト設計規約

> 本ファイルはAIの設計・実装時にガードレールとして参照される蓄積型の規約集である。
> 記載対象は「AIがコードだけからは推測できず、違反時の影響が大きいプロジェクト固有のルール」に限定する。
>
> **記載しないもの:**
> - linter/formatter で自動検出可能な規約（命名規則、フォーマット等）
> - 一般的な設計原則（SOLID、DRY等のAIが学習データから既知のもの）
> - Issue 固有のドメイン知識（調査レポートで扱う）

## レイヤー責務ルール

<!-- 各レイヤーが担う責務と、配置してはならないロジックの種類を記載する -->
<!-- 例: 「コントローラはリクエストの受付とレスポンス返却に徹し、ビジネスロジックのバリデーションはUsecase層に実装する」 -->

## 依存方向ルール

<!-- 許可される依存方向と、禁止される依存方向を記載する -->
<!-- 例: 「ドメイン層はインフラ層に依存してはならない。外部サービス呼び出しはインタフェースを介して行う」 -->

## 再利用すべき既存コンポーネント

<!-- 共通ユーティリティ・ヘルパーの一覧。新規実装前に必ず確認する -->
<!-- 例: 「日付フォーマットにはDateTimeHelper.format()を使用する」「エラーレスポンスはApiError.from()で生成する」 -->

## パフォーマンスパターン

<!-- プロジェクト固有のデータアクセスパターン・バッチサイズ等を記載する -->
<!-- 例: 「関連テーブルへのアクセスはeager loadingを使い、ループ内でのクエリ発行を禁止する」「一括処理のバッチサイズは1000件」 -->

## セキュリティ実装パターン

<!-- 認証・認可の実装方針、機密データの取り扱いパターンを記載する -->
<!-- 例: 「認証はMiddleware Xで処理済み。個別エンドポイントで認証チェックを実装しない」「PII項目はLogSanitizer経由でログ出力する」 -->
