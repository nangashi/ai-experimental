# ケーススタディ: スキル改善カテゴリの適用検証

## 検証概要

brainstorm.md で洗い出した8カテゴリ・35観点の改善フレームワークを、性質の異なる4つの既存スキルに適用し、「スキルの性質に応じた改善カテゴリ選択 → 改善ポイント検証 → 効果評価」の流れが実際に機能するか検証する。

### 対象スキル

| スキル | 性質分類 | 規模 | 特徴 |
|-------|---------|------|------|
| agent_bench | 反復最適化型 | 大（7Phase, 多数サブエージェント） | A/Bテスト、知見蓄積、毎ラウンドテスト生成 |
| learn | 対話型・軽量 | 小（3Phase, サブエージェント1回） | 知見抽出、ユーザー確認ループ、CLAUDE.md更新 |
| skill_audit | 多観点レビュー型 | 大（8Phase, 5並列レビュー） | コンフリクト解決、個別承認、検証ループ |
| issue_design | 外部API連携ワークフロー型 | 大（5Phase, 状態マシン） | GitHub連携、レジューム、設計レビュー |

---

## 検証方法

1. スキルの性質を分析し、最も改善インパクトが大きいと予想されるカテゴリを3つ選定
2. 各カテゴリから具体的な改善案を導出
3. 各改善案について実現可能性・期待効果・リスクを評価
4. 総合評価として「このフレームワークで有用な改善が生成できたか」を判定

---

## Case 1: agent_bench（反復最適化型）

### スキルの性質分析

- **主機能**: エージェント定義の構造バリアントを反復的にA/Bテストして最適化
- **コスト構造**: Phase 3 で (baseline + variants) × 2 runs の並列評価。Phase 4 で variants 数の並列採点。1ラウンドで最低 8+ サブエージェント呼び出し
- **ボトルネック**: トークンコストと実行時間の大半が Phase 3-4 に集中
- **リスク**: 過剰最適化（テスト文書への過学習）、収束しない振動

### 選定カテゴリ

| 優先 | カテゴリ | 選定理由 |
|------|---------|---------|
| 1 | **C: 効率** | 1ラウンドのコストが非常に高い。同じ品質をより少ないリソースで達成できれば大きなインパクト |
| 2 | **F: 安全性・信頼性** | 反復ループの収束性と過剰最適化回避が品質に直結 |
| 3 | **A: 目的達成** | テスト文書の品質と採点の再現性がベンチマーク結果の信頼性を決定 |

### 改善案の導出と評価

#### C-1: 適応的Run数（効率 > トークンコスト）

**現状**: 全プロンプトを一律2回ずつ実行している（SD算出のため）。
**改善案**: 1回目の結果でバリアント間に明確な差がある場合（例: スコア差 > 3pt）、2回目を省略する。差が小さい場合のみ2回目を実行して統計的に判定する。
**期待効果**: 明確に勝敗がつくケースでは Phase 3 のサブエージェント数を最大50%削減。
**実現可能性**: 中。Phase 3 の並列実行を逐次（1st run → 判定 → 必要なら2nd run）に変更する必要があり、レイテンシとのトレードオフがある。
**リスク**: 1回だけだと偶然の外れ値で誤判定する可能性。閾値の設定が難しい。
**評価**: **改善見込みあり（条件付き）**。コスト削減効果は高いが、判定精度低下とのバランスが必要。閾値はknowledge.mdの過去データから学習できる可能性がある。

#### C-4: サブエージェントモデルの使い分け（効率 > サブエージェント効率）

**現状**: Phase 3 の評価実行は sonnet で全て実行。実際のレビューアーエージェントの動作をシミュレートする目的だが、テスト文書のレビューという単純なタスク。
**改善案**: ベースラインのみ sonnet、バリアント評価は haiku で実行して差分比較する。あるいは Phase 2（テスト文書生成）を haiku に降格。
**期待効果**: Phase 3 のコストを 30-40% 削減可能。
**実現可能性**: 低〜中。Phase 3 はレビューアーエージェントの実際の動作をテストしているため、モデルを変えると評価の意味が変わる。Phase 2（テスト文書生成）の方が降格余地がある。
**リスク**: モデル変更で評価結果の比較可能性が損なわれる。haiku の検出能力が sonnet と乖離する場合、ベンチマーク結果が実際の性能を反映しなくなる。
**評価**: **要慎重検討**。Phase 3 への適用は本末転倒になるリスクが高い。Phase 2, 6 への部分適用は有望。

#### F-3: 過剰最適化検出（安全性 > 過剰最適化の回避）

**現状**: テスト文書は毎ラウンド新規生成されるため、特定テストへの過学習リスクは低い設計。ただし perspective（評価観点）が固定のため、perspective の問題バンクに特化した最適化が起きうる。
**改善案**: 3ラウンド以上続けた時点で、過去に使ったテスト文書とは異なる構造のテスト文書（知見蓄積で言及されていないパターン）を1つ追加し、そのスコアがベースラインから大幅に劣化していないか確認する「汎化チェック」を導入する。
**期待効果**: 過剰最適化の早期検出。ユーザーに「この最適化は特定パターンに過適合している可能性」と警告できる。
**実現可能性**: 中。テスト文書ガイドに「汎化チェック用テスト」のカテゴリを追加する必要がある。追加のサブエージェント1-2回分のコスト。
**リスク**: 汎化チェック自体のコストが改善効果を上回る可能性。
**評価**: **改善見込みあり**。ただし頻度は毎ラウンドではなく3ラウンドに1回程度が適切。

#### F-4: 収束の明確な停止条件（安全性 > 収束性）

**現状**: 収束判定は Phase 5 のサブエージェントに委ねられており、「収束の可能性あり」の付記がされるだけ。ユーザーが明示的に「終了」を選択しない限り無限に続く。
**改善案**: 定量的な停止条件を定義する。例: 「直近2ラウンドでベスト→ベースライン改善が 0.5pt 未満」or「累計5ラウンド到達」で自動的に停止を推奨する。
**期待効果**: 無意味な追加ラウンドによるコスト浪費を防止。
**実現可能性**: 高。knowledge.md の既存データを使って判定可能。SKILL.md への変更は小さい。
**リスク**: 低。停止は「推奨」であり、ユーザーが続行を選択する自由は残る。
**評価**: **改善見込み高い**。最も投資対効果が高い改善。

#### A-7: テスト文書の品質安定化（目的達成 > 再現性）

**現状**: テスト文書は毎ラウンド新規生成される。テスト文書の品質にばらつきがあると、同じプロンプトでもラウンドごとにスコアが大きく変動し、比較の信頼性が下がる。
**改善案**: テスト文書生成後に、「適切な難易度バランスか」「全問題カテゴリをカバーしているか」の簡易検証ステップを追加する。
**期待効果**: ラウンド間のスコア変動が減少し、プロンプト改善の効果がより正確に測定できる。
**実現可能性**: 中。検証サブエージェント1回分の追加コスト。
**リスク**: 検証自体にコストがかかる。テスト文書の多様性を制約しすぎると、別の形の過剰最適化につながる。
**評価**: **改善見込みあり（条件付き）**。コスト増と精度向上のバランス次第。

### Case 1 小括

| 改善案 | カテゴリ | 評価 | インパクト | 実現コスト |
|-------|---------|------|----------|----------|
| 適応的Run数 | C-1 | 条件付き有望 | 高（コスト50%削減） | 中 |
| モデル使い分け | C-4 | 要慎重検討 | 中 | 低 |
| 過剰最適化検出 | F-3 | 有望 | 中 | 中 |
| 収束停止条件 | F-4 | **高確度で有望** | 高 | 低 |
| テスト品質安定化 | A-7 | 条件付き有望 | 中 | 中 |

**フレームワーク有効性**: 高。効率（C）と安全性（F）のカテゴリから、コスト構造が重い反復最適化型スキルに的確な改善案が導出された。特に F-4（収束停止条件）は低コストで高インパクト。

---

## Case 2: learn（対話型・軽量）

### スキルの性質分析

- **主機能**: 対話から知見を抽出し、構造化してknowledgeファイルに保存
- **コスト構造**: 軽量。サブエージェント使用は批判的レビュー（既存ファイル更新時）の1回のみ
- **ボトルネック**: 知見の抽出品質（非自明な知見を見つけられるか）とユーザー確認の回数
- **リスク**: ノイズの蓄積（不要な知見の保存）、既存知見との重複

### 選定カテゴリ

| 優先 | カテゴリ | 選定理由 |
|------|---------|---------|
| 1 | **A: 目的達成** | 知見の抽出品質と記述品質がスキルの価値の核心 |
| 2 | **B: ユーザー価値** | 対話的なスキルのため、ユーザー体験の質が直接的に影響 |
| 3 | **D: 構造・設計品質** | シンプルなスキルだが、記述原則と抽出基準の明確さが品質を左右 |

### 改善案の導出と評価

#### A-2: 知見の正確性向上（目的達成 > 正確性）

**現状**: 抽出基準に「確度が高い」条件があるが、これはスキル実行者（LLM自身）の判断に依存している。LLMが対話中の仮説的な議論と確定した知見を区別できないケースがある。
**改善案**: 知見抽出時に、各知見の「根拠タイプ」を明示させる（実験結果 / 定量データ / ユーザー確認済み / 推論のみ）。推論のみの知見は候補段階でユーザーに警告付きで提示する。
**期待効果**: 確度の低い知見が混入するリスクを低減。
**実現可能性**: 高。Phase 1 Step 2 の抽出ステップに根拠タイプの付記を追加するだけ。
**リスク**: 低。ユーザー確認で最終的にフィルタできる。
**評価**: **改善見込み高い**。低コストで知見品質を向上できる。

#### A-4: 既存知見との重複検出の強化（目的達成 > 精度）

**現状**: Phase 1 Step 4 で既存knowledgeとの照合を行っているが、「実質的に同じ知見」の判定がLLMの判断に依存しており、表現が異なるだけの重複知見が蓄積しうる。
**改善案**: 照合時に、既存knowledgeの各知見と新規知見を1対1で比較させ、「同一」「関連するが異なる」「無関連」の3段階で分類させる。「関連するが異なる」の場合はユーザーに統合か別立てかを確認する。
**期待効果**: 重複蓄積の防止。知見ベースの肥大化抑制。
**実現可能性**: 中。既存knowledgeの量が増えると照合のコンテキストコストが増大する。
**リスク**: 既存knowledgeが多い場合、全件照合のコストが高くなる。
**評価**: **改善見込みあり（条件付き）**。スケーラビリティの問題がある。

#### B-5: 成果物の即時利用可能性（ユーザー価値 > 利用しやすさ）

**現状**: 保存されたknowledgeファイルは CLAUDE.md の use-when テーブルで参照されるが、実際に次のセッションで適切に読み込まれるかは保証されていない。
**改善案**: Phase 3 完了後に、「保存された知見が実際に参照されるシナリオ」を1つ提示する。例: 「次に○○の作業をする際、このknowledgeが自動で参照されます」。さらに、use-when の記述が十分に具体的かをセルフチェックするステップを追加する。
**期待効果**: ユーザーが「これは本当に使われるのか」という不安を解消。use-when の品質向上。
**実現可能性**: 高。テキスト出力の追加と、use-when フィールドの簡易検証のみ。
**リスク**: 極めて低い。
**評価**: **改善見込み高い**。ほぼコストゼロで UX 改善。

#### B-1: 知見のスコープ確認（ユーザー価値 > 意図反映）

**現状**: LLMが対話から抽出した知見が、ユーザーが「保存すべき」と考えるものと一致しているかは Phase 1 の確認で担保されている。ただし、知見の「適用範囲」（この知見はどのプロジェクトでも有効か、このプロジェクト固有か）の確認がない。
**改善案**: トピック確認時に、各知見の適用スコープ（汎用 / プロジェクト固有）を明示し、ユーザーに確認する。プロジェクト固有の知見は将来プロジェクトが変わった際の無効化候補としてマークする。
**期待効果**: 知見の過剰汎化・過剰特殊化を防止。
**実現可能性**: 高。既存の確認フローに1フィールド追加するだけ。
**リスク**: 確認の手間が若干増える。
**評価**: **改善見込みあり**。ただしインパクトは中程度。

#### D-4: 記述原則の最小化（構造・設計 > 最小性）

**現状**: 記述原則セクションが詳細で、「残すべき情報」「削ってよい情報」「用語と参照」の3サブセクションがある。これらの多くはLLMが自然にやることの明示化で、スキルファイルの長さに貢献している。
**改善案**: 記述原則を「判断基準・理由・代表例は省略しない」「AIが既に知っていることは書かない」の2行に圧縮し、残りを削除する。
**期待効果**: SKILL.md の行数削減。コンテキスト消費の削減。
**実現可能性**: 高。
**リスク**: 圧縮しすぎると知見の記述品質が不安定になる可能性。特に「未定義語の禁止」「セクション間参照」は非自明なルールであり、削除すると品質低下する恐れ。
**評価**: **要慎重検討**。部分的な圧縮は有効だが、全削除はリスクあり。削除テスト（削って品質が変わるか）を実施すべき。

### Case 2 小括

| 改善案 | カテゴリ | 評価 | インパクト | 実現コスト |
|-------|---------|------|----------|----------|
| 根拠タイプ明示 | A-2 | **高確度で有望** | 中 | 低 |
| 重複検出強化 | A-4 | 条件付き有望 | 中 | 中 |
| 利用シナリオ提示 | B-5 | **高確度で有望** | 中 | 極低 |
| スコープ確認 | B-1 | 有望 | 中 | 低 |
| 記述原則圧縮 | D-4 | 要慎重検討 | 低 | 低 |

**フレームワーク有効性**: 中〜高。目的達成（A）とユーザー価値（B）から対話型スキルに適した改善案が出た。ただし、この種のスキルは元々シンプルで改善の余地が限られるため、インパクトは中程度にとどまる。

---

## Case 3: skill_audit（多観点レビュー型）

### スキルの性質分析

- **主機能**: スキルを5つの観点で並列レビューし、コンフリクト解決を経て改善を適用
- **コスト構造**: Phase 2 で5並列レビュー、Phase 3 で統合、Phase 4 で個別承認（人的コスト）、Phase 5-6 で適用・検証
- **ボトルネック**: 個別承認の人的コスト（指摘が多いと確認が大変）、レビュー品質（偽陽性が多いとユーザーの信頼を失う）
- **リスク**: レビューアー間のコンフリクトが多すぎて有用な改善が埋もれる

### 選定カテゴリ

| 優先 | カテゴリ | 選定理由 |
|------|---------|---------|
| 1 | **A: 目的達成** | レビュー品質（偽陽性の抑制、重要な問題の検出）が価値の核心 |
| 2 | **C: 効率** | 人的コスト（個別承認）とサブエージェントコストの両面で改善余地 |
| 3 | **B: ユーザー価値** | 大量の指摘の中から重要なものを見極める UX が改善の鍵 |

### 改善案の導出と評価

#### A-4: 偽陽性削減のためのプレフィルタ（目的達成 > 精度）

**現状**: Phase 3 の統合時に関連性フィルタが適用されるが、これは統合サブエージェントの判断に依存。quality-criteria.md の「報告対象外」リストは充実しているが、レビューアーがこれを十分に内在化できていない可能性がある。
**改善案**: Phase 2 のレビューアーに、各指摘に対する「確信度」を low/medium/high で付記させる。Phase 3 の統合時に low 確信度の指摘を自動除外するか、ユーザーに一括で「low確信度の指摘を含めるか」を確認する。
**期待効果**: Phase 4 の個別承認で提示される指摘数が削減され、人的コストが低下。
**実現可能性**: 高。レビューアーテンプレートへの1フィールド追加と、統合テンプレートへのフィルタロジック追加。
**リスク**: 確信度の判断自体がLLMの自己評価であり、信頼できない可能性（llm-evaluation-design.md の「信頼度スコアの鵜呑み禁止」に抵触）。
**評価**: **要慎重検討**。LLM自己評価の信頼性問題があるため、確信度ではなく「具体的な証拠の有無」（コード参照あり/推測のみ）で分類する方が安定する可能性。

#### C-5: 承認フローの効率化（効率 > 人的コスト）

**現状**: Phase 4 で全指摘を1件ずつ個別承認する。指摘が15件以上の場合、ユーザーの負担が大きい。
**改善案**: 指摘を重大度×影響度でグルーピングし、「Critical/High はすべて承認推奨」「Improvement/Low はまとめてスキップ可能」のように、グループ単位での一括判断を可能にする。個別確認は Critical/High のみ。
**期待効果**: 承認ステップ数が 50-70% 削減。
**実現可能性**: 高。Phase 4 のフロー変更のみ。
**リスク**: 中。Improvement 指摘の中にユーザーにとって重要なものが含まれる場合、一括スキップで見落とされる。
**評価**: **改善見込みあり**。ただしグルーピングの粒度設計が重要。「残りすべて承認」オプションが既にあるため、追加の価値は限定的かもしれない。

#### B-3: 指摘のインパクト可視化（ユーザー価値 > 説明可能性）

**現状**: 各指摘は重大度（critical/improvement）と影響度（high/medium/low）で分類されるが、「この指摘を放置するとどうなるか」の具体的なシナリオは提示されない。
**改善案**: 各指摘に「放置時のリスクシナリオ」を1文で追加する。例: 「この問題を放置すると、Phase 3 のサブエージェントが未定義変数を参照してエラーになります」。
**期待効果**: ユーザーが承認/スキップの判断をより迅速かつ正確に行える。
**実現可能性**: 高。レビューアーテンプレートへの出力フィールド追加。
**リスク**: 低。リスクシナリオの記述コストは最小。
**評価**: **改善見込み高い**。低コストで承認判断の質が向上する。

#### C-1: レビューアー数の適応的制御（効率 > トークンコスト）

**現状**: 常に5並列レビュー。対象スキルがシンプル（Phase 2-3のみ、テンプレートなし）の場合でも全5観点でレビューする。
**改善案**: Phase 1（構造分析）の結果に基づいて、関連性の低い観点のレビューを省略する。例: テンプレートを持たないスキルに architecture レビューは不要。外部連携がないスキルに ux レビューは限定的。
**期待効果**: シンプルなスキルに対してレビュー時間とコストを 20-40% 削減。
**実現可能性**: 中。Phase 1 の分析結果からの判定ロジック追加が必要。
**リスク**: 省略した観点にたまたま重要な問題がある場合の見落とし。
**評価**: **改善見込みあり（条件付き）**。省略は「レビューしない」ではなく「軽量レビュー」（チェックリストベース）にする方が安全。

#### A-1: 改善適用後の退行検出（目的達成 > 目的達成率）

**現状**: Phase 6 で軽量検証を行うが、これは「承認した指摘が実際に反映されたか」の確認。改善適用が新しい問題を引き起こしていないか（退行）のチェックは限定的。
**改善案**: Phase 6 の検証で、改善前のスキルに対する Phase 1 分析結果と改善後のスキルのdiffを比較し、「改善で削除された機能」「新たに追加された未定義変数参照」を自動検出する。
**期待効果**: 改善の副作用による品質低下を防止。
**実現可能性**: 中〜高。既に analysis.md（改善前の構造分析）があるので、差分比較の追加。
**リスク**: 低。検出のみで、自動修正はしない。
**評価**: **改善見込みあり**。verify-improvements テンプレートの強化で実現可能。

### Case 3 小括

| 改善案 | カテゴリ | 評価 | インパクト | 実現コスト |
|-------|---------|------|----------|----------|
| 確信度プレフィルタ | A-4 | 要慎重検討 | 高 | 低 |
| 承認フロー効率化 | C-5 | 条件付き有望 | 中 | 低 |
| インパクト可視化 | B-3 | **高確度で有望** | 中 | 極低 |
| 適応的レビューアー数 | C-1 | 条件付き有望 | 中 | 中 |
| 退行検出 | A-1 | 有望 | 中 | 中 |

**フレームワーク有効性**: 高。目的達成（A）から品質改善、効率（C）からコスト削減、ユーザー価値（B）からUX改善と、バランスの取れた改善案が導出された。

---

## Case 4: issue_design（外部API連携ワークフロー型）

### スキルの性質分析

- **主機能**: GitHub Issueを起点に要件確認 → 調査 → 設計 → レビュー → Draft PR作成
- **コスト構造**: Phase 3 で5並列設計レビュー、Phase 5 でフィードバック対応。gh CLI を多用
- **ボトルネック**: 外部API（GitHub）との連携の不安定さ、状態遷移の複雑さ、設計品質
- **リスク**: 状態破壊（state.md の不整合）、GitHub API の失敗でスキル停止

### 選定カテゴリ

| 優先 | カテゴリ | 選定理由 |
|------|---------|---------|
| 1 | **F: 安全性・信頼性** | 外部APIとの連携失敗、状態遷移の不整合がスキルの信頼性を直接脅かす |
| 2 | **A: 目的達成** | 設計品質がスキルの最終価値。レビューの有効性が設計品質を決定 |
| 3 | **H: 環境適応** | プロジェクトごとにGitHubの使い方（ブランチ戦略、レビュー文化）が異なる |

### 改善案の導出と評価

#### F-1: 状態遷移の整合性検証（安全性 > 破壊的操作の防止）

**現状**: state.md のphaseフィールドでルーティングしているが、phase以外の状態（pr_number, branch, review_loop等）との整合性チェックがない。例: phase が `draft_pr_created` なのに pr_number が未設定、というケースが起きうる。
**改善案**: Phase 0 のレジューム判定時に、phase に対する必須フィールドのバリデーションを追加する。不整合がある場合はエラーではなく「状態修復」を試みる（不足情報を gh CLI で再取得）。
**期待効果**: 手動でstate.mdを編集した場合や、前回のスキル実行が途中で中断した場合のリカバリ能力向上。
**実現可能性**: 高。Phase 0 への条件分岐追加のみ。
**リスク**: 修復ロジックが複雑化するリスク。ただし「修復不能 → エラー出力」のフォールバックは維持する。
**評価**: **改善見込み高い**。外部連携型スキルでは状態管理の堅牢性が特に重要。

#### A-5: 設計レビューの適応的深度（目的達成 > 判断品質）

**現状**: 全Issueに対して常に5観点でフルレビュー。小さなIssue（ドキュメント修正、軽微なバグ修正）でもフルレビューが走る。
**改善案**: Phase 1 の規模見積もり（S/M/L/XL）に応じてレビュー深度を調整する。S: 軽量チェック（全観点を1つのサブエージェントで実行）、M: 3観点（security, consistency, maintainability）、L/XL: 5観点フルレビュー。
**期待効果**: 小さなIssueでの実行時間とコストを 60-80% 削減。
**実現可能性**: 高。Phase 1 の出力に基づく条件分岐の追加。
**リスク**: 小さなIssueでも重要なセキュリティ問題がある場合の見落とし。
**評価**: **改善見込み高い**。規模に応じたレビュー深度の調整は合理的。security は全規模で必須とすることでリスクを緩和できる。

#### H-1: プロジェクト規約の自動検出（環境適応 > プロジェクト文脈）

**現状**: ブランチ名は `feature/issue-{issue_number}` 固定。PRテンプレートやコミットメッセージ規約はハードコード。
**改善案**: Phase 0 でプロジェクトの規約ファイル（.github/PULL_REQUEST_TEMPLATE.md, .commitlintrc, CONTRIBUTING.md 等）を検出し、それに合わせてブランチ名パターン、コミットメッセージフォーマット、PR本文テンプレートを調整する。
**期待効果**: 異なるプロジェクトで使い回せるようになる。
**実現可能性**: 中。規約ファイルの検出と解析ロジックの追加が必要。
**リスク**: 規約ファイルの形式がプロジェクトごとに異なるため、解析の信頼性が不安定。
**評価**: **改善見込みあり（条件付き）**。主要な規約（ブランチ命名、コミットメッセージ）に限定すれば実現可能。

#### F-6: GitHub API 失敗時の回復力（安全性 > 破壊的操作の防止）

**現状**: gh CLI の失敗時は基本的にスキル終了。再実行でレジューム可能だが、「どこで失敗したか」の診断は state.md の phase からしか分からない。
**改善案**: gh CLI 呼び出しごとに、コマンドと結果を `.tasks/{issue_number}/api-log.md` に記録する。失敗時は最後に成功した API 呼び出しから再開するヒントを表示する。
**期待効果**: 失敗の診断と回復が容易になる。
**実現可能性**: 中。全 gh CLI 呼び出しにロギング追加が必要。スキルの行数が増える。
**リスク**: ロギングのためのスキル複雑化。中間ファイルの増加。
**評価**: **要慎重検討**。診断容易性の改善効果は高いが、スキルの複雑化とのトレードオフ。簡易的には「最後に実行した gh コマンドと結果」を state.md に追記するだけでも十分かもしれない。

#### B-4: フェーズ間の期待値管理（ユーザー価値 > 期待値の管理）

**現状**: 各Phase開始時のテキスト出力はあるが、「全体のどこにいるか」「残りどのくらいか」の表示がない。
**改善案**: Phase 開始時に進捗インジケータ（`[Phase 2/5] 調査・ADR・設計`）を表示する。各Phase完了時に次のPhaseの予想時間と必要なユーザーアクション（あれば）を予告する。
**期待効果**: ユーザーの不安低減。離席可能なタイミングの判断が容易になる。
**実現可能性**: 高。テキスト出力の変更のみ。
**リスク**: 極めて低い。
**評価**: **改善見込み高い**。ほぼゼロコストでUX改善。

### Case 4 小括

| 改善案 | カテゴリ | 評価 | インパクト | 実現コスト |
|-------|---------|------|----------|----------|
| 状態整合性検証 | F-1 | **高確度で有望** | 高 | 低〜中 |
| 適応的レビュー深度 | A-5 | **高確度で有望** | 高 | 低 |
| プロジェクト規約検出 | H-1 | 条件付き有望 | 中 | 中 |
| API失敗回復力 | F-6 | 要慎重検討 | 中 | 中 |
| 進捗インジケータ | B-4 | **高確度で有望** | 低 | 極低 |

**フレームワーク有効性**: 高。安全性（F）から外部連携型特有の問題を特定し、環境適応（H）からポータビリティの改善を導出できた。

---

## 総合評価

### フレームワークの有効性

| 評価軸 | 結果 |
|-------|------|
| **改善案の導出力** | 高。4スキル × 3カテゴリ × 1-2案 = 計20案を生成。うち8案が「高確度で有望」 |
| **スキル性質への適応性** | 高。性質分析 → カテゴリ選定の流れで、スキルごとに異なる改善ポイントを特定できた |
| **改善案の具体性** | 中〜高。多くの案は実装レベルの具体性を持つが、一部は「方向性は正しいが設計詳細が未定」 |
| **偽陽性（無意味な改善案）率** | 低。20案中「要慎重検討」は4案のみ。明らかに無意味な案はゼロ |
| **見落とし（偽陰性）リスク** | 中。カテゴリを3つに絞る段階で、他カテゴリの有用な改善案を見逃す可能性がある |

### カテゴリ別の有効性

| カテゴリ | 適用回数 | 有望案率 | 所見 |
|---------|---------|---------|------|
| A: 目的達成 | 4スキル中3 | 高 | 最も汎用的。どのスキルにも適用可能 |
| B: ユーザー価値 | 4スキル中3 | 高 | 低コストでUX改善できる案が多い |
| C: 効率 | 4スキル中2 | 中 | コスト重のスキルには有効だが、軽量スキルには不要 |
| D: 構造・設計 | 4スキル中1 | 中 | 既にskill_auditがカバーしており、差分が少ない |
| F: 安全性 | 4スキル中2 | 高 | 反復型・外部連携型に特に有効 |
| H: 環境適応 | 4スキル中1 | 中 | 具体化が難しいが、方向性は有用 |

### 「スキルを改善するスキル」への示唆

1. **性質分類が有効**: 「反復型」「対話型」「レビュー型」「外部連携型」でカテゴリ優先度が明確に異なった。性質分類を最初のステップにすべき
2. **カテゴリ3つ選定は適切**: 8カテゴリ全てを適用すると改善案が発散しすぎる。3カテゴリに絞ることで実行可能な改善案セットが得られた
3. **「高確度で有望」案の共通パターン**:
   - **低コスト × 中インパクト** のUX改善（進捗表示、利用シナリオ提示）
   - **既存データの活用** による判定精度向上（収束停止条件、状態整合性検証）
   - **入力特性に応じた適応** によるコスト最適化（適応的Run数、適応的レビュー深度）
4. **「要慎重検討」案の共通パターン**:
   - LLMの自己評価に依存する案（確信度、品質自己チェック）
   - スキルの本質的な動作を変える案（モデル変更、原則圧縮）
5. **E（追跡・学習）と G（メタ改善）は今回のケースでは選定されなかった** が、改善スキル自体の設計にはこれらのカテゴリが重要（改善の履歴蓄積、改善パターンのクロススキル転用）

### 次のステップ候補

1. **性質分類の体系化**: スキルの性質をどう分類し、どのカテゴリを優先するかのマッピングを定義する
2. **改善パターンカタログ**: 「高確度で有望」な改善案から共通パターンを抽出し、再利用可能なカタログにする
3. **改善効果の検証方法**: 改善前後で何を計測してどう比較するかのプロトコルを定義する
4. **スキルとしてのワークフロー設計**: 上記を「スキルを改善するスキル」のフェーズ設計に落とし込む
