# 実行可能性 評価結果

## レビューアー別評価

### reviewer-stability (指示品質・安定性)
| 評価項目 | 実行可能性 | ボトルネック（あれば） |
|---------|-----------|-------------------|
| A. 指示の具体性 | DIFFICULT | 曖昧表現の判定基準が主観的 |
| B. 出力フォーマット決定性 | EXECUTABLE | - |
| C. 条件分岐の完全性 | EXECUTABLE | - |
| D. 冪等性 | DIFFICULT | 「重複」「破壊」の判定が曖昧 |
| E. 参照整合性 | EXECUTABLE | - |

### reviewer-efficiency (効率性・コンテキスト最適化)
| 評価項目 | 実行可能性 | ボトルネック（あれば） |
|---------|-----------|-------------------|
| A. 不要な処理 | DIFFICULT | 「後続で使用されない」の判定が困難 |
| B. 親コンテキスト予算 | EXECUTABLE | - |
| C. サブエージェントコンテキスト | DIFFICULT | 「不要なファイル」の判定基準が不明確 |
| D. データ受け渡し効率 | EXECUTABLE | - |
| E. サブエージェント粒度 | EXECUTABLE | - |

### reviewer-ux (UX・ワークフロー設計)
| 評価項目 | 実行可能性 | ボトルネック（あれば） |
|---------|-----------|-------------------|
| A. 進捗可視性 | EXECUTABLE | - |
| B. ユーザーインタラクションの質 | DIFFICULT | 「必要/過剰」の判定が主観的 |
| C. エラー通知 | EXECUTABLE | - |
| D. 使い方ドキュメント | EXECUTABLE | - |

### reviewer-architecture (アーキテクチャ・パターン)
| 評価項目 | 実行可能性 | ボトルネック（あれば） |
|---------|-----------|-------------------|
| A. テンプレート外部化 | EXECUTABLE | - |
| B. サブエージェント委譲モデル | EXECUTABLE | - |
| C. ナレッジ蓄積 | EXECUTABLE | - |
| D. エラー耐性 | EXECUTABLE | - |
| E. 批判的レビューの組込み | DIFFICULT | 「成果物の種類に応じた検証方法」の提案が困難 |
| F. ファイル構成のスコープ | EXECUTABLE | - |

### reviewer-effectiveness (有効性・目的達成度)
| 評価項目 | 実行可能性 | ボトルネック（あれば） |
|---------|-----------|-------------------|
| A-1. 目的の明確性 | DIFFICULT | 3基準の判定が主観的 |
| A-2. 手段の論理的妥当性 | INFEASIBLE | 「論理的貢献」の判定に高度な推論が必要 |
| B. フェーズ間データフロー妥当性 | DIFFICULT | 変数照合は可能だが論理的妥当性の判定が困難 |
| C. エッジケース耐性 | INFEASIBLE | 実行結果を観察しないと判定できない |

## DIFFICULT/INFEASIBLE の詳細分析

### reviewer-stability - A. 指示の具体性
- 判定: DIFFICULT
- ボトルネック: 「適切に」「必要に応じて」等の曖昧表現は検出可能だが、それが真に曖昧かどうか（文脈依存で明確な場合もある）の判定が主観的。「具体的な代替表現」の生成もAIの解釈に依存する
- 影響: 実行は可能だが、同じテキストに対して異なるレビュー結果が出る可能性がある。過剰検出（問題ない表現を指摘）や見逃し（実際に曖昧な箇所を検出しない）のリスク
- 対策: 検出対象の曖昧表現リストを具体的に列挙する。文脈依存の許容パターン（「適切に〜する」が直前に判定基準のリストがある場合はOK等）を例示する

### reviewer-stability - D. 冪等性
- 判定: DIFFICULT
- ボトルネック: 「再実行時に情報が破壊・重複する」の判定には、ファイル操作の意図と前提条件の理解が必要。Write前のRead呼び出しの有無は検出できるが、それが本当に冪等性違反かどうか（初回生成とマージ更新の区別）は文脈依存
- 影響: 誤検出（冪等でない設計が意図的である場合）や見逃し（暗黙的な非冪等性）が発生しうる
- 対策: 冪等性が要求されるファイル操作パターン（知見蓄積、ステータスファイル等）を明示し、それらについてのみチェックする。「Write前のRead+条件分岐」の有無を機械的に検証する基準を追加

### reviewer-efficiency - A. 不要な処理
- 判定: DIFFICULT
- ボトルネック: 「出力が後続フェーズで使用されない」の判定には、全フェーズのデータフロー追跡が必要。SKILL.md内の記述と実際のテンプレート内参照を照合する必要があるが、暗黙的な依存関係（明示されていない中間ファイルの参照等）は検出できない
- 影響: 明示的な使用関係のみ追跡可能で、実際には使われている情報を「不要」と誤判定するリスク。または、実際に不要な処理を見逃す
- 対策: データフロー追跡の範囲を明示する（「次フェーズのテンプレート内で変数参照されていない出力ファイル」等、機械的に検証可能な基準に限定）。「不要と推定される」という表現で確信度を下げる

### reviewer-efficiency - C. サブエージェントコンテキスト
- 判定: DIFFICULT
- ボトルネック: 「不要なファイル」の判定基準が不明確。サブエージェントのタスク達成に必要な情報の範囲はタスクの性質と記述の詳細度に依存する
- 影響: 過剰検出（実際には必要な文脈情報を「不要」と判定）のリスク
- 対策: 検出対象を「テンプレート内で一度も参照されないファイルのRead指示」に限定する。または、「タスクの目的（テンプレート冒頭の説明文）に対して明らかに無関係なファイル」という基準に絞る

### reviewer-ux - B. ユーザーインタラクションの質
- 判定: DIFFICULT
- ボトルネック: AskUserQuestionの「必要/過剰」判定は、操作の不可逆性、判断の必要性、ユーザーの意図等を総合的に評価する必要があり、明確な二値判定は困難。「不可逆操作」「意思決定が必要な分岐」の定義は具体的だが、実際の適用には判断を要する
- 影響: レビューアーによって判定が分かれる（同じAskUserQuestionを「必要」と「過剰」で異なる評価）。特に「トレードオフのある判断」の認識はAIの解釈に依存
- 対策: 判定基準を3段階（明らかに必要/判断が必要/明らかに過剰）に分け、中間層は「要検討」として報告する。または、具体的な操作種類（Write/デプロイ/外部API呼び出し）ごとに判定ルールを明示

### reviewer-architecture - E. 批判的レビューの組込み
- 判定: DIFFICULT
- ボトルネック: 「成果物の種類に応じた検証方法を提案する」には、成果物の性質（構造化データ/自然言語/コード等）と検証可能性（テスト実行可能か/形式検証のみか）の理解が必要。提案の適切性はAIの判断に依存
- 影響: 提案内容が具体性に欠ける（「レビューステップを追加すべき」という抽象的指摘にとどまる）、または実現困難な方法を提案するリスク
- 対策: 成果物カテゴリごとの検証方法テンプレートをレビューアーに提供する（例: エージェント定義→必須セクション確認、計画書→目的-手段の整合性確認、等）

### reviewer-effectiveness - A-1. 目的の明確性
- 判定: DIFFICULT
- ボトルネック: 「具体性」「境界」「成功基準」の3基準それぞれに「推定できるか」という主観的判定が含まれる。特に「境界」（何を対象としないか）は明示されないことが多く、AIが「推定」する必要がある
- 影響: 同じSKILL.mdに対して異なる評価結果が出る。特に「推定できる」の閾値が不明確
- 対策: 各基準を2値判定（明示されているか/いないか）に変更する。「推定できる」を「SKILL.mdの使い方セクションに明記されている」に置き換える

### reviewer-effectiveness - A-2. 手段の論理的妥当性
- 判定: INFEASIBLE
- ボトルネック: 各フェーズの処理が目的達成に「論理的に貢献するか」の判定には、以下が必要:
  1. 目的の完全な理解（A-1で抽出）
  2. 各フェーズの処理内容の完全な理解（テンプレート全体の読解）
  3. 処理と目的の因果関係の推論（「この処理がなぜ目的達成に必要か」の説明生成）

  これはsonnetサブエージェントの推論能力に高度に依存し、コンテキストウィンドウ内で全フェーズの処理内容を保持しながら論理的整合性を評価する必要がある
- 影響: 評価が不安定（同じスキルに対して異なる判定）。または、表面的な相関のみで判定し、深い論理的矛盾を見逃す
- 対策:
  1. 判定基準を緩和: 「貢献が不明確」のみを検出対象とし、SKILL.md内でフェーズの目的（why）が明記されているかを機械的にチェックする
  2. スコープを限定: 最終フェーズのみ評価対象とし、「最終フェーズの出力が宣言された成果物を含むか」に絞る
  3. 実行結果との照合: スキルを実際に実行し、各フェーズの出力を観察してから評価する（ただしこれはサブエージェントの権限外）

### reviewer-effectiveness - B. フェーズ間データフロー妥当性
- 判定: DIFFICULT
- ボトルネック: 変数・フィールド照合（基準1, 2）は実行可能だが、「SKILL.md記述照合」（基準3）は曖昧。「〜を使って」等の記述が暗黙的な依存を指すか、既知の情報を指すかの判定が困難。また、「暗黙的依存」の検出は、テンプレート内の処理ロジックを完全に理解する必要がある
- 影響: 明示的な変数参照の欠落は検出できるが、論理的な情報欠落（前フェーズが生成すべき情報の不足）は見逃す可能性
- 対策: 検出範囲を基準1, 2のみに限定し、機械的に照合可能な項目に絞る。基準3は「参考情報」として扱い、重大な問題には含めない

### reviewer-effectiveness - C. エッジケース耐性
- 判定: INFEASIBLE
- ボトルネック: 3パターンの耐性評価は、実際にスキルを実行してみないと判定できない:
  1. 最小構成: Globが空リストを返す場合の挙動は、SKILL.md内の記述から推論できる場合もあるが、サブエージェントの実際の動作（エラーハンドリング、デフォルト値の使用等）は実行しないと確認できない
  2. 大規模構成: コンテキスト超過リスクは、テンプレート内のRead指示の数と各ファイルのサイズから推定可能だが、実際のトークン数は実行しないと計測できない
  3. 必須セクション欠落: エラー通知の有無は、SKILL.md内のバリデーション処理の記述から推論できる場合もあるが、実際のエラーハンドリングは実行しないと確認できない
- 影響: 評価が推測ベースになり、精度が低い。または「判定不能」として報告することになり、レビューの価値が低下
- 対策:
  1. 評価範囲を限定: 「SKILL.md内にエッジケース処理の記述があるか」のみをチェックし、実際の動作保証はスコープ外とする
  2. テスト実行フェーズを追加: スキル実行後にこのレビューアーを呼び出し、実行ログを解析する設計に変更する（ただしskill_improveのワークフロー全体の変更が必要）

## サマリ統計
- EXECUTABLE: 17件
- DIFFICULT: 9件
- INFEASIBLE: 2件
- 合計: 28評価項目

## 推奨対応
### 優先度: 高（INFEASIBLE → EXECUTABLE化）
1. **reviewer-effectiveness - A-2**: 判定基準を「フェーズの目的（why）がSKILL.mdに明記されているか」に変更
2. **reviewer-effectiveness - C**: 評価範囲を「エッジケース処理の記述有無」に限定

### 優先度: 中（DIFFICULT → 精度向上）
3. **reviewer-stability - A**: 曖昧表現リストと文脈依存の許容パターンを例示
4. **reviewer-efficiency - A**: データフロー追跡の範囲を「明示的な変数参照」に限定
5. **reviewer-ux - B**: 判定基準を3段階（明らかに必要/要検討/明らかに過剰）に分割

### 優先度: 低（現状維持可能）
6. その他DIFFICULT項目: 評価の不安定性はあるがレビュー価値は提供できる。改善案の表現を「推奨」「要検討」等で確信度を下げることで対応可能
