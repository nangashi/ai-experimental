### 効率性レビュー結果

#### 重大な問題
- [SKILL.md が目標行数を超過]: [SKILL.md] [~12行超過（262行/目標250行）] [Phase 0 のグループ分類セクション（行70-80付近）に判定ルール概要が記載されているが、詳細は group-classification.md に外部化されている。この中間的な記述が冗長性を生んでいる] [impact: low] [effort: low]

#### 改善提案
- [グループ分類ロジックの一元化]: [~10-15行削減] [Phase 0 Step 4 の「判定ルール（概要）」（行74-78）を削除し、group-classification.md への参照に置換する。現状では SKILL.md に概要が記述されているが、実際の判定は親コンテキストで直接行うため、group-classification.md の詳細基準を読み込む必要がある。概要記述を削除し、group-classification.md を Read して判定させることで、SKILL.md を目標行数以下に収めつつ判定ロジックを一元化できる] [impact: medium] [effort: low]
- [テンプレート間の説明重複]: [~20-30行/ファイル削減（全8ファイル合計で160-240行削減）] [各分析エージェント定義ファイル（agents/配下）に共通の「Detection-First, Reporting-Second」プロセス説明（Phase 1/Phase 2 の概念説明、約30-40行）が重複している。この説明を shared/ ディレクトリの共通テンプレート（例: analysis-process.md）に外部化し、各エージェント定義では「Read {shared_template} を参照」と1行で済ませることで、サブエージェントの初期コンテキスト消費を大幅に削減できる] [impact: high] [effort: medium]
- [Per-item 承認ループの部分並列化]: [承認時間短縮] [Phase 2 Step 2a の per-item 承認ループは現在完全に直列実行されている（finding 1件→ユーザー承認→finding 2件→…）。代替案: findings を severity でグルーピングし、各グループの最初の finding を承認時に全ての同 severity findings のプレビューとして提示することで、ユーザーが「このセクションは全て承認」「このセクションは個別確認」を選択できる2段階承認フローに変更できる。これにより承認インタラクション数を削減できる] [impact: medium] [effort: high]
- [テンプレート内の「使い方」セクション存在]: [~5-10行/ファイル削減] [templates/apply-improvements.md にサブエージェントが参照するテンプレートとして不要な「使い方」セクションは存在しないが、agents/ 配下のファイルには frontmatter で description が定義されている（3-4行）。これらは親がサブエージェントを起動する際に使用する可能性があるため、削除は慎重に検討すべきだが、サブエージェント内では参照されないメタデータである] [impact: low] [effort: low]
- [Phase 1 サブエージェント返答行数の過剰制約]: [柔軟性向上] [Phase 1 サブエージェント返答は「4行フォーマット」（dim, critical, improvement, info）に固定されているが、サブエージェントが分析失敗時やエラー情報を返答する必要がある場合、この制約が情報欠落を引き起こす可能性がある（現状では findings ファイル存在確認で成否判定しているため実害は小さいが、デバッグ情報を返答に含められない）。返答行数を「4-10行（基本4行+オプション6行でエラー詳細）」に緩和することで、エラーハンドリングの明示性が向上する] [impact: low] [effort: low]

#### コンテキスト予算サマリ
- SKILL.md: 262行（目標: ≤250行、超過: 12行）
- テンプレート: 平均162行/ファイル（8ファイル: agents 7個 + apply-improvements 1個）
- 3ホップパターン: 0件（Phase 1→ファイル→Phase 2 のファイル経由データフローが適切に設計されている）
- 並列化可能: 0件（Phase 1 の並列分析は既に実装済み。Phase 2 の per-item 承認は UX 設計上の直列処理であり、技術的制約ではない）

#### 良い点
- [ファイル経由データフロー]: Phase 1 サブエージェントが findings をファイルに保存し、Phase 2 サブエージェントがそのファイルを直接読み込む設計により、3ホップパターン（親経由の中継）を完全に回避している。親コンテキストには4行サマリのみが保持され、詳細は全てファイルに委譲されている
- [並列分析の実装]: Phase 1 で最大5個の分析サブエージェントを並列起動し、次元ごとの独立分析を効率的に実行している。並列数は agent_group により動的に決定される（hybrid: 5個、evaluator/producer: 4個、unclassified: 3個）
- [サブエージェント粒度]: 各次元の分析エージェント定義は十分に複雑なタスク（150-200行のテンプレート）を委譲しており、過度に細かい委譲ではない。改善適用サブエージェントも変更適用という重い処理を担当しており、粒度は適切
