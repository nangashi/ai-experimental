# 改善計画: agent_bench_new

## 変更対象ファイル
| # | ファイル | 変更種別 | 変更概要 | 対応フィードバック |
|---|---------|---------|---------|------------------|
| 1 | SKILL.md | 修正 | Phase 0 Step 6 検証失敗時の再試行フローを明示化 | I-6: UX改善 |

## 各ファイルの変更詳細

### 1. /home/toyama-ryosuke/ghq/github.com/nangashi/ai-experimental/.claude/skills/agent_bench_new/SKILL.md（修正）
**対応フィードバック**: I-6 (ux): Phase 0 Step 6 検証失敗時の再試行フロー暗黙的

**変更内容**:
- **行136**: 検証失敗時の処理フローを明示化
  - 現在の記述: `検証失敗 → 欠落セクション名をエラー出力し、AskUserQuestion で以下の選択肢を提示する: (1) 手動でファイルを修正して再検証（修正完了後、Enterキーを押して再検証。Step 6 の検証処理に戻る）、(2) perspective-source.md を削除して自動生成を再実行、(3) スキルを中断`
  - 改善後の記述:
```markdown
- 検証失敗 → 欠落セクション名をエラー出力し、AskUserQuestion で以下の選択肢を提示する:
  - (1) 手動でファイルを修正して再検証
  - (2) perspective-source.md を削除して自動生成を再実行
  - (3) スキルを中断
- 選択肢 (1) が選択された場合:
  1. "perspective.md を手動で修正してください。修正完了後、Enterキーを押してください。" と出力
  2. AskUserQuestion で修正完了確認（選択肢: "修正完了" のみ）
  3. 修正完了確認後、Step 6 の検証処理を再実行（必須セクション存在確認）
  4. 検証成功 → perspective 解決完了、検証失敗 → 再度選択肢を提示（ループ）
```

## 新規作成ファイル
該当なし

## 削除推奨ファイル
該当なし

## 実装順序
1. SKILL.md の Phase 0 Step 6 検証失敗時の処理フローを修正（選択肢1選択後の明示的な再試行フローを追加）

## 注意事項
- 検証失敗時のループ処理が無限ループにならないよう、ユーザーが選択肢 (2) または (3) でエスケープできることを確認すること
- AskUserQuestion の選択肢テキストがユーザーに明確に伝わるよう、手順を番号付きリストで構造化すること
- 再検証実行後の分岐（成功/失敗）が明示的に記述されていること
