# 採点結果: v009-baseline

## 実行条件
- **観点**: consistency
- **対象**: design
- **埋め込み問題数**: 10問
- **実行日時**: 2026-02-11

---

## Run1 詳細採点

### 検出マトリクス

| 問題ID | カテゴリ | 深刻度 | 判定 | スコア | 検出箇所/判定理由 |
|--------|---------|--------|------|--------|------------------|
| P01 | 命名規約(テーブル名) | 重大 | △ | 0.5 | C-3でPK命名の不統一を指摘しているが、テーブル名の単数/複数形パターンの混在や既存パターンとの比較は明示されていない |
| P02 | 命名規約(タイムスタンプ) | 重大 | ○ | 1.0 | C-2で4種類のタイムスタンプ列命名パターン混在を具体的に列挙し、既存パターンとの一貫性検証が必要と推奨 |
| P03 | 命名規約(外部キー) | 中 | △ | 0.5 | S-3で外部キー参照の曖昧性に言及しているが、参照先PKとの命名パターン不整合の分析は不十分 |
| P04 | API設計(HTTPメソッド) | 中 | × | 0.0 | PATCH/PUT混在に関する指摘なし |
| P05 | API設計(エンドポイント) | 中 | × | 0.0 | `/track/{orderNumber}`のパスプレフィックス不統一に関する指摘なし |
| P06 | 実装パターン(HTTP通信) | 中 | ○ | 1.0 | S-2でRestTemplate選定を指摘し、既存コードベースとの一貫性検証が必要と推奨 |
| P07 | 実装パターン(データアクセス/トランザクション) | 重大 | ○ | 1.0 | M-3でトランザクション管理パターンが文書化されていないことを指摘し、既存パターンとの一致確認を推奨 |
| P08 | ディレクトリ構造 | 軽微 | ○ | 1.0 | M-1でディレクトリ構造・ファイル配置方針の欠落を指摘し、既存パターンとの一貫性が検証できないと明示 |
| P09 | 実装パターン(非同期処理) | 軽微 | △ | 0.5 | O-2で非同期処理パターンが文書化されていないことに言及しているが、観察レベルで既存パターンとの一貫性検証の必要性は明示されていない |
| P10 | 依存管理(設定管理/環境変数) | 軽微 | ○ | 1.0 | M-2で設定ファイル形式・環境変数命名規則が文書化されていないことを指摘し、既存パターンとの一貫性が検証できないと明示 |

**検出スコア合計: 6.5**

### ボーナス検出

| ID | 内容 | スコア | 判定理由 |
|----|------|--------|---------|
| B-1 | S-1: API層のcamelCaseとDB層のsnake_caseの変換パターンが明示的に文書化されていない | +0.5 | スコープ内の有益な指摘。既存APIとの一貫性検証の必要性を推奨 |

**ボーナス合計: +0.5 (1件)**

### ペナルティ

なし

**ペナルティ合計: 0 (0件)**

### Run1 総合スコア

```
検出スコア: 6.5
ボーナス: +0.5
ペナルティ: -0
-------------------
Run1合計: 7.0
```

---

## Run2 詳細採点

### 検出マトリクス

| 問題ID | カテゴリ | 深刻度 | 判定 | スコア | 検出箇所/判定理由 |
|--------|---------|--------|------|--------|------------------|
| P01 | 命名規約(テーブル名) | 重大 | △ | 0.5 | Issue 5でPK命名の不統一を指摘しているが、テーブル名の単数/複数形パターンの混在や既存パターンとの比較は明示されていない |
| P02 | 命名規約(タイムスタンプ) | 重大 | ○ | 1.0 | Issue 1で4種類のタイムスタンプ列命名パターン混在を具体的に列挙し、既存パターンとの一貫性検証が必要と推奨 |
| P03 | 命名規約(外部キー) | 中 | △ | 0.5 | Issue 6で外部キー参照文書化の不整合に言及しているが、参照先PKとの命名パターン不整合の分析は不十分 |
| P04 | API設計(HTTPメソッド) | 中 | × | 0.0 | PATCH/PUT混在に関する指摘なし |
| P05 | API設計(エンドポイント) | 中 | △ | 0.5 | Issue 7で`/track/{orderNumber}`のパスパターン不整合を指摘し、既存API規約との一貫性検証を推奨 |
| P06 | 実装パターン(HTTP通信) | 中 | × | 0.0 | RestTemplate選定に関する指摘なし |
| P07 | 実装パターン(データアクセス/トランザクション) | 重大 | ○ | 1.0 | Issue 3でトランザクション管理パターンが文書化されていないことを指摘し、既存パターンとの一致確認を推奨 |
| P08 | ディレクトリ構造 | 軽微 | ○ | 1.0 | Issue 10でディレクトリ構造の文書化欠落を指摘し、既存規約との一貫性が検証できないと明示 |
| P09 | 実装パターン(非同期処理) | 軽微 | ○ | 1.0 | Issue 4で非同期処理パターンが文書化されていないことを指摘し、既存パターンとの一貫性検証の必要性を明示 |
| P10 | 依存管理(設定管理/環境変数) | 軽微 | ○ | 1.0 | Issue 11, 12で設定ファイル形式・環境変数命名規則が文書化されていないことを指摘し、既存パターンとの一貫性が検証できないと明示 |

**検出スコア合計: 6.5**

### ボーナス検出

| ID | 内容 | スコア | 判定理由 |
|----|------|--------|---------|
| B-1 | Issue 2: API層とDB層のレスポンスフォーマット不整合（wrapper形式の文書化と実例の不一致） | +0.5 | スコープ内の有益な指摘。既存APIとの一貫性検証の必要性を推奨 |
| B-2 | Issue 8: ページネーションパターンが文書化されていない | +0.5 | スコープ内の有益な指摘。既存API規約との一貫性が検証できないと明示 |
| B-3 | Issue 9: Redisキャッシュキー命名規約が文書化されていない | +0.5 | スコープ内の有益な指摘。既存パターンとの一貫性が検証できないと明示 |
| B-4 | Issue 13: バリデーションパターンが文書化されていない | +0.5 | スコープ内の有益な指摘。既存バリデーションアプローチとの一貫性が検証できないと明示 |
| B-5 | Issue 14: WebSocketエンドポイントパターンが文書化されていない | +0.5 | スコープ内の有益な指摘。既存WebSocket規約との一貫性が検証できないと明示 |

**ボーナス合計: +2.5 (5件、上限5件)**

### ペナルティ

なし

**ペナルティ合計: 0 (0件)**

### Run2 総合スコア

```
検出スコア: 6.5
ボーナス: +2.5
ペナルティ: -0
-------------------
Run2合計: 9.0
```

---

## 統計サマリ

| 指標 | Run1 | Run2 | 平均 | 標準偏差 |
|------|------|------|------|----------|
| 検出スコア | 6.5 | 6.5 | 6.5 | 0.0 |
| ボーナス | +0.5 | +2.5 | +1.5 | 1.0 |
| ペナルティ | 0 | 0 | 0 | 0.0 |
| **総合スコア** | **7.0** | **9.0** | **8.0** | **1.0** |

---

## 分析コメント

### 検出精度
- **P02 (タイムスタンプ命名)**: 両実行で完全検出。4種類の混在パターンを具体的に列挙し、既存パターンとの一貫性検証を推奨。
- **P07 (トランザクション管理)**: 両実行で完全検出。文書化欠落と既存パターンとの一貫性検証の必要性を明示。
- **P08 (ディレクトリ構造)**: 両実行で完全検出。ファイル配置方針の欠落を指摘し、既存規約との一貫性が検証できないと明示。
- **P10 (設定管理/環境変数)**: 両実行で完全検出。Run2は設定ファイルと環境変数を別Issueで詳細に分析。

### 検出漏れ
- **P04 (HTTPメソッド混在)**: 両実行で未検出。PATCH/PUT混在は重要な一貫性問題だが、レビュー対象外となった。
- **P06 (RestTemplate選定)**: Run1では検出（S-2）、Run2では未検出。実行によるばらつきあり。

### ボーナス検出の差異
- **Run1**: 1件のボーナス（API-DB命名変換パターン）
- **Run2**: 5件のボーナス（APIレスポンスフォーマット、ページネーション、Redisキー命名、バリデーション、WebSocket）
- **差異の原因**: Run2はより詳細な不足項目の洗い出しを実施。情報欠落系の問題検出に強い。

### 安定性評価
- **標準偏差**: 1.0（中安定）
- **傾向**: 検出スコアは安定（SD=0.0）だが、ボーナス検出で±2.0ptの変動あり。
- **信頼性**: 基本的な問題検出は安定しているが、追加価値の提供（ボーナス）は実行により変動。
